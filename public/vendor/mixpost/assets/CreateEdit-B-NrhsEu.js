import{k as m,l as b,x as l,b as P,b8 as re,y as M,z as n,G as F,u as t,t as A,E as o,r as T,aV as Ae,f as He,F as D,q as ze,K as Le,C as q,ak as h,A as f,br as Ve,b1 as Me,w as me,B as Te,aJ as R,s as pe,O as Ee,D as Ie,bN as Be,d as Se}from"./@vue-DxEuNGre.js";import{T as ie,O as fe,Z as Ne}from"./@inertiajs-D-tiTHlX.js";import{u as ae}from"./vue-i18n-CbxO4HOa.js";import{l as W}from"./lodash-1tNnn4nO.js";import{_ as Oe}from"./Admin-DzS5mU4K.js";import{u as Pe}from"./usePageMode-BKxn7TaF.js";import{g as Q,h as J,c as Z,a as X,i as te,j as O,k as ge,l as Fe,e as U,m as Ue,d as ve,u as ue,n as De,P as qe}from"./app-TmpkEByR.js";import{_ as Ze}from"./PageHeader-5KlQKxZu.js";import{_ as se}from"./Panel-C3_mBW3b.js";import{T as de}from"./Trash-CGBHVq5p.js";import{A as Re}from"./ArrowTopRightOnSquare-BBcEejN-.js";import{_ as I}from"./VerticalGroup-0ogbRp0b.js";import{_ as ee}from"./Select-BOKsQWfr.js";import{_ as ne}from"./LabelSuffix-Di2RYCr8.js";import{_ as _e}from"./Textarea-XqA1xqrh.js";import{D as je}from"./vuedraggable-OGJnKJQC.js";import{n as he}from"./nanoid-DP16PUbO.js";import{_ as Ge,L as Je}from"./ListItem-CZIJw31K.js";import{_ as L}from"./emoji-mart-vue-fast-DVezNdb5.js";import{_ as be}from"./NoResult-BSD8OTcv.js";import{E as We,n as le,N as Xe,I as Ye,V as Ke,u as Qe,S as et,U as tt,T as st,L as ot,a as nt}from"./@tiptap-DlxRGiDd.js";import{k as lt}from"./floating-vue-BgCeCz-J.js";import{_ as rt}from"./UploadButton-x4cB9Kdt.js";import{c as it,F as at,S as ut}from"./prosemirror-model-C-VrLeHJ.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";import"./@intlify-AYDeHhOU.js";import"./QueueList-DTZpFIOW.js";/* empty css            */import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./@floating-ui-Dq8c3VDt.js";import"./Flex-55yEXw9x.js";import"./vue-CveCyDR3.js";import"./sortablejs-DNSymPwa.js";import"./prosemirror-state-Dfkm3xtq.js";import"./prosemirror-transform-CNTRfHZy.js";import"./prosemirror-dropcursor-CRVdsyHs.js";import"./prosemirror-gapcursor-CIClWOe5.js";import"./prosemirror-keymap-BrtsOOc5.js";import"./w3c-keyname-DEtA-KhA.js";import"./prosemirror-view-CARpBv5D.js";import"./prosemirror-history-C8_5KGmB.js";import"./rope-sequence-Cxv9J64N.js";import"./linkifyjs-CkylhtGF.js";import"./prosemirror-commands-B8A7CEu7.js";import"./prosemirror-schema-list-B_jBki9Q.js";import"./orderedmap-C4TimWWB.js";const dt={},ct={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 7 18"};function mt(a,e){return m(),b("svg",ct,e[0]||(e[0]=[l("path",{d:"M2.10477 13.5C1.48483 13.5 0.982269 12.9963 0.982269 12.375C0.982269 11.7537 1.48483 11.25 2.10477 11.25C2.72472 11.25 3.22728 11.7537 3.22728 12.375C3.22728 12.9963 2.72472 13.5 2.10477 13.5ZM2.10477 6C1.48483 6 0.982269 5.49632 0.982269 4.875C0.982269 4.25368 1.48483 3.75 2.10477 3.75C2.72472 3.75 3.22728 4.25368 3.22728 4.875C3.22728 5.49632 2.72472 6 2.10477 6ZM2.10477 2.25C1.48483 2.25 0.982269 1.74632 0.982269 1.125C0.982269 0.50368 1.48483 0 2.10477 0C2.72472 0 3.22728 0.50368 3.22728 1.125C3.22728 1.74632 2.72472 2.25 2.10477 2.25ZM2.10477 17.25C1.48483 17.25 0.982269 16.7463 0.982269 16.125C0.982269 15.5037 1.48483 15 2.10477 15C2.72472 15 3.22728 15.5037 3.22728 16.125C3.22728 16.7463 2.72472 17.25 2.10477 17.25ZM2.10477 9.75C1.48483 9.75 0.982269 9.24632 0.982269 8.625C0.982269 8.00368 1.48483 7.5 2.10477 7.5C2.72472 7.5 3.22728 8.00368 3.22728 8.625C3.22728 9.24632 2.72472 9.75 2.10477 9.75ZM5.84646 13.5C5.22652 13.5 4.72395 12.9963 4.72395 12.375C4.72395 11.7537 5.22652 11.25 5.84646 11.25C6.4664 11.25 6.96897 11.7537 6.96897 12.375C6.96897 12.9963 6.4664 13.5 5.84646 13.5ZM5.84646 6C5.22652 6 4.72395 5.49632 4.72395 4.875C4.72395 4.25368 5.22652 3.75 5.84646 3.75C6.4664 3.75 6.96897 4.25368 6.96897 4.875C6.96897 5.49632 6.4664 6 5.84646 6ZM5.84646 2.25C5.22652 2.25 4.72395 1.74632 4.72395 1.125C4.72395 0.50368 5.22652 0 5.84646 0C6.4664 0 6.96897 0.50368 6.96897 1.125C6.96897 1.74632 6.4664 2.25 5.84646 2.25ZM5.84646 17.25C5.22652 17.25 4.72395 16.7463 4.72395 16.125C4.72395 15.5037 5.22652 15 5.84646 15C6.4664 15 6.96897 15.5037 6.96897 16.125C6.96897 16.7463 6.4664 17.25 5.84646 17.25ZM5.84646 9.75C5.22652 9.75 4.72395 9.24632 4.72395 8.625C4.72395 8.00368 5.22652 7.5 5.84646 7.5C6.4664 7.5 6.96897 8.00368 6.96897 8.625C6.96897 9.24632 6.4664 9.75 5.84646 9.75Z",fill:"currentColor"},null,-1)]))}const pt=L(dt,[["render",mt]]),z={INLINE:"inline",CENTER:"center",FLOAT_LEFT:"left",FLOAT_RIGHT:"right"},oe={};function ft(a){return new Promise((e,i)=>{const d={complete:!1,width:0,height:0,src:a};if(!a){i(d);return}if(oe[a]){e({...oe[a]});return}const c=new Image;c.onload=()=>{d.width=c.width,d.height=c.height,d.complete=!0,oe[a]={...d},e(d)},c.onerror=()=>{i(d)},c.src=a})}function gt(a,e,i){return a<e?e:a>i?i:a}const vt=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,_t=null,ht=z.INLINE,bt={},wt={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function $t(a,e){return m(),b("svg",wt,e[0]||(e[0]=[l("path",{d:"M4 19h16v2H4zm5-4h11v2H9zm-5-4h16v2H4zm0-8h16v2H4zm5 4h11v2H9z"},null,-1)]))}const we=L(bt,[["render",$t]]),kt={},Ct={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function xt(a,e){return m(),b("svg",Ct,e[0]||(e[0]=[l("path",{d:"M4 19h16v2H4zm3-4h10v2H7zm-3-4h16v2H4zm0-8h16v2H4zm3 4h10v2H7z"},null,-1)]))}const $e=L(kt,[["render",xt]]),yt={},At={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function Ht(a,e){return m(),b("svg",At,e[0]||(e[0]=[l("path",{d:"M4 19h16v2H4zm0-4h11v2H4zm0-4h16v2H4zm0-8h16v2H4zm0 4h11v2H4z"},null,-1)]))}const ke=L(yt,[["render",Ht]]),zt={class:"p-md bg-white"},Lt={class:"editorClassicMenu flex gap-xs"},Vt={__name:"ImageMenu",props:{editor:{required:!0,type:We},node:le.node,updateAttributes:le.updateAttributes,deleteNode:{required:!0,type:Function},selected:{required:!0,type:Boolean}},setup(a){const e=a,i=P(()=>e.node.attrs.display),d=r=>{if(r===i.value){e.updateAttributes({display:z.INLINE});return}e.updateAttributes({display:r})},c=()=>{e.deleteNode()};return(r,k)=>{const g=re("tooltip");return m(),M(t(lt),{triggers:[],shown:a.selected,autoHide:!1},{popper:n(({hide:v})=>[l("div",zt,[l("div",Lt,[F((m(),b("button",{onClick:k[0]||(k[0]=s=>d(t(z).FLOAT_LEFT)),class:A({"is-active":t(z).FLOAT_LEFT===i.value}),type:"button"},[o(ke)],2)),[[g,r.$t("editor.align_left")]]),F((m(),b("button",{onClick:k[1]||(k[1]=s=>d(t(z).CENTER)),class:A({"is-active":t(z).CENTER===i.value}),type:"button"},[o($e)],2)),[[g,r.$t("editor.align_center")]]),F((m(),b("button",{onClick:k[2]||(k[2]=s=>d(t(z).FLOAT_RIGHT)),class:A({"is-active":t(z).FLOAT_RIGHT===i.value}),type:"button"},[o(we)],2)),[[g,r.$t("editor.align_right")]]),F((m(),M(Q,{onClick:c,destructive:""},{default:n(()=>[o(de)]),_:1})),[[g,r.$t("editor.remove_image")]])])])]),_:1},8,["shown"])}}},Mt={class:"drag-handle",contentEditable:"false",draggable:"true","data-drag-handle":""},Tt=["src","title","alt","width","height","data-display"],Et={key:0,class:"border border-primary-500 h-full left-0 absolute top-0 w-full z-10"},It=["onMousedown"],K=20,ce=1e5,Bt={__name:"Image",props:{...le},setup(a){const e=a,i={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"},d=P(()=>e.node.attrs.src),c=P(()=>e.node.attrs.width),r=P(()=>e.node.attrs.height),k=P(()=>e.node.attrs.display),g=P(()=>({"float-none inline-block":k.value===z.INLINE,"flex justify-center":k.value===z.CENTER,"float-left ml-0 mr-md":k.value===z.FLOAT_LEFT,"float-right ml-xs mr-0":k.value===z.FLOAT_RIGHT})),v=T({width:0,height:0}),s=T({width:ce,height:ce}),p=T(!1);Ae(async()=>{const $=await ft(d.value);$.complete||($.width=K,$.height=K),v.value={width:$.width,height:$.height}});const u=()=>{const{width:$}=getComputedStyle(e.editor.view.dom);s.value=parseInt($,10)},C=()=>{e.editor.commands.setNodeSelection(e.getPos())};He(()=>{u()});const H=T({x:0,y:0,w:0,h:0,dir:""}),E=($,Y)=>{$.preventDefault(),$.stopPropagation(),H.value.x=$.clientX,H.value.y=$.clientY;const S=v.value.width,j=v.value.height,G=S/j;let{width:y,height:N}=e.node.attrs;const B=s.value.width;y&&!N?(y=y>B?B:y,N=Math.round(y/G)):N&&!y?(y=Math.round(N*G),y=y>B?B:y):!y&&!N?(y=S>B?B:S,N=Math.round(y/G)):y=y>B?B:y,H.value.w=y,H.value.h=N,H.value.dir=Y,p.value=!0,_()},V=$=>{if($.preventDefault(),$.stopPropagation(),!p.value)return;const{x:Y,y:S,w:j,h:G,dir:y}=H.value,N=($.clientX-Y)*(/l/.test(y)?-1:1),B=($.clientY-S)*(/t/.test(y)?-1:1);e.updateAttributes({width:gt(j+N,K,s.value.width),height:Math.max(G+B,K)})},w=$=>{$.preventDefault(),$.stopPropagation(),p.value&&(p.value=!1,H.value={x:0,y:0,w:0,h:0,dir:""},x(),C())},_=()=>{document.addEventListener("mousemove",V,!0),document.addEventListener("mouseup",w,!0)},x=()=>{document.removeEventListener("mousemove",V,!0),document.removeEventListener("mouseup",w,!0)};return($,Y)=>(m(),M(t(Xe),{as:"span",class:A([g.value,"leading-none max-w-full select-none align-baseline"])},{default:n(()=>[l("figure",Mt,[l("div",{class:A(["relative inline-block clear-both max-w-full outline-solid outline-1",{"outline-primary-500":$.selected}])},[l("img",{src:d.value,title:$.node.attrs.title,alt:$.node.attrs.alt,width:c.value,height:r.value,"data-display":$.node.attrs.display,class:"cursor-pointer m-0",onClick:C},null,8,Tt),$.editor.isEditable?F((m(),b("div",Et,[(m(),b(D,null,ze(i,S=>l("span",{key:S,class:A(["bg-primary-500 border border-white rounded box-border block h-sm w-sm absolute z-10",{tl:"left-[-6px] top-[-6px] cursor-nwse-resize",tr:"right-[-6px] top-[-6px] cursor-nesw-resize",bl:"left-[-6px] bottom-[-6px] cursor-nesw-resize",br:"right-[-6px] bottom-[-6px] cursor-nwse-resize"}[S]]),onMousedown:j=>E(j,S)},null,42,It)),64))],512)),[[Le,$.selected||p.value]]):q("",!0),o(Vt,{editor:$.editor,node:$.node,selected:$.selected,updateAttributes:$.updateAttributes,deleteNode:$.deleteNode},null,8,["editor","node","selected","updateAttributes","deleteNode"])],2)])]),_:1},8,["class"]))}},St=Ye.extend({inline(){return!0},group(){return"inline"},addAttributes(){var a;return{...(a=this.parent)==null?void 0:a.call(this),width:{default:_t,parseHTML:e=>{const i=e.style.width||e.getAttribute("width")||null;return i==null?null:parseInt(i,10)},renderHTML:e=>({width:e.width})},height:{default:null,parseHTML:e=>{const i=e.style.height||e.getAttribute("height")||null;return i==null?null:parseInt(i,10)},renderHTML:e=>({height:e.height})},display:{default:ht,parseHTML:e=>{const{cssFloat:i,display:d}=e.style;let c=e.getAttribute("data-display")||e.getAttribute("display");return c?c=/(inline|center|left|right)/.test(c)?c:z.INLINE:i==="left"&&!d?c=z.FLOAT_LEFT:i==="right"&&!d?c=z.FLOAT_RIGHT:!i&&d==="center"?c=z.CENTER:c=z.INLINE,c},renderHTML:e=>({"data-display":e.display})}}},addOptions(){var a;return{...(a=this.parent)==null?void 0:a.call(this),inline:!0,urlPattern:vt}},addNodeView(){return Ke(Bt)},parseHTML(){return[{tag:"img[src]"}]}}),Nt={},Ot={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function Pt(a,e){return m(),b("svg",Ot,e[0]||(e[0]=[l("path",{d:"M17.061,11.22C17.641,10.462,18,9.526,18,8.5C18,6.019,15.981,4,13.5,4H6v15h8c2.481,0,4.5-2.019,4.5-4.5 C18.5,13.203,17.94,12.042,17.061,11.22z M13.5,7C14.327,7,15,7.673,15,8.5S14.327,10,13.5,10H9V7H13.5z M14,16H9v-3h5 c0.827,0,1.5,0.673,1.5,1.5S14.827,16,14,16z"},null,-1)]))}const Ft=L(Nt,[["render",Pt]]),Ut={},Dt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function qt(a,e){return m(),b("svg",Dt,e[0]||(e[0]=[l("path",{d:"M19 7L19 4 9 4 9 7 11.868 7 9.012 17 5 17 5 20 15 20 15 17 12.132 17 14.988 7z"},null,-1)]))}const Zt=L(Ut,[["render",qt]]),Rt={},jt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function Gt(a,e){return m(),b("svg",jt,e[0]||(e[0]=[l("path",{d:"M5 18H19V20H5zM6 4v6c0 3.309 2.691 6 6 6s6-2.691 6-6V4h-2v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V4H6z"},null,-1)]))}const Jt=L(Rt,[["render",Gt]]),Wt={},Xt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function Yt(a,e){return m(),b("svg",Xt,e[0]||(e[0]=[l("path",{d:"M20 11h-8c-4 0-4-1.816-4-2.5C8 7.882 8 6 12 6c2.8 0 2.99 1.678 3 2.014L16 8h1c0-1.384-1.045-4-5-4C6.584 4 6 7.147 6 8.5c0 .728.148 1.667.736 2.5H4v2h8 5.227H20V11zM12 18c-3.793 0-3.99-1.815-4-2H6c0 .04.069 4 6 4 5.221 0 6-2.819 6-4.5 0-.146-.009-.317-.028-.5h-2.006C15.998 15.2 16 15.376 16 15.5 16 16.184 16 18 12 18z"},null,-1)]))}const Kt=L(Wt,[["render",Yt]]),Qt={},es={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function ts(a,e){return m(),b("svg",es,e[0]||(e[0]=[l("path",{d:"M4 6h2v2H4zm0 5h2v2H4zm0 5h2v2H4zm16-8V6H8.023v2H18.8zM8 11h12v2H8zm0 5h12v2H8z"},null,-1)]))}const ss=L(Qt,[["render",ts]]),os={},ns={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function ls(a,e){return m(),b("svg",ns,e[0]||(e[0]=[l("path",{d:"M5.282 12.064c-.428.328-.72.609-.875.851-.155.24-.249.498-.279.768h2.679v-.748H5.413c.081-.081.152-.151.212-.201.062-.05.182-.142.361-.27.303-.218.511-.42.626-.604.116-.186.173-.375.173-.578 0-.189-.05-.363-.151-.512-.1-.153-.237-.268-.412-.341-.174-.076-.419-.111-.733-.111-.3 0-.537.038-.706.114-.172.078-.302.19-.396.338-.094.143-.159.346-.194.604l.894.076c.025-.188.074-.317.147-.394.072-.073.166-.108.279-.108.11 0 .2.035.272.108.073.071.108.156.108.258 0 .091-.037.19-.108.297C5.711 11.713 5.544 11.865 5.282 12.064zM5.337 18.45c-.114 0-.208-.036-.282-.105-.074-.07-.128-.195-.162-.378L4 18.085c.059.204.142.372.251.506.109.133.248.235.417.306C4.836 18.966 5.067 19 5.36 19c.3 0 .541-.047.725-.14.185-.096.325-.228.424-.403.098-.175.146-.354.146-.544 0-.152-.029-.282-.088-.393-.06-.107-.142-.195-.249-.261-.066-.042-.161-.078-.286-.11.155-.085.268-.183.345-.299.076-.115.113-.24.113-.383 0-.239-.093-.437-.281-.596-.187-.159-.49-.238-.909-.238-.365 0-.648.072-.847.219-.2.143-.334.353-.404.626l.844.151c.023-.162.067-.274.133-.338s.151-.098.257-.098c.103 0 .183.032.241.089.059.06.087.139.087.238 0 .104-.038.193-.117.27s-.177.112-.293.112c-.028 0-.066-.004-.116-.011L5.04 17.54c.123-.036.22-.056.289-.056.132 0 .237.041.313.126.077.082.115.199.115.352 0 .146-.04.266-.119.354C5.558 18.403 5.458 18.45 5.337 18.45zM6.285 8.367V5H5.546C5.451 5.208 5.319 5.383 5.152 5.523 4.984 5.665 4.748 5.785 4.444 5.888v.754C4.65 6.577 4.821 6.509 4.958 6.438c.137-.069.277-.162.423-.276v2.206H6.285zM9 6H20V8H9zM9 11H20V13H9zM9 16H20V18H9z"},null,-1)]))}const rs=L(os,[["render",ls]]),is={},as={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function us(a,e){return m(),b("svg",as,e[0]||(e[0]=[l("path",{d:"M3.691 6.292C5.094 4.771 7.217 4 10 4h1v2.819L10.196 6.98c-1.37.274-2.323.813-2.833 1.604C7.05 9.071 6.947 9.591 6.925 10H9h1c.553 0 1 .447 1 1v7c0 1.103-.897 2-2 2H3c-.553 0-1-.447-1-1v-5l.003-2.919C1.994 10.97 1.804 8.34 3.691 6.292zM20 20h-6c-.553 0-1-.447-1-1v-5l.003-2.919c-.009-.111-.199-2.741 1.688-4.789C16.094 4.771 18.217 4 21 4h1v2.819L21.196 6.98c-1.37.274-2.323.813-2.833 1.604C18.05 9.071 17.947 9.591 17.925 10H20h1c.553 0 1 .447 1 1v7C22 19.103 21.103 20 20 20z"},null,-1)]))}const ds=L(is,[["render",us]]),cs={},ms={viewBox:"0 0 20 20",class:"w-6 h-6 fill-current"};function ps(a,e){return m(),b("svg",ms,e[0]||(e[0]=[l("path",{d:"M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"},null,-1),l("path",{d:"M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"},null,-1),l("path",{d:"M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"},null,-1)]))}const fs=L(cs,[["render",ps]]),gs={},vs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function _s(a,e){return m(),b("svg",vs,e[0]||(e[0]=[l("path",{d:"M4 7h16v2H4zm0-4h16v2H4zm0 8h16v2H4zm0 4h16v2H4zm2 4h12v2H6z"},null,-1)]))}const hs=L(gs,[["render",_s]]),bs={},ws={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function $s(a,e){return m(),b("svg",ws,e[0]||(e[0]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"},null,-1)]))}const Ce=L(bs,[["render",$s]]),ks={},Cs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function xs(a,e){return m(),b("svg",Cs,e[0]||(e[0]=[l("path",{d:"M16.949 14.121 19.071 12a5.008 5.008 0 0 0 0-7.071 5.006 5.006 0 0 0-7.071 0l-.707.707 1.414 1.414.707-.707a3.007 3.007 0 0 1 4.243 0 3.005 3.005 0 0 1 0 4.243l-2.122 2.121a2.723 2.723 0 0 1-.844.57L13.414 12l1.414-1.414-.707-.707a4.965 4.965 0 0 0-3.535-1.465c-.235 0-.464.032-.691.066L3.707 2.293 2.293 3.707l18 18 1.414-1.414-5.536-5.536c.277-.184.538-.396.778-.636zm-6.363 3.536a3.007 3.007 0 0 1-4.243 0 3.005 3.005 0 0 1 0-4.243l1.476-1.475-1.414-1.414L4.929 12a5.008 5.008 0 0 0 0 7.071 4.983 4.983 0 0 0 3.535 1.462A4.982 4.982 0 0 0 12 19.071l.707-.707-1.414-1.414-.707.707z"},null,-1)]))}const ys=L(ks,[["render",xs]]),As={class:"w-full flex"},Hs={for:"target"},zs={value:"_self"},Ls={value:"_blank"},Vs={__name:"InsertLink",props:{editor:{required:!0}},emits:["insert"],setup(a,{emit:e}){const i=a,d=T(!1),c=T(""),r=T("_self"),k=()=>{d.value=!0;const{href:p,target:u}=i.editor.getAttributes("link");p&&(c.value=p),u&&(r.value=u)},g=()=>{d.value=!1,c.value="",r.value="_self"},v=()=>{i.editor.commands.setLink({href:c.value,target:r.value}),g()},s=()=>{i.editor.chain().focus().unsetLink().run(),g()};return(p,u)=>(m(),b(D,null,[l("button",{onClick:k,class:A([{"is-active":a.editor.isActive("link")},"flex"]),type:"button"},[o(Ce)],2),o(te,{show:d.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:g},{header:n(()=>[h(f(p.$t("general.insert"))+"/"+f(p.$t("editor.edit_link")),1)]),body:n(()=>[o(I,null,{title:n(()=>u[2]||(u[2]=[l("label",{for:"href"},"URL",-1)])),default:n(()=>[l("div",As,[o(J,{type:"text",modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=C=>c.value=C),id:"href",class:"mr-xs"},null,8,["modelValue"]),o(Z,{onClick:s,size:"md",disabled:!a.editor.isActive("link")},{icon:n(()=>[o(ys)]),_:1},8,["disabled"])])]),_:1}),o(I,{class:"mt-lg"},{title:n(()=>[l("label",Hs,f(p.$t("editor.open_link_in")),1)]),default:n(()=>[o(ee,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=C=>r.value=C),id:"target"},{default:n(()=>[l("option",zs,f(p.$t("editor.current_window")),1),l("option",Ls,f(p.$t("editor.new_window")),1)]),_:1},8,["modelValue"])]),_:1})]),footer:n(()=>[o(Z,{onClick:g,class:"mr-xs"},{default:n(()=>[h(f(p.$t("general.cancel")),1)]),_:1}),o(X,{onClick:v},{default:n(()=>[h(f(p.$t("general.insert")),1)]),_:1})]),_:1},8,["show"])],64))}},Ms={},Ts={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current"};function Es(a,e){return m(),b("svg",Ts,e[0]||(e[0]=[l("path",{d:"M4 11h16v2H4z","fill-rule":"evenodd"},null,-1)]))}const Is=L(Ms,[["render",Es]]),Bs=(a,e,i)=>{const d=a.replace().split(/(?:\r\n?|\n)/),c=[];d.forEach(k=>{const g={type:"paragraph"};k.length>0&&(g.content=[{type:"text",text:k}]);const v=it.fromJSON(e.doc.type.schema,g);c.push(v)});const r=at.fromArray(c);return ut.maxOpen(r)},Ss={key:0,class:"editorClassicMenu text-stone-800 flex flex-wrap gap-xs border-b border-gray-200 pb-md mb-md"},Ns={type:"button",class:"w-28 text-left h-full"},Os=["disabled"],Ps=["disabled"],Fs=["disabled"],Us=["disabled"],Ds={type:"button"},qs={__name:"EditorClassic",props:{value:{required:!0},editable:{type:Boolean,default:!0},placeholder:{type:String,default:""}},emits:["update"],setup(a,{emit:e}){Ve();const i=a,d=e;T();const c=T(!1),r=Qe({editable:i.editable,content:i.value,extensions:[et,tt,st.configure({types:["heading","paragraph"]}),St,ot.configure({openOnClick:!1})],editorProps:{attributes:{class:"focus:outline-none min-h-[150px]"},clipboardTextParser:Bs},onUpdate:()=>{d("update",r.value.getHTML())},onFocus:()=>{c.value=!0},onBlur:()=>{c.value=!1}});Me(()=>{r.value.destroy()}),me(()=>i.value,v=>{v!==r.value.getHTML()&&r.value.commands.setContent(v)});const k=P(()=>r.value.isActive("heading",{level:1})?"Heading 1":r.value.isActive("heading",{level:2})?"Heading 2":r.value.isActive("heading",{level:3})?"Heading 3":r.value.isActive("heading",{level:4})?"Heading 4":r.value.isActive("heading",{level:5})?"Heading 5":r.value.isActive("heading",{level:6})?"Heading 6":"Paragraph"),g=v=>{r.value.chain().focus().setImage({src:v}).run()};return(v,s)=>{const p=re("tooltip");return m(),b("div",{class:A([{"border-primary-200 ring ring-primary-200 ring-opacity-50":c.value},"editorClassic border border-gray-200 rounded-lg p-md pb-xs text-base transition-colors ease-in-out duration-200"])},[t(r)?(m(),b("div",Ss,[o(ge,{"width-classes":"w-40",placement:"bottom-start"},{trigger:n(()=>[l("button",Ns,f(k.value),1)]),content:n(()=>[o(O,{onClick:s[0]||(s[0]=u=>t(r).chain().focus().setParagraph().run()),isActive:t(r).isActive("paragraph"),size:"xs",as:"button"},{default:n(()=>s[21]||(s[21]=[h(" Paragraph ")])),_:1},8,["isActive"]),o(O,{onClick:s[1]||(s[1]=u=>t(r).chain().focus().toggleHeading({level:1}).run()),isActive:t(r).isActive("heading",{level:1}),size:"xs",as:"button"},{default:n(()=>s[22]||(s[22]=[l("span",{class:"text-2xl"},"Heading 1",-1)])),_:1},8,["isActive"]),o(O,{onClick:s[2]||(s[2]=u=>t(r).chain().focus().toggleHeading({level:2}).run()),isActive:t(r).isActive("heading",{level:2}),size:"xs",as:"button"},{default:n(()=>s[23]||(s[23]=[l("span",{class:"text-xl"},"Heading 2",-1)])),_:1},8,["isActive"]),o(O,{onClick:s[3]||(s[3]=u=>t(r).chain().focus().toggleHeading({level:3}).run()),isActive:t(r).isActive("heading",{level:3}),size:"xs",as:"button"},{default:n(()=>s[24]||(s[24]=[l("span",{class:"text-lg"},"Heading 3",-1)])),_:1},8,["isActive"]),o(O,{onClick:s[4]||(s[4]=u=>t(r).chain().focus().toggleHeading({level:4}).run()),isActive:t(r).isActive("heading",{level:4}),size:"xs",as:"button"},{default:n(()=>s[25]||(s[25]=[l("span",{class:"text-md"},"Heading 4",-1)])),_:1},8,["isActive"]),o(O,{onClick:s[5]||(s[5]=u=>t(r).chain().focus().toggleHeading({level:5}).run()),isActive:t(r).isActive("heading",{level:5}),size:"xs",as:"button"},{default:n(()=>s[26]||(s[26]=[l("span",{class:"text-base"},"Heading 5",-1)])),_:1},8,["isActive"]),o(O,{onClick:s[6]||(s[6]=u=>t(r).chain().focus().toggleHeading({level:6}).run()),isActive:t(r).isActive("heading",{level:6}),size:"xs",as:"button"},{default:n(()=>s[27]||(s[27]=[l("span",{class:"text-sm"},"Heading 6",-1)])),_:1},8,["isActive"])]),_:1}),l("button",{onClick:s[7]||(s[7]=u=>t(r).chain().focus().toggleBold().run()),disabled:!t(r).can().chain().focus().toggleBold().run(),class:A({"is-active":t(r).isActive("bold")}),type:"button"},[o(Ft)],10,Os),l("button",{onClick:s[8]||(s[8]=u=>t(r).chain().focus().toggleItalic().run()),disabled:!t(r).can().chain().focus().toggleItalic().run(),class:A({"is-active":t(r).isActive("italic")}),type:"button"},[o(Zt)],10,Ps),l("button",{onClick:s[9]||(s[9]=u=>t(r).chain().focus().toggleUnderline().run()),disabled:!t(r).can().chain().focus().toggleItalic().run(),class:A({"is-active":t(r).isActive("underline")}),type:"button"},[o(Jt)],10,Fs),l("button",{onClick:s[10]||(s[10]=u=>t(r).chain().focus().toggleStrike().run()),disabled:!t(r).can().chain().focus().toggleStrike().run(),class:A([{"is-active":t(r).isActive("strike")},"mr-sm"]),type:"button"},[o(Kt)],10,Us),l("button",{onClick:s[11]||(s[11]=u=>t(r).chain().focus().setTextAlign("left").run()),class:A({"is-active":t(r).isActive({textAlign:"left"})}),type:"button"},[o(ke)],2),l("button",{onClick:s[12]||(s[12]=u=>t(r).chain().focus().setTextAlign("center").run()),class:A({"is-active":t(r).isActive({textAlign:"center"})}),type:"button"},[o($e)],2),l("button",{onClick:s[13]||(s[13]=u=>t(r).chain().focus().setTextAlign("right").run()),class:A({"is-active":t(r).isActive({textAlign:"right"})}),type:"button"},[o(we)],2),l("button",{onClick:s[14]||(s[14]=u=>t(r).chain().focus().setTextAlign("justify").run()),class:A([{"is-active":t(r).isActive({textAlign:"justify"})},"mr-sm"]),type:"button"},[o(hs)],2),l("button",{onClick:s[15]||(s[15]=u=>t(r).chain().focus().toggleBulletList().run()),class:A({"is-active":t(r).isActive("bulletList")}),type:"button"},[o(ss)],2),l("button",{onClick:s[16]||(s[16]=u=>t(r).chain().focus().toggleOrderedList().run()),class:A([{"is-active":t(r).isActive("orderedList")},"mr-sm"]),type:"button"},[o(rs)],2),l("button",{onClick:s[17]||(s[17]=u=>t(r).chain().focus().toggleBlockquote().run()),class:A({"is-active":t(r).isActive("blockquote")}),type:"button"},[o(ds)],2),F((m(),b("button",{onClick:s[18]||(s[18]=u=>t(r).chain().focus().setHardBreak().run()),type:"button"},[o(fs)])),[[p,v.$t("editor.hard_break")]]),F((m(),b("button",{onClick:s[19]||(s[19]=u=>t(r).chain().focus().setHorizontalRule().run()),class:"mr-sm",type:"button"},[o(Is)])),[[p,v.$t("editor.horizontal_line")]]),o(rt,{onUpload:s[20]||(s[20]=u=>{if(u.is_local_driver){g(`/storage/${u.path}`);return}g(u.url)}),class:"flex"},{default:n(()=>[F((m(),b("button",Ds,[o(Fe)])),[[p,v.$t("post.add_image")]])]),_:1}),o(Vs,{editor:t(r)},null,8,["editor"])])):q("",!0),o(t(nt),{editor:t(r),class:"editor-classic-format max-h-96 overflow-y-auto p-xs"},null,8,["editor"])],2)}}},Zs={__name:"Editor",props:{content:{required:!0,type:Object}},setup(a){return(e,i)=>(m(),M(qs,{value:a.content.body,onUpdate:i[0]||(i[0]=d=>a.content.body=d)},null,8,["value"]))}},Rs={__name:"Html",props:{content:{required:!0,type:Object}},setup(a){return(e,i)=>(m(),M(I,null,{title:n(()=>i[1]||(i[1]=[l("label",{for:"m_html"},"HTML",-1)])),default:n(()=>[o(_e,{id:"m_html",modelValue:a.content.body,"onUpdate:modelValue":i[0]||(i[0]=d=>a.content.body=d),class:"min-h-[350px]"},null,8,["modelValue"])]),_:1}))}},xe=()=>({modules:{Editor:{content:{body:""},component:Zs},Html:{content:{body:""},component:Rs}}}),js={class:"flex items-center mb-lg gap-lg"},Gs={class:"w-full md:w-1/2"},Js={for:"m_name"},Ws={class:"w-full md:w-1/2"},Xs={for:"m_status"},Ys={value:1},Ks={value:0},ye={__name:"FormBlock",props:{form:{required:!0},moduleComponent:{required:!0}},setup(a){return(e,i)=>(m(),b(D,null,[l("div",js,[l("div",Gs,[o(I,null,{title:n(()=>[l("label",Js,[h(f(e.$t("general.name"))+" ",1),o(ne,{danger:!0},{default:n(()=>i[2]||(i[2]=[h("*")])),_:1})])]),footer:n(()=>[o(U,{message:a.form.errors.name},null,8,["message"])]),default:n(()=>[o(J,{modelValue:a.form.name,"onUpdate:modelValue":i[0]||(i[0]=d=>a.form.name=d),type:"text",id:"m_name",class:"w-full",autofocus:!0,error:a.form.errors.name!==void 0,required:""},null,8,["modelValue","error"])]),_:1})]),l("div",Ws,[o(I,null,{title:n(()=>[l("label",Xs,f(e.$t("general.status")),1)]),footer:n(()=>[o(U,{message:a.form.errors.status},null,8,["message"])]),default:n(()=>[o(ee,{modelValue:a.form.status,"onUpdate:modelValue":i[1]||(i[1]=d=>a.form.status=d),error:a.form.errors.status!==void 0,id:"m_status"},{default:n(()=>[l("option",Ys,f(e.$t("general.enabled")),1),l("option",Ks,f(e.$t("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1})])]),(m(),M(Te(a.moduleComponent),{content:a.form.content},null,8,["content"]))],64))}},Qs={class:"font-semibold capitalize"},eo={class:"mt-xs"},to={__name:"EditBlock",props:{block:{required:!0,type:Object}},emits:["update","delete"],setup(a,{emit:e}){const{t:i}=ae(),d=R("routePrefix"),c=R("confirmation"),r=a,k=e,{notify:g}=ue(),{modules:v}=xe(),s=T(!1),p=pe(null),u=ie(W.cloneDeep(r.block)),C=()=>{const _=v[r.block.module];if(_===void 0){g("error",i("page.module_not_found"));return}p.value=_.component,s.value=!0},H=()=>{s.value=!1,u.reset()},E=()=>{if(!u.isDirty){H();return}c().title(i("page.are_you_sure")).description(i("page.unsaved_will_lost")).btnConfirmName(i("general.discard")).onConfirm(_=>{_.close(),H()}).show()},V=()=>{u.put(route(`${d}.blocks.update`,{block:r.block.id}),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:_=>{const x=_.props.blocks.data.find($=>$.id===r.block.id);x&&k("update",x),g("success",i("page.block_updated"))}})},w=()=>{c().title(i("page.delete_block")).description(i("page.confirm_delete_block")).destructive().onConfirm(_=>{_.isLoading(!0),fe.delete(route(`${d}.blocks.delete`,{block:r.block.id}),{only:["blocks"],onSuccess(){g("success",i("page.block_deleted")),k("delete"),_.reset(),H()},onFinish(){_.isLoading(!1)}})}).show()};return(_,x)=>(m(),b(D,null,[o(Q,{onClick:C,class:"group-visible"},{icon:n(()=>[o(Ue)]),_:1}),o(te,{show:s.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:E},{header:n(()=>[l("span",null,[h(f(t(i)("page.edit_block"))+"[",1),l("span",Qs,f(t(u).module),1),x[0]||(x[0]=h("]"))])]),body:n(()=>[l("div",eo,[s.value?(m(),M(ye,{key:0,form:t(u),moduleComponent:p.value},null,8,["form","moduleComponent"])):q("",!0)])]),footer:n(()=>[o(Z,{onClick:E,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:n(()=>[h(f(t(i)("general.cancel")),1)]),_:1}),o(ve,{onClick:w,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:n(()=>[h(f(t(i)("general.delete")),1)]),_:1}),o(X,{onClick:V,disabled:t(u).processing,isLoading:t(u).processing},{default:n(()=>[h(f(t(i)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},so={class:"flex items-center justify-between"},oo={class:"w-full"},no={class:"flex"},lo={class:"flex"},ro={class:"font-medium"},io={class:"font-medium text-gray-400"},ao={class:"flex justify-end"},uo={class:"flex mr-xs rtl:mr-0 rtl:ml-xs"},co={__name:"PageAttachedBlocks",props:{modelValue:{required:!0,type:Array}},emits:["update:modelValue"],setup(a,{emit:e}){const i=a,d=e,c=(g,v,s)=>{const p=i.modelValue.map(u=>u.id===v?Object.assign(u,Object.assign(s,{random_key:u.random_key===g?g:he()})):u);d("update:modelValue",p)},r=g=>{const v=W.cloneDeep(i.modelValue).filter(s=>s.id!==g);d("update:modelValue",v)},k=g=>{d("update:modelValue",i.modelValue.filter((v,s)=>s!==g))};return(g,v)=>{const s=re("tooltip");return a.modelValue.length?(m(),M(Je,{key:0},{default:n(()=>[o(t(je),Ee({list:a.modelValue},{animation:200,group:"blocks"},{handle:".handle","item-key":"random_key"}),{item:n(({element:p,index:u})=>[o(Ge,{class:"group"},{default:n(()=>[l("div",so,[l("div",oo,[l("div",no,[o(Q,{class:"handle mr-xs cursor-move"},{icon:n(()=>[o(pt)]),_:1}),l("div",null,[l("div",lo,[l("div",ro,f(p.name),1)]),l("div",io,f(p.module),1)])])]),l("div",ao,[p.status?q("",!0):(m(),M(De,{key:0,variant:"error",class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:n(()=>[h(f(g.$t("general.disabled")),1)]),_:1})),l("div",uo,[o(to,{block:p,onDelete:C=>r(p.id),onUpdate:C=>c(p.random_key,p.id,C)},null,8,["block","onDelete","onUpdate"])]),F((m(),M(Q,{onClick:C=>k(u),destructive:!0,class:"group-visible"},{icon:n(()=>[o(de)]),_:2},1032,["onClick"])),[[s,g.$t("page.remove_from_page")]])])])]),_:2},1024)]),_:1},16,["list"])]),_:1})):(m(),M(be,{key:1},{default:n(()=>[h(f(g.$t("page.page_no_blocks_added")),1)]),_:1}))}}},mo={class:"relative"},po={__name:"AddExistingBlock",props:{modelValue:{required:!0,type:Array},blocks:{required:!0,type:Object,default:[]}},emits:["update:modelValue"],setup(a,{emit:e}){const i=T(!1),d=T(null),c=a,r=e,k=P(()=>c.blocks.data.map(u=>({key:u.id,label:u.name}))),g=()=>{const u=c.blocks.data.find(C=>C.id===d.value.key);return u?W.cloneDeep(u):null},v=()=>{const u=g();u&&(r("update:modelValue",[...c.modelValue,Object.assign(u,{random_key:he()})]),p())},s=()=>{i.value=!0},p=()=>{i.value=!1,d.value=null};return(u,C)=>{const H=Ie("v-select");return m(),b(D,null,[o(Z,{onClick:s,size:"sm",class:"mr-xs"},{icon:n(()=>[o(Ce)]),default:n(()=>[h(" "+f(u.$t("page.add_existing_block")),1)]),_:1}),o(te,{show:i.value,"max-width":"sm","scrollable-body":!0,closeable:!0,onClose:p},{header:n(()=>[h(f(u.$t("page.add_existing_block")),1)]),body:n(()=>[l("div",mo,[k.value.length?(m(),b(D,{key:0},[i.value?(m(),M(H,{key:0,modelValue:d.value,"onUpdate:modelValue":C[0]||(C[0]=E=>d.value=E),options:k.value,filterable:!1,clearable:!1,"close-on-select":!0,placeholder:u.$t("page.search_blocks"),"append-to-body":""},{"no-options":n(({search:E,searching:V,loading:w})=>[h(f(u.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])):q("",!0)],64)):(m(),M(be,{key:1},{default:n(()=>[h(f(u.$t("page.no_blocks_created")),1)]),_:1}))])]),footer:n(()=>[o(Z,{onClick:p,class:"mr-xs"},{default:n(()=>[h(f(u.$t("general.cancel")),1)]),_:1}),k.value.length?(m(),M(X,{key:0,onClick:v,disabled:!d.value},{default:n(()=>[h(f(u.$t("page.add_to_page")),1)]),_:1},8,["disabled"])):q("",!0)]),_:1},8,["show"])],64)}}},fo={class:"font-semibold capitalize"},go={class:"mt-xs"},vo={__name:"CreateBlock",emits:["add"],setup(a,{emit:e}){const{t:i}=ae(),d=R("routePrefix"),c=R("confirmation"),r=e,{notify:k}=ue(),{modules:g}=xe(),v=T(!1),s=pe(null),p=ie({name:"",module:null,content:{},status:1}),u=V=>{const w=g[V];if(w===void 0){k("error",i("page.module_not_found"));return}s.value=w.component,p.content=W.cloneDeep(w.content),p.module=V,v.value=!0},C=()=>{v.value=!1,p.reset()},H=()=>{if(!p.isDirty){C();return}c().title(i("page.are_you_sure")).description(i("page.unsaved_will_lost")).btnConfirmName(i("general.discard")).onConfirm(V=>{V.close(),C()}).show()},E=()=>{p.post(route(`${d}.blocks.store`),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:V=>{r("add",V.props.blocks.data[0]),C(),k("success",i("page.block_created")+`
`+i("page.save_page"))}})};return(V,w)=>(m(),b(D,null,[o(ge,{placement:"bottom"},{trigger:n(()=>[o(Z,{size:"sm",class:"mr-xs"},{icon:n(()=>[o(qe)]),default:n(()=>[h(" "+f(t(i)("page.create_block")),1)]),_:1})]),content:n(()=>[o(O,{as:"button",onClick:w[0]||(w[0]=_=>u("Editor"))},{default:n(()=>w[2]||(w[2]=[h(" Editor ")])),_:1}),o(O,{as:"button",onClick:w[1]||(w[1]=_=>u("Html"))},{default:n(()=>w[3]||(w[3]=[h(" Html ")])),_:1})]),_:1}),o(te,{show:v.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:H},{header:n(()=>[l("span",null,[h(f(t(i)("page.create_block"))+" [",1),l("span",fo,f(t(p).module),1),w[4]||(w[4]=h("]"))])]),body:n(()=>[l("div",go,[v.value?(m(),M(ye,{key:0,form:t(p),moduleComponent:s.value},null,8,["form","moduleComponent"])):q("",!0)])]),footer:n(()=>[o(Z,{onClick:H,class:"mr-xs"},{default:n(()=>[h(f(t(i)("general.cancel")),1)]),_:1}),o(X,{onClick:E,disabled:t(p).processing,isLoading:t(p).processing},{default:n(()=>[h(f(t(i)("page.create_add_to_page")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},_o={class:"flex items-center mt-lg"},ho={__name:"PageBlocks",props:{page:{required:!0,type:Object}},setup(a){const e=a,i=d=>{e.page.blocks.push(d)};return(d,c)=>(m(),b("div",null,[o(co,{modelValue:a.page.blocks,"onUpdate:modelValue":c[0]||(c[0]=r=>a.page.blocks=r)},null,8,["modelValue"]),l("div",_o,[o(po,{modelValue:a.page.blocks,"onUpdate:modelValue":c[1]||(c[1]=r=>a.page.blocks=r),blocks:d.$page.props.blocks},null,8,["modelValue","blocks"]),o(vo,{onAdd:i})])]))}},bo={class:"row-py w-full mx-auto"},wo={key:0,class:"flex"},$o=["href"],ko={class:"row-px"},Co={class:"flex gap-lg"},xo={class:"w-2/3"},yo={for:"name"},Ao={for:"meta_title"},Ho={for:"meta_description"},zo={class:"w-1/3"},Lo={for:"slug"},Vo=["innerHTML"],Mo={for:"layout"},To={value:"default"},Eo={value:"medium"},Io={value:"small"},Bo={for:"status"},So={value:1},No={value:0},Oo={class:"flex items-center mt-lg"},Po=Se({layout:Oe}),Kn=Object.assign(Po,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},page:{type:[Object,null]}},setup(a){const{t:e}=ae(),i=a,{notify:d}=ue(),c=R("routePrefix"),r=R("confirmation"),k=P(()=>g.value?e("page.create_page"):e("page.edit_page")),{isCreate:g,isEdit:v}=Pe(),s=ie(v.value?W.cloneDeep(i.page):{name:"",meta_title:"",meta_description:"",slug:"",layout:"default",status:1,blocks:[]}),p=()=>{me(()=>i.page.blocks,w=>{s.blocks=w})};v.value&&p();const u=()=>{s.slug=i.page.slug},C=w=>{w.post(route(`${c}.pages.store`),{onSuccess:()=>{u(),d("success",e("page.page_created"))}})},H=w=>{w.put(route(`${c}.pages.update`,{page:i.page.uuid}),{preserveScroll:!0,onSuccess:()=>{u(),d("success",e("page.page_updated"))}})},E=()=>{r().title(e("page.delete_page")).description(e("page.confirm_delete_page")).destructive().onConfirm(w=>{w.isLoading(!0),fe.delete(route(`${c}.pages.delete`,{page:i.page.uuid}),{preserveScroll:!0,onSuccess(){d("success",e("page.page_deleted"))},onFinish(){w.reset()}})}).show()},V=()=>{const w=s.transform(_=>({..._,blocks:_.blocks.map(x=>x.id)}));g.value&&C(w),v.value&&H(w)};return(w,_)=>(m(),b(D,null,[o(t(Ne),{title:k.value},null,8,["title"]),l("div",bo,[o(Ze,{title:k.value},{description:n(()=>[h(f(t(e)("page.page_desc")),1)]),default:n(()=>[t(v)?(m(),b("div",wo,[l("a",{href:w.route(`${t(c)}.pages.show`,{slug:a.page.url_path}),target:"_blank",class:"mr-xs rtl:mr-0 rtl:ml-xs"},[o(Z,{size:"sm"},{icon:n(()=>[o(Re)]),default:n(()=>[h(" "+f(t(e)("general.open")),1)]),_:1})],8,$o),o(ve,{onClick:E,size:"sm"},{icon:n(()=>[o(de)]),_:1})])):q("",!0)]),_:1},8,["title"]),l("div",ko,[l("form",{method:"post",onSubmit:Be(V,["prevent"])},[l("div",Co,[l("div",xo,[o(se,null,{title:n(()=>[h(f(t(e)("general.details")),1)]),default:n(()=>[o(I,null,{title:n(()=>[l("label",yo,[h(f(t(e)("general.name"))+" ",1),o(ne,{danger:!0},{default:n(()=>_[6]||(_[6]=[h("*")])),_:1})])]),footer:n(()=>[o(U,{message:t(s).errors.name},null,8,["message"])]),default:n(()=>[o(J,{modelValue:t(s).name,"onUpdate:modelValue":_[0]||(_[0]=x=>t(s).name=x),error:t(s).errors.name!==void 0,type:"text",id:"name",class:"w-full",autofocus:t(g),required:""},null,8,["modelValue","error","autofocus"])]),_:1}),o(I,{class:"mt-lg"},{title:n(()=>[l("label",Ao,f(t(e)("page.meta_title")),1)]),footer:n(()=>[o(U,{message:t(s).errors.meta_title},null,8,["message"])]),default:n(()=>[o(J,{modelValue:t(s).meta_title,"onUpdate:modelValue":_[1]||(_[1]=x=>t(s).meta_title=x),error:t(s).errors.meta_title!==void 0,type:"text",id:"meta_title",class:"w-full"},null,8,["modelValue","error"])]),_:1}),o(I,{class:"mt-lg"},{title:n(()=>[l("label",Ho,f(t(e)("page.meta_description")),1)]),footer:n(()=>[o(U,{message:t(s).errors.meta_description},null,8,["message"])]),default:n(()=>[o(_e,{modelValue:t(s).meta_description,"onUpdate:modelValue":_[2]||(_[2]=x=>t(s).meta_description=x),error:t(s).errors.meta_description!==void 0,id:"meta_description",class:"w-full"},null,8,["modelValue","error"])]),_:1})]),_:1}),o(se,{class:"mt-lg"},{title:n(()=>[h(f(t(e)("general.blocks")),1)]),default:n(()=>[o(ho,{page:t(s)},null,8,["page"])]),_:1})]),l("div",zo,[o(se,null,{default:n(()=>[o(I,null,{title:n(()=>[l("label",Lo,[h(f(t(e)("page.url_path"))+" ",1),o(ne,{danger:!0},{default:n(()=>_[7]||(_[7]=[h("*")])),_:1}),l("span",{innerHTML:t(e)("page.type_home"),class:"text-sm text-gray-400 inline-block ml-xs font-normal"},null,8,Vo)])]),footer:n(()=>[o(U,{message:t(s).errors.slug},null,8,["message"])]),default:n(()=>[o(J,{modelValue:t(s).slug,"onUpdate:modelValue":_[3]||(_[3]=x=>t(s).slug=x),error:t(s).errors.slug!==void 0,type:"text",id:"slug",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),o(I,{class:"mt-lg"},{title:n(()=>[l("label",Mo,f(t(e)("page.container_width")),1)]),footer:n(()=>[o(U,{message:t(s).errors.layout},null,8,["message"])]),default:n(()=>[o(ee,{modelValue:t(s).layout,"onUpdate:modelValue":_[4]||(_[4]=x=>t(s).layout=x),error:t(s).errors.layout!==void 0,id:"layout"},{default:n(()=>[l("option",To,f(t(e)("general.default")),1),l("option",Eo,f(t(e)("page.medium")),1),l("option",Io,f(t(e)("page.small")),1)]),_:1},8,["modelValue","error"])]),_:1}),o(I,{class:"mt-lg"},{title:n(()=>[l("label",Bo,f(t(e)("general.status")),1)]),footer:n(()=>[o(U,{message:t(s).errors.status},null,8,["message"])]),default:n(()=>[o(ee,{modelValue:t(s).status,"onUpdate:modelValue":_[5]||(_[5]=x=>t(s).status=x),error:t(s).errors.status!==void 0,id:"status"},{default:n(()=>[l("option",So,f(t(e)("general.enabled")),1),l("option",No,f(t(e)("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1}),l("div",Oo,[o(X,{type:"submit",disabled:t(s).processing,isLoading:t(s).processing},{default:n(()=>[h(f(t(g)?t(e)("general.create"):t(e)("general.update")),1)]),_:1},8,["disabled","isLoading"])])]),_:1})])])],32)])])],64))}});export{Kn as default};
