import{T as $}from"./@inertiajs-D-tiTHlX.js";import{c as _,e as C,h as v,a as S,i as y}from"./app-DrYJbhZh.js";import{_ as P}from"./Alert-zz7KsfSK.js";import{_ as V}from"./VerticalGroup-0ogbRp0b.js";import{u as x}from"./useRouter-qMRxdwMF.js";import{aJ as u,r as E,k as L,l as B,E as s,z as e,ak as n,A as t,u as r,x as I,F as N}from"./@vue-DxEuNGre.js";const F={for:"secret"},J={__name:"ChangeSecret",props:{webhookId:{required:!0,type:String}},setup(b){const m=b,f=u("routePrefix"),p=u("workspaceCtx"),c=u("authPasswordConfirmation"),i=E(!1),a=$({secret:""}),{onError:w}=x(),k=()=>{c().onConfirm(()=>{i.value=!0}).ensureConfirmed()},d=()=>{i.value=!1,a.reset()},h=()=>{const o=p?route(`${f}.webhooks.updateSecret`,{workspace:p.id,webhook:m.webhookId}):route(`${f}.system.webhooks.updateSecret`,{webhook:m.webhookId});a.post(o,{preserveScroll:!0,onSuccess(){d()},onError(l){w(l,h)}})};return(o,l)=>(L(),B(N,null,[s(P,{variant:"warning",closeable:!1,class:"mb-lg"},{default:e(()=>[n(t(o.$t("webhook.change_secret_desc")),1)]),_:1}),s(_,{onClick:k,isLoading:r(c)().data.value.ensuringPasswordConfirmed,disabled:r(c)().data.value.ensuringPasswordConfirmed},{default:e(()=>[n(t(o.$t("webhook.change_secret")),1)]),_:1},8,["isLoading","disabled"]),s(y,{show:i.value,"max-width":"sm","scrollable-body":!0,closeable:!0,onClose:d},{header:e(()=>[n(t(o.$t("webhook.change_secret")),1)]),body:e(()=>[s(V,null,{title:e(()=>[I("label",F,t(o.$t("webhook.secret")),1)]),footer:e(()=>[s(C,{message:r(a).errors.secret},null,8,["message"])]),default:e(()=>[s(v,{modelValue:r(a).secret,"onUpdate:modelValue":l[0]||(l[0]=g=>r(a).secret=g),type:"text",id:"secret",placeholder:o.$t("webhook.secret")},null,8,["modelValue","placeholder"])]),_:1})]),footer:e(()=>[s(_,{onClick:d,class:"mr-xs"},{default:e(()=>[n(t(o.$t("general.cancel")),1)]),_:1}),s(S,{onClick:h,isLoading:r(a).processing,disabled:r(a).processing},{default:e(()=>[n(t(o.$t("general.save")),1)]),_:1},8,["isLoading","disabled"])]),_:1},8,["show"])],64))}};export{J as _};
