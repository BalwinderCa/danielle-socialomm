import{u as F}from"./vue-i18n-CbxO4HOa.js";import{O as C,Z as L,i as U}from"./@inertiajs-D-tiTHlX.js";import{o as D,a as z,P as M}from"./app-DrYJbhZh.js";import{l as _}from"./lodash-1tNnn4nO.js";import{u as W}from"./useRouter-qMRxdwMF.js";import{u as q}from"./useSelectable-B_73QrI2.js";import{_ as G}from"./Admin-BmY5gXra.js";import{_ as J}from"./PageHeader-5KlQKxZu.js";import{_ as Z}from"./Panel-C3_mBW3b.js";import{_ as O}from"./Checkbox-CdCvF_Az.js";import{T as H,a as K,_ as c}from"./TableCell-CdlC4-rl.js";import{_ as Q}from"./PureDangerButton-BpJxGdZl.js";import{_ as X}from"./SelectableBar-iH6lI9K9.js";import{_ as Y}from"./Pagination-BTQBy8Tc.js";import{_ as ee}from"./NoResult-DQ-W_W23.js";import{T as oe}from"./Trash-CGBHVq5p.js";import{_ as te}from"./WebhookItem-DBNjyXxe.js";import{aJ as R,r as se,f as re,b1 as ae,w as P,b8 as ie,l as h,E as e,u as o,x as S,z as t,C as B,F as E,d as le,k as n,ak as d,A as p,G as ce,y as k,aO as T,q as ne}from"./@vue-DxEuNGre.js";import"./@intlify-AYDeHhOU.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./QueueList-DTZpFIOW.js";import"./Flex-55yEXw9x.js";import"./ChevronLeft-Cx_QtWsr.js";import"./PureButtonLink-Cm9jQ4_3.js";import"./DropdownButton-BUtT444l.js";import"./EllipsisVertical-DX5Zf3Qx.js";const me={class:"w-full mx-auto row-py"},de={class:"w-full row-px mt-lg"},pe={key:0,class:"mt-lg"},fe=le({layout:G}),mo=Object.assign(fe,{__name:"Index",props:{filter:{type:Object,default:{}},records:{type:Object}},setup(a){const{t:r}=F(),f=a,b=R("routePrefix"),j=R("confirmation"),{selectedRecords:m,putPageRecords:w,toggleSelectRecordsOnPage:u,deselectRecord:y,deselectAllRecords:v}=q(),{onError:I}=W(),g=se({keyword:f.filter.keyword}),$=()=>f.records.data.map(s=>s.id),N=()=>{j().title(r("webhook.delete_webhooks")).description(r("webhook.delete_webhooks_confirm")).destructive().onConfirm(s=>{x(s)}).show()},x=s=>{s.isLoading(!0),C.delete(route(`${b}.system.webhooks.deleteMultiple`),{data:{webhooks:m.value},preserveScroll:!0,onSuccess(){s.reset(),v()},onError(i){I(i,()=>{x(s)})},onFinish(){s.isLoading(!1)}})};return re(()=>{w($()),D.on("webhookDeleted",s=>{y(s)})}),ae(()=>{D.off("webhookDeleted")}),P(()=>_.cloneDeep(g.value),_.throttle(()=>{C.get(route("mixpost.system.webhooks.index"),_.pickBy(g.value),{preserveState:!0,only:["records","filter"]})},300)),P(()=>f.records.data,()=>{w($())}),(s,i)=>{const V=ie("tooltip");return n(),h(E,null,[e(o(L),{title:o(r)("webhook.webhooks")},null,8,["title"]),S("div",me,[e(J,{title:o(r)("webhook.webhooks")},{description:t(()=>[d(p(o(r)("webhook.webhooks_desc")),1)]),_:1},8,["title"]),S("div",de,[e(o(U),{href:s.route(`${o(b)}.system.webhooks.create`)},{default:t(()=>[e(z,{size:"sm"},{icon:t(()=>[e(M)]),default:t(()=>[d(" "+p(o(r)("webhook.create_webhook")),1)]),_:1})]),_:1},8,["href"]),e(X,{count:o(m).length,onClose:o(v)},{default:t(()=>[ce((n(),k(Q,{onClick:N},{default:t(()=>[e(oe)]),_:1})),[[V,o(r)("general.delete")]])]),_:1},8,["count","onClose"]),e(Z,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(H,null,{head:t(()=>[e(K,null,{default:t(()=>[e(c,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(O,{checked:o(u),"onUpdate:checked":i[0]||(i[0]=l=>T(u)?u.value=l:null),disabled:!a.records.meta.total},null,8,["checked","disabled"])]),_:1}),e(c,{component:"th",scope:"col",class:"w-10"}),e(c,{component:"th",scope:"col"},{default:t(()=>[d(p(o(r)("general.name")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[d(p(o(r)("webhook.callback_url")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[d(p(o(r)("post.status")),1)]),_:1}),e(c,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(n(!0),h(E,null,ne(a.records.data,l=>(n(),k(te,{key:l.id,item:l,onOnDelete:()=>{o(y)(l.id)}},{checkbox:t(()=>[e(O,{checked:o(m),"onUpdate:checked":i[1]||(i[1]=A=>T(m)?m.value=A:null),value:l.id},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),a.records.meta.total?B("",!0):(n(),k(ee,{key:0,class:"py-md px-md"}))]),_:1}),a.records.meta.links.length>3?(n(),h("div",pe,[e(Y,{meta:a.records.meta,links:a.records.links},null,8,["meta","links"])])):B("",!0)])])],64)}}});export{mo as default};
