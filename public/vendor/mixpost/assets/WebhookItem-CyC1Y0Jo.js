import{u as x}from"./vue-i18n-CbxO4HOa.js";import{_ as l,a as O}from"./TableCell-CdlC4-rl.js";import{p as j,j as p,m as A,k as B,o as T,n as $}from"./app-DKo9pbIL.js";import{O as V}from"./@inertiajs-D-tiTHlX.js";import{u as W}from"./useRouter-DhT2ChWq.js";import{_ as q}from"./PureButtonLink-Cm9jQ4_3.js";import{T as L}from"./Trash-CGBHVq5p.js";import{_ as N}from"./DropdownButton-qY71A0S1.js";import{Q as P}from"./QueueList-DTZpFIOW.js";import{aJ as k,r as J,b8 as I,k as w,l as Q,x as g,G as y,u as d,y as S,z as t,E as e,ak as m,A as u,J as U}from"./@vue-DxEuNGre.js";const z={class:"flex flex-row items-center justify-end gap-xs"},F={__name:"WebhookItemAction",props:{itemId:{type:String,required:!0}},emits:["onDelete"],setup(o,{emit:c}){const{t:r}=x(),i=k("routePrefix"),f=k("confirmation"),a=k("workspaceCtx"),n=o,_=c;j();const{onError:C}=W(),h=s=>{switch(s){case"edit":return a?route(`${i}.webhooks.edit`,{workspace:a.id,webhook:n.itemId}):route(`${i}.system.webhooks.edit`,{webhook:n.itemId});case"deliveries":return a?route(`${i}.webhooks.deliveries.index`,{workspace:a.id,webhook:n.itemId}):route(`${i}.system.webhooks.deliveries.index`,{webhook:n.itemId});case"delete":return a?route(`${i}.webhooks.delete`,{workspace:a.id,webhook:n.itemId}):route(`${i}.system.webhooks.delete`,{webhook:n.itemId});default:return""}},D=J(!1),E=()=>{f().title(r("webhook.delete_webhook")).description(r("webhook.delete_webhook_confirm")).destructive().onConfirm(s=>{b(s)}).show()},b=s=>{s.isLoading(!0),V.delete(h("delete"),{onSuccess(){D.value=!1,_("onDelete"),T.emit("webhookDeleted",n.itemId),s.reset()},onError(v){C(v,()=>{b(s)})},onFinish(){s.isLoading(!1)}})};return(s,v)=>{const R=I("tooltip");return w(),Q("div",null,[g("div",z,[y((w(),S(q,{href:h("deliveries")},{default:t(()=>[e(P)]),_:1},8,["href"])),[[R,d(r)("webhook.deliveries")]]),e(B,{placement:"bottom-end"},{trigger:t(()=>[e(N)]),content:t(()=>[e(p,{href:h("edit")},{icon:t(()=>[e(A)]),default:t(()=>[m(" "+u(d(r)("general.edit")),1)]),_:1},8,["href"]),e(p,{onClick:E,as:"button"},{icon:t(()=>[e(L,{class:"text-red-500"})]),default:t(()=>[m(" "+u(d(r)("general.delete")),1)]),_:1})]),_:1})])])}}},G={class:"text-gray-500"},re={__name:"WebhookItem",props:{item:{type:Object,required:!0}},setup(o){const{t:c}=x(),r=o,i=()=>{switch(r.item.last_delivery_status){case"SUCCESS":return"success";case"ERROR":return"error";default:return"neutral"}},f=()=>{switch(r.item.last_delivery_status){case"SUCCESS":return c("webhook.last_delivery_succeeded");case"ERROR":return c("webhook.last_delivery_failed");default:return c("webhook.never_triggered")}};return(a,n)=>{const _=I("tooltip");return w(),S(O,{hoverable:!0},{default:t(()=>[e(l,{class:"w-10"},{default:t(()=>[U(a.$slots,"checkbox")]),_:3}),e(l,null,{default:t(()=>[y(e($,{variant:i(),class:"w-5 h-5 !rounded-full"},null,8,["variant"]),[[_,f()]])]),_:1}),e(l,null,{default:t(()=>[m(u(o.item.name),1)]),_:1}),e(l,null,{default:t(()=>[g("span",G,u(`${o.item.callback_url.slice(0,60)}`)+u(o.item.callback_url.length>60?"...":""),1)]),_:1}),e(l,null,{default:t(()=>[e($,{variant:o.item.active?"success":"error"},{default:t(()=>[m(u(o.item.active?d(c)("general.active"):d(c)("general.inactive")),1)]),_:1},8,["variant"])]),_:1}),e(l,null,{default:t(()=>[e(F,{itemId:o.item.id},null,8,["itemId"])]),_:1})]),_:3})}}};export{re as _};
