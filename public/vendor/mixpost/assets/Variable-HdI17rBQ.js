import{b,m as v,D as H,c as y,L as P,d as m}from"./@tiptap-DlxRGiDd.js";import{o as l}from"./app-TmpkEByR.js";import{P as p}from"./prosemirror-state-Dfkm3xtq.js";import{a as g,D as h}from"./prosemirror-view-CARpBv5D.js";const A=b.create({name:"div",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"div"}]},renderHTML({HTMLAttributes:t}){return["div",v(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),D=()=>({defaultExtensions:[H,A,y,P.configure({openOnClick:!1,linkOnPaste:!1})],insertEmoji:({editorId:n,emoji:e})=>{e.hasOwnProperty("native")&&l.emit("insertEmoji",{editorId:n,emoji:e})},insertContent:({editorId:n,text:e})=>{l.emit("insertContent",{editorId:n,text:e})},replaceContent:({editorId:n,text:e})=>{l.emit("replaceContent",{editorId:n,text:e})},focusEditor:({editorId:n})=>{l.emit("focusEditor",{editorId:n})},isDocEmpty:n=>n==="<div></div>"?!0:n==="",getTextFromHtmlString:n=>{const e=document.createElement("div");e.innerHTML=n;const c=e.innerHTML;e.remove();let s=c.replace(/<div><\/div>/g,`
`);return s=s.replace(/<div>/g,`
`),s=s.replace(/<\/div>/g,""),s=s.replace(/<\/?[^>]+(>|$)/g,""),c.startsWith("<div>")&&(s=s.substring(1)),s}}),S=m.create({name:"hashtag",addProseMirrorPlugins(){return[new p({state:{init(t,{doc:r}){return f(r)},apply(t,r){return t.docChanged?f(t.doc):r}},props:{decorations(t){return this.getState(t)}}})]}}),f=t=>{const r=/#(\w+)\b/gi,o=[];return t.descendants((a,d)=>{a.text&&Array.from(a.text.matchAll(r)).forEach(i=>{const u=i[0],n=i.index||0,e=d+n,c=e+u.length,s=h.inline(e,c,{class:"text-blue-500"});o.push(s)})}),g.create(t,o)},w=m.create({name:"usertag",addProseMirrorPlugins(){return[new p({state:{init(t,{doc:r}){return x(r)},apply(t,r){return t.docChanged?x(t.doc):r}},props:{decorations(t){return this.getState(t)}}})]}}),x=t=>{const r=/@(\w+)\b/gi,o=[];return t.descendants((a,d)=>{a.text&&Array.from(a.text.matchAll(r)).forEach(i=>{const u=i[0],n=i.index||0,e=d+n,c=e+u.length,s=h.inline(e,c,{class:"text-blue-500"});o.push(s)})}),g.create(t,o)},k=m.create({name:"variable",addProseMirrorPlugins(){return[new p({state:{init(t,{doc:r}){return E(r)},apply(t,r){return t.docChanged?E(t.doc):r}},props:{decorations(t){return this.getState(t)}}})]}}),E=t=>{const r=/{{([a-zA-Z0-9_]+)}}/g,o=[];return t.descendants((a,d)=>{a.text&&Array.from(a.text.matchAll(r)).forEach(i=>{const u=i[0],n=i.index||0,e=d+n,c=e+u.length,s=h.inline(e,c,{class:"text-primary-500"});o.push(s)})}),g.create(t,o)};export{S as H,k as V,w as a,D as u};
