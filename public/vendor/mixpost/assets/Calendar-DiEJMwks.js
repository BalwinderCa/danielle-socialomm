import{O as G,Z as we}from"./@inertiajs-D-tiTHlX.js";import{l as M}from"./lodash-1tNnn4nO.js";import{u as le}from"./useSettings-zxwQ4_xc.js";import{d as I}from"./date-fns-tz-NX4xHF3p.js";import{N as K,c as E,g as U,O as ie,i as ge,Q as ce,P as de,R as ee,S as Se,j as te,U as se,k as De}from"./app-DKo9pbIL.js";import{b as m,k as r,l as i,A as g,E as c,z as w,ak as P,x as d,F as b,q as Z,aJ as W,r as F,b8 as xe,v as Q,C,G as be,y as j,t as A,u as O,J as ue,aO as $e,p as L,a as Oe,w as ae}from"./@vue-DxEuNGre.js";import{C as me,a as pe}from"./ChevronLeft-Cx_QtWsr.js";import{s as re,d as ye,p as N,e as fe,a as D,h as H,i as J,j as Me,k as Y,m as Te,n as Ce,o as Ze,q as X,r as qe,u as Fe,v as Ie,w as ve,x as z,y as je}from"./date-fns-Uop7x9nl.js";import{W as he}from"./constants-BK-AY4Ot.js";import{u as Ne,_ as oe,a as We}from"./VerticallyScrollableContent-kszg1539.js";import{u as Pe}from"./usePostVersions-THbIEc6s.js";import{_ as Ae}from"./ProviderIcon-2Uv5mSMq.js";import{_ as Ve,a as Be}from"./PostsFilter-WL_4vAN8.js";import{C as Ue}from"./Clock-BpaLntn3.js";import{C as ze}from"./ChevronDown-CD-zlGXi.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./vue-i18n-CbxO4HOa.js";import"./@intlify-AYDeHhOU.js";import"./mitt-DJ65BbbF.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./Variable-DSCy-U-5.js";import"./@tiptap-DlxRGiDd.js";import"./prosemirror-state-Dfkm3xtq.js";import"./prosemirror-model-C-VrLeHJ.js";import"./orderedmap-C4TimWWB.js";import"./prosemirror-transform-CNTRfHZy.js";import"./prosemirror-dropcursor-CRVdsyHs.js";import"./prosemirror-gapcursor-CIClWOe5.js";import"./prosemirror-keymap-BrtsOOc5.js";import"./w3c-keyname-DEtA-KhA.js";import"./prosemirror-view-CARpBv5D.js";import"./prosemirror-history-C8_5KGmB.js";import"./rope-sequence-Cxv9J64N.js";import"./linkifyjs-CkylhtGF.js";import"./prosemirror-commands-B8A7CEu7.js";import"./prosemirror-schema-list-B_jBki9Q.js";import"./Panel-C3_mBW3b.js";import"./EditorReadOnly-DiVEO_ao.js";import"./Alert-C1ipTQaq.js";import"./Flex-55yEXw9x.js";import"./Refresh-BG68H2OY.js";import"./SearchInput-BNGzxvIx.js";import"./ArrowTopRightOnSquare-BBcEejN-.js";import"./ColorPicker-BKF3oEDX.js";import"./@jaames-DqG6q-J1.js";import"./Trash-CGBHVq5p.js";import"./PureButtonLink-Cm9jQ4_3.js";import"./EllipsisVertical-DX5Zf3Qx.js";import"./Eye-Bm2KpbsG.js";import"./Checkbox-CdCvF_Az.js";import"./NoResult-Bw7G-sLT.js";const Ee={class:"text-gray-700 font-semibold text-lg"},Re={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0}},setup(t){const{translatedFormat:s}=K(),e=t,o=m(()=>s(e.selectedDate,"MMMM yyyy"));return(n,u)=>(r(),i("div",Ee,g(o.value),1))}},Le={class:"flex items-center"},He={class:"flex items-center"},Je={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(t,{emit:s}){const e=t,o=s,n=()=>{let l=re(ye(e.selectedDate,1));o("dateSelected",l)},u=()=>{const l=typeof e.currentDate=="string"?N(e.currentDate):e.currentDate;o("dateSelected",l)},p=()=>{let l=re(fe(e.selectedDate,1));o("dateSelected",l)};return(l,f)=>(r(),i("div",Le,[c(E,{onClick:u,class:"mr-xs"},{default:w(()=>[P(g(l.$t("calendar.today")),1)]),_:1}),d("div",He,[c(U,{onClick:n,class:"mr-xs"},{default:w(()=>[c(me)]),_:1}),c(U,{onClick:p},{default:w(()=>[c(pe)]),_:1})])]))}},Ye={class:"grid grid-cols-7"},Ge={class:"hidden sm:block"},Ke={class:"block sm:hidden"},Qe={__name:"Weekdays",props:{weekStartsOn:{required:!1,type:Number,default:0}},setup(t){const s=t,e=m(()=>{const o=M.clone(he);return o.splice(s.weekStartsOn?0:6).concat(o)});return(o,n)=>(r(),i("div",Ye,[(r(!0),i(b,null,Z(e.value,(u,p)=>(r(),i("div",{key:p,class:"p-sm border-t border-r last:border-r-0 border-gray-200 text-center font-semibold"},[d("span",Ge,g(o.$t(`calendar.weekdays.${u.key}.short`)),1),d("span",Ke,g(o.$t(`calendar.weekdays.${u.key}.shortest`)),1)]))),128))]))}},Xe={key:0,class:"flex flex-col h-full"},et={class:"w-full h-full p-1 md:p-sm bg-white"},tt={class:"text-left text-sm md:text-base"},st={key:0,class:"flex flex-wrap gap-xs items-center mt-xs"},at={class:"flex items-center justify-between mt-xs"},rt={class:"flex items-center text-gray-500"},ot={class:"text-sm"},nt={class:"mr-xs"},_e={__name:"CalendarPostItem",props:{item:{type:Object,required:!0}},setup(t){const s=t,e=W("calendarFilter"),{timeFormat:o}=le(),{getOriginalVersion:n,getAccountVersion:u}=Pe(),{setupURLMetaForAllVersions:p}=Ne(),l=m(()=>{if(!s.item.versions.length)return{excerpt:""};let x=s.item.accounts;e.value.accounts.length&&(x=x.filter(a=>e.value.accounts.includes(a.id)));const y=x.map(a=>{const k=u(s.item.versions,a.id);return k?k.content[0]:n(s.item.versions).content[0]});return{excerpt:(y.length?y[0]:s.item.versions[0].content[0]).excerpt}}),f=m(()=>M.uniqBy(s.item.accounts,"provider")),h=m(()=>o===12?ie(s.item.scheduled_at.time):s.item.scheduled_at.time),_=F(!1),$=()=>{_.value=!0,p(s.item.versions)},T=()=>{_.value=!1};return(x,y)=>{const v=xe("tooltip");return r(),i(b,null,[d("div",{class:"w-full relative flex rounded-md overflow-hidden border border-gray-200 hover:border-primary-500 transition-colors ease-in-out duration-200",onClick:$,role:"button","aria-pressed":"false",tabindex:"0"},[t.item.tags.length?(r(),i("div",Xe,[(r(!0),i(b,null,Z(t.item.tags,a=>(r(),i("div",{class:"w-sm h-full first:rounded-tl-md last:rounded-bl-md",style:Q({backgroundColor:a.hex_color})},null,4))),256))])):C("",!0),d("div",et,[d("div",tt,g(l.value.excerpt),1),f.value.length?(r(),i("div",st,[(r(!0),i(b,null,Z(f.value,a=>(r(),i("div",{key:a.id},[be(c(Ae,{provider:a.provider,class:"!w-4 !h-4"},null,8,["provider"]),[[v,`${a.name}`]])]))),128))])):C("",!0),d("div",at,[d("div",rt,[c(Ue,{class:"hidden md:block mr-1 !w-5 !h-5"}),d("span",ot,g(h.value),1)]),c(oe,{value:t.item.status,showName:!1,class:"hidden md:block"},null,8,["value"])])])]),c(ge,{show:_.value,scrollableBody:!0,onClose:T},{body:w(()=>[c(oe,{value:t.item.status,class:"mb-lg"},null,8,["value"]),_.value?(r(),j(We,{key:0,accounts:t.item.accounts,versions:t.item.versions},null,8,["accounts","versions"])):C("",!0)]),footer:w(()=>[_.value?(r(),i(b,{key:0},[d("div",nt,[c(Ve,{"item-id":t.item.id},null,8,["item-id"])]),c(E,{onClick:T},{default:w(()=>[P(g(x.$t("general.close")),1)]),_:1})],64)):C("",!0)]),_:1},8,["show"])],64)}}},ke="/vendor/mixpost/assets/calendar-disabled-item-DXCfE7-A.svg",lt={class:"absolute w-full top-0 left-0 mt-xs text-center"},it={key:0,class:"absolute mt-xs right-0 mr-sm rtl:mr-0 rtl:ml-sm opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},ct={key:1,class:"mt-xl pb-xl h-full overflow-hidden"},dt={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},ut={class:"flex flex-wrap space-y-xs w-full"},mt={__name:"MonthDayItem",props:{day:{type:Object,required:!0},isToday:{type:Boolean,default:!1},timeZone:{required:!1,type:String,default:"UTC"}},setup(t){const s=W("workspaceCtx"),e=t,{isWorkspaceEditorRole:o}=ce(),n=m(()=>D(new Date(`${e.day.date}T00:00:00`),"d")),u=m(()=>e.day.isDisabled?{backgroundImage:`url('${ke}')`}:{}),p=()=>{if(!o.value)return;const l=I.utcToZonedTime(new Date().toISOString(),e.timeZone);let f=`${e.day.date} ${D(l,"HH:mm")}`;G.visit(route("mixpost.posts.create",{workspace:s.id,schedule_at:f}))};return(l,f)=>(r(),i("div",{class:"relative min-h-[100px] overflow-hidden bg-white border-r border-b border-gray-200 group",style:Q(u.value)},[d("div",lt,[d("span",{class:A(["w-7 h-7 inline-flex items-center justify-center p-1 mr-xs rtl:mr-0 rtl:ml-xs rounded-full text-gray-700",{"bg-primary-500 text-white":t.isToday,"text-gray-400":t.day.isDisabled}])},g(n.value),3)]),!t.day.isDisabled&&O(o)?(r(),i("div",it,[d("button",{onClick:p,type:"button",class:"text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[c(de)])])):C("",!0),t.day.posts.length?(r(),i("div",ct,[d("div",dt,[d("div",ut,[(r(!0),i(b,null,Z(t.day.posts,h=>(r(),j(_e,{key:h.id,item:h},null,8,["item"]))),128))])])])):C("",!0)],4))}},pt={class:"bg-white"},yt={class:"flex flex-col md:flex-row md:items-center md:justify-between py-lg row-px"},ft={class:"flex items-center space-x-xs mb-xs md:mb-0"},vt={class:"calendar-month-height grid grid-cols-7 relative border-t border-t-gray-200"},ht={__name:"CalendarMonth",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:t=>D(I.utcToZonedTime(new Date().toISOString(),t.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(t,{emit:s}){const e=t,o=s,n=F(new Date(`${e.initialDate}T00:00:00`)),u=m(()=>[..._.value,...$.value,...T.value]),p=m(()=>D(I.utcToZonedTime(new Date().toISOString(),e.timeZone),"yyyy-MM-dd")),l=m(()=>(H(n.value)+1).toString().padStart(2,"0")),f=m(()=>J(n.value)),h=m(()=>Me(n.value)),_=m(()=>{const a=x($.value[0].date),k=a?a-e.weekStartsOn:e.weekStartsOn?6:0,S=Y(Te(new Date(`${$.value[0].date}T00:00:00`),k)),q=ye(n.value,1);return[...Array(k)].map((V,B)=>{const R=new Date(`${J(q)}-${(H(q)+1).toString().padStart(2,"0")}-${(S+B).toString().padStart(2,"0")}T00:00:00`);return{date:D(R,"yyyy-MM-dd"),isDisabled:ee(R,e.timeZone),posts:y(R)}})}),$=m(()=>[...Array(h.value)].map((a,k)=>{const S=new Date(`${f.value}-${l.value}-${(k+1).toString().padStart(2,"0")}T00:00:00`);return{date:D(S,"yyyy-MM-dd"),isDisabled:ee(S,e.timeZone),posts:y(S)}})),T=m(()=>{const a=x(Ce(n.value)),k=a&&(e.weekStartsOn?7:6)-a,S=fe(n.value,1);return[...Array(k)].map((q,V)=>{const B=new Date(`${J(S)}-${(H(S)+1).toString().padStart(2,"0")}-${(V+1).toString().padStart(2,"0")}T00:00:00`);return{date:D(B,"yyyy-MM-dd"),isDisabled:!1,posts:y(B)}})}),x=a=>Ze(typeof a=="string"?new Date(`${a}T00:00:00`):a),y=a=>e.posts.filter(k=>D(a,"yyyy-MM-dd")===k.scheduled_at.date),v=a=>{n.value=a,o("dateSelected",a)};return(a,k)=>(r(),i("div",pt,[d("div",yt,[d("div",ft,[c(Je,{"current-date":p.value,"selected-date":n.value,onDateSelected:v},null,8,["current-date","selected-date"]),c(Re,{"selected-date":n.value},null,8,["selected-date"])]),ue(a.$slots,"header")]),c(Qe,{weekStartsOn:t.weekStartsOn},null,8,["weekStartsOn"]),d("div",vt,[(r(!0),i(b,null,Z(u.value,S=>(r(),j(mt,{key:S.date,day:S,isToday:S.date===p.value,timeZone:t.timeZone},null,8,["day","isToday","timeZone"]))),128))])]))}},_t={class:"text-gray-700 font-semibold text-lg"},kt={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0},weekStartsOn:{required:!1,type:Number,default:0}},setup(t){const s=t,{translatedFormat:e}=K(),o=m(()=>{const n=X(s.selectedDate,{weekStartsOn:s.weekStartsOn}),u=qe(s.selectedDate,{weekStartsOn:s.weekStartsOn});return`${e(n,"MMM do")} - ${e(u,"MMM do")}`});return(n,u)=>(r(),i("div",_t,g(o.value),1))}},wt={class:"flex items-center"},gt={class:"flex items-center"},St={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(t,{emit:s}){const e=t,o=s,n=()=>{let l=Fe(e.selectedDate,1);o("dateSelected",l)},u=()=>{const l=typeof e.currentDate=="string"?N(e.currentDate):e.currentDate;o("dateSelected",l)},p=()=>{let l=Ie(e.selectedDate,1);o("dateSelected",l)};return(l,f)=>(r(),i("div",wt,[c(E,{onClick:u,class:"mr-xs"},{default:w(()=>[P(g(l.$t("calendar.today")),1)]),_:1}),d("div",gt,[c(U,{onClick:n,class:"mr-xs"},{default:w(()=>[c(me)]),_:1}),c(U,{onClick:p},{default:w(()=>[c(pe)]),_:1})])]))}},Dt={class:"flex flex-row sticky top-0 bg-white z-10"},xt={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},bt={class:"text-base md:text-xl"},$t={class:"hidden sm:block"},Ot={class:"block sm:hidden"},Mt={__name:"Weekdays",props:{timeZone:{required:!1,type:String,default:"UTC"},weekStartsOn:{required:!1,type:Number,default:0},selectedDate:{type:Date,required:!0},scrolled:{type:Boolean,required:!1,default:!1}},setup(t){const s=t,e=m(()=>X(s.selectedDate,{weekStartsOn:s.weekStartsOn})),o=m(()=>Y(I.utcToZonedTime(new Date().toISOString(),s.timeZone))),n=m(()=>{const u=M.clone(he);return u.splice(s.weekStartsOn?0:6).concat(u).map((l,f)=>{const h=f===0?e.value:ve(e.value,f),_=Y(h);return Object.assign(l,{date:_,isToday:o.value===_})})});return(u,p)=>(r(),i("div",Dt,[d("div",xt,[p[0]||(p[0]=d("div",null,null,-1)),(r(!0),i(b,null,Z(n.value,(l,f)=>(r(),i("div",{key:f,class:A([{"text-primary-500":l.isToday,"border-b-gray-200":t.scrolled,"border-b-white":!t.scrolled},"p-xs border-t border-b border-l border-gray-200 text-center font-semibold"])},[d("div",bt,g(l.date),1),d("span",{class:A({"text-gray-500":!l.isToday})},[d("span",$t,g(u.$t(`calendar.weekdays.${l.key}.short`)),1),d("span",Ot,g(u.$t(`calendar.weekdays.${l.key}.shortest`)),1)],2)],2))),128))])]))}},Tt={key:0,class:"absolute mt-xs right-0 mr-sm z-10 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},Ct={class:"mr-xs text-sm"},Zt={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},qt={class:"flex flex-wrap space-y-xs w-full"},Ft={__name:"WeekDayTimeItem",props:{dateSlot:{type:String,required:!0},timeSlot:{type:String,required:!0},minuteSlot:{type:Object,required:!0},timeZone:{required:!1,type:String,default:"UTC"},timeFormat:{required:!1,type:Number,default:12},posts:{type:Array,required:!0}},setup(t){const s=W("workspaceCtx"),e=t,{translatedFormat:o}=K(),{isWorkspaceEditorRole:n}=ce(),u=m(()=>{const h=z(N(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.end);return Se(h,e.timeZone)}),p=m(()=>{const h=z(N(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.start);return o(h,`${e.timeFormat===12?"h:mm aaa":"H:mm"}`)}),l=m(()=>u.value?{backgroundImage:`url('${ke}')`}:{}),f=()=>{if(!n.value)return;let h=`${e.dateSlot} ${e.timeSlot}`;const _=I.utcToZonedTime(new Date().toISOString(),e.timeZone);`${D(_,"yyyy-MM-dd")} ${je(_)}:00`===h&&(h=D(_,"yyyy-MM-dd H:mm")),G.visit(route("mixpost.posts.create",{workspace:s.id,schedule_at:h}))};return(h,_)=>(r(),i("div",{class:"relative min-h-[50px] group",style:Q(l.value)},[!u.value&&O(n)?(r(),i("div",Tt,[d("button",{onClick:f,type:"button",class:"flex items-center text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[d("span",Ct,g(p.value),1),c(de)])])):C("",!0),t.posts.length?(r(),i("div",{key:1,class:A([{"mt-lg":!u.value},"h-full overflow-hidden"])},[d("div",Zt,[d("div",qt,[(r(!0),i(b,null,Z(t.posts,$=>(r(),j(_e,{key:$.id,item:$},null,8,["item"]))),128))])])],2)):C("",!0)],4))}},It={class:"bg-white"},jt={class:"flex flex-col md:flex-row md:items-center md:justify-between py-lg row-px"},Nt={class:"flex items-center space-x-xs mb-xs md:mb-0"},Wt={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},Pt={class:"text-center text-gray-400 text-sm font-semibold"},At={__name:"CalendarWeek",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:t=>D(I.utcToZonedTime(new Date().toISOString(),t.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},timeFormat:{required:!1,type:Number,default:12},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(t,{emit:s}){const e=t,o=s,n=F(new Date(e.initialDate)),u=m(()=>D(I.utcToZonedTime(new Date().toISOString(),e.timeZone),"yyyy-MM-dd")),p=m(()=>X(n.value,{weekStartsOn:e.weekStartsOn})),l=m(()=>M.range(7).map(y=>{const v=y===0?p.value:ve(p.value,y);return D(v,"yyyy-MM-dd")})),f=m(()=>{let y=[];for(let v=0;v<24;v++){const a=(v+":00").padStart(5,"0");y.push({12:ie(a,"h aaa"),24:a})}return y}),h=[{start:0,end:59}],_=(y,v,a)=>e.posts.filter(k=>{const S=D(z(N(`${y} ${v}`),a.start),"kk:mm"),q=D(z(N(`${y} ${v}`),a.end),"kk:mm");return y===k.scheduled_at.date&&k.scheduled_at.time>=S&&k.scheduled_at.time<=q}),$=y=>{n.value=y,o("dateSelected",y)},T=F(!1),x=M.throttle(y=>{T.value=y.target.scrollTop>0},100);return(y,v)=>(r(),i("div",It,[d("div",jt,[d("div",Nt,[c(St,{currentDate:u.value,selectedDate:n.value,onDateSelected:$},null,8,["currentDate","selectedDate"]),c(kt,{selectedDate:n.value,weekStartsOn:t.weekStartsOn},null,8,["selectedDate","weekStartsOn"])]),ue(y.$slots,"header")]),d("div",{onScroll:v[0]||(v[0]=(...a)=>O(x)&&O(x)(...a)),class:"calendar-week-height-sm md:calendar-week-height-md xl:calendar-week-height overflow-y-auto"},[c(Mt,{timeZone:t.timeZone,weekStartsOn:t.weekStartsOn,selectedDate:n.value,scrolled:T.value},null,8,["timeZone","weekStartsOn","selectedDate","scrolled"]),d("div",Wt,[(r(!0),i(b,null,Z(f.value,a=>(r(),i(b,null,[(r(),i(b,null,Z(h,(k,S)=>(r(),i(b,null,[d("div",Pt,g(S===0?a[t.timeFormat]:""),1),(r(!0),i(b,null,Z(l.value,(q,V)=>(r(),i("div",{key:V,class:A([{"!border-t-gray-100":S!==0},"grid grid-cols-1 border-l border-t border-gray-200 text-center bg-white"])},[c(Ft,{dateSlot:q,timeSlot:a[24],minuteSlot:k,timeZone:t.timeZone,timeFormat:t.timeFormat,posts:_(q,a[24],k)},null,8,["dateSlot","timeSlot","minuteSlot","timeZone","timeFormat","posts"])],2))),128))],64))),64))],64))),256))])],32)]))}},Vt={class:"inline-block mr-xs"},Bt={__name:"CalendarSwitchType",setup(t){const s=W("calendarType"),e=o=>{s.value=o};return(o,n)=>(r(),j(De,{placement:"bottom"},{trigger:w(()=>[c(E,{size:"sm"},{default:w(()=>[d("span",Vt,g(O(s)==="month"?o.$t("calendar.month"):o.$t("calendar.week")),1),c(ze)]),_:1})]),content:w(()=>[c(te,{as:"button",onClick:n[0]||(n[0]=u=>e("month"))},{icon:w(()=>[c(se)]),default:w(()=>[P(" "+g(o.$t("calendar.month")),1)]),_:1}),c(te,{as:"button",onClick:n[1]||(n[1]=u=>e("week"))},{icon:w(()=>[c(se)]),default:w(()=>[P(" "+g(o.$t("calendar.week")),1)]),_:1})]),_:1}))}},Ut={class:"flex items-center space-x-md rtl:space-x-reverse"},ne={__name:"CalendarToolbar",setup(t){const s=W("calendarFilter");return(e,o)=>(r(),i("div",Ut,[c(Bt),c(Be,{modelValue:O(s),"onUpdate:modelValue":o[0]||(o[0]=n=>$e(s)?s.value=n:null)},null,8,["modelValue"])]))}},na={__name:"Calendar",props:{posts:{required:!0,type:Object},type:{required:!0,type:String},selected_date:{required:!0,type:[String,Date]},filter:{type:Object,default:{}}},setup(t){const s=t,e=W("workspaceCtx"),{timeZone:o,timeFormat:n,weekStartsOn:u}=le(),p=F(s.type),l=F(s.selected_date),f=F({keyword:s.filter.keyword,status:s.filter.status,tags:s.filter.tags,accounts:s.filter.accounts});L("calendarType",p),L("calendarFilter",f);const h=Oe({urlMeta:{}});L("postCtx",h);const _=m(()=>p.value==="month"),$=m(()=>p.value==="week"),T=v=>{const a=D(v,"yyyy-MM-dd");l.value=a,y(Object.assign({date:a},M.pickBy(f.value)))};ae(p,()=>{x(Object.assign({date:l.value,type:p.value},M.pickBy(f.value)))}),ae(()=>M.cloneDeep(f.value),M.throttle(()=>{x(Object.assign({date:l.value},M.pickBy(f.value)))},300));const x=v=>{G.get(route("mixpost.calendar",Object.assign({workspace:e.id},v)),{},{preserveState:!0,only:["posts"]})},y=M.throttle(v=>{x(v)},300);return(v,a)=>(r(),i(b,null,[c(O(we),{title:v.$t("post.schedule")},null,8,["title"]),_.value?(r(),j(ht,{key:0,initialDate:l.value,weekStartsOn:O(u),timeZone:O(o),posts:t.posts.data,onDateSelected:T},{header:w(()=>[c(ne)]),_:1},8,["initialDate","weekStartsOn","timeZone","posts"])):C("",!0),$.value?(r(),j(At,{key:1,initialDate:l.value,weekStartsOn:O(u),timeZone:O(o),timeFormat:O(n),posts:t.posts.data,onDateSelected:T},{header:w(()=>[c(ne)]),_:1},8,["initialDate","weekStartsOn","timeZone","timeFormat","posts"])):C("",!0)],64))}};export{na as default};
