import{u as I}from"./vue-i18n-CbxO4HOa.js";import{T as A,O as T,Z as q,i as M}from"./@inertiajs-D-tiTHlX.js";import{P as G,c as j,a as P,i as N,r as J,n as V,k as Z,j as U,m as O,p as H,d as K,_ as C,u as Q}from"./app-Bood2A1f.js";import{_ as X}from"./Admin-DhOeHsLa.js";import{_ as Y}from"./PageHeader-5KlQKxZu.js";import{_ as z}from"./Panel-C3_mBW3b.js";import{T as B}from"./Trash-CGBHVq5p.js";import{_ as ee}from"./NoResult-4Hlh7_BA.js";import{_ as te}from"./DropdownButton-Dsw7Fhie.js";import{_ as E,a as R}from"./CanApprove-Cizct0GW.js";import{l as se}from"./lodash-1tNnn4nO.js";import{aJ as b,r as x,D as ae,k as v,l as w,E as t,z as e,ak as o,A as a,u as l,F as S,b8 as oe,y,q as le,x as $,G as re,d as ne,C as ie}from"./@vue-DxEuNGre.js";import{_ as D}from"./VerticalGroup-0ogbRp0b.js";import{a as W,_ as h,T as ue}from"./TableCell-CdlC4-rl.js";import{E as ce}from"./Eye-Bm2KpbsG.js";import{_ as de}from"./PureButtonLink-Cm9jQ4_3.js";import"./@intlify-AYDeHhOU.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./QueueList-DTZpFIOW.js";import"./Flex-55yEXw9x.js";import"./EllipsisVertical-DX5Zf3Qx.js";import"./Radio-DGi8giFl.js";import"./Checkbox-CdCvF_Az.js";const me={class:"relative w-full"},pe={__name:"SelectWorkspace",props:{modelValue:{default:null},workspaces:{type:Array,default:[]},exclude:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:n}){const f=r,c=b("routePrefix"),_=x(f.workspaces),i=(u,m)=>{u&&(m(!0),g(m,u))},g=se.throttle((u,m)=>{axios.get(route(`${c}.workspaces.resources.items`),{params:{keyword:m,exclude:f.exclude}}).then(d=>{u(!1),_.value=d.data.data.map(s=>({key:s.uuid,label:s.name}))})},350);return(u,m)=>{const d=ae("v-select");return v(),w("div",me,[t(d,{modelValue:r.modelValue,"onUpdate:modelValue":m[0]||(m[0]=s=>u.$emit("update:modelValue",s)),options:_.value,filterable:!1,"close-on-select":!0,disabled:r.disabled,placeholder:u.$t("workspace.type_search_workspace"),onSearch:i},{"no-options":e(({search:s,searching:k,loading:L})=>[o(a(u.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","disabled","placeholder"])])}}},fe={__name:"AttachWorkspace",props:{user:{type:Object},attachedWorkspaces:{type:Array,default:[]}},setup(r){b("routePrefix");const n=r,f=x(null),c=A({user_id:n.user.id,role:"admin",can_approve:!1}),_=()=>{c.post(route("mixpost.workspaces.users.store",{workspace:f.value.key}),{preserveScroll:!0,onSuccess(){u(),c.reset()}})},i=x(!1),g=()=>{i.value=!0},u=()=>{i.value=!1,f.value=null};return(m,d)=>(v(),w(S,null,[t(j,{onClick:g,size:"sm"},{icon:e(()=>[t(G)]),default:e(()=>[o(" "+a(m.$t("team.attach")),1)]),_:1}),t(N,{show:i.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:u},{header:e(()=>[o(a(m.$t("team.attach_workspace")),1)]),body:e(()=>[t(pe,{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=s=>f.value=s),exclude:r.attachedWorkspaces},null,8,["modelValue","exclude"]),t(E,{modelValue:l(c).role,"onUpdate:modelValue":d[1]||(d[1]=s=>l(c).role=s),class:"mt-lg"},null,8,["modelValue"]),t(D,{class:"mt-lg"},{default:e(()=>[t(R,{modelValue:l(c).can_approve,"onUpdate:modelValue":d[2]||(d[2]=s=>l(c).can_approve=s)},null,8,["modelValue"])]),_:1})]),footer:e(()=>[t(j,{onClick:u,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[o(a(m.$t("general.cancel")),1)]),_:1}),t(P,{onClick:_,disabled:!f.value||l(c).processing,isLoading:l(c).processing},{default:e(()=>[o(a(m.$t("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},_e={class:"flex justify-start"},he={class:"capitalize"},ve={class:"flex justify-end"},$e={__name:"UserWorkspaces",props:{user:{type:Object}},setup(r){const n=b("routePrefix"),f=b("confirmation"),c=r,_=x(null),i=A({user_id:c.user.id,role:"admin",can_approve:!1}),g=s=>{i.role=s.pivot.role,i.can_approve=s.pivot.can_approve,_.value=s},u=()=>{_.value=null},m=s=>{f().title($t("team.detach_workspace")).description($t("team.detach_confirm",{workspace:s.name,user:c.user.name})).destructive().btnConfirmName($t("admin.detach")).onConfirm(k=>{k.isLoading(!0),T.delete(route(`${n}.workspaces.users.delete`,{workspace:s.uuid}),{data:{user_id:c.user.id},preserveScroll:!0,onSuccess(){k.reset()},onFinish(){k.isLoading(!1)}})}).show()},d=()=>{i.put(route(`${n}.workspaces.users.update`,{workspace:_.value.uuid}),{data:{user_id:c.user.id},preserveScroll:!0,onSuccess(){i.reset(),u()}})};return(s,k)=>{const L=oe("tooltip");return v(),w(S,null,[t(z,null,{title:e(()=>[o(a(s.$t("workspace.workspaces")),1)]),action:e(()=>[t(fe,{user:r.user,attachedWorkspaces:r.user.workspaces.map(p=>p.uuid)},null,8,["user","attachedWorkspaces"])]),default:e(()=>[r.user.workspaces.length?(v(),y(ue,{key:0},{head:e(()=>[t(W,null,{default:e(()=>[t(h,{component:"th",scope:"col"}),t(h,{component:"th",scope:"col"},{default:e(()=>[o(a(s.$t("general.name")),1)]),_:1}),t(h,{component:"th",scope:"col"},{default:e(()=>[o(a(s.$t("team.role")),1)]),_:1}),t(h,{component:"th",scope:"col"},{default:e(()=>[o(a(s.$t("team.can_approve")),1)]),_:1}),t(h,{component:"th",scope:"col"},{default:e(()=>[o(a(s.$t("team.attached_at")),1)]),_:1}),t(h,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(v(!0),w(S,null,le(r.user.workspaces,p=>(v(),y(W,{key:p.id,hoverable:!0},{default:e(()=>[t(h,{align:"left"},{default:e(()=>[$("div",_e,[t(J,{backgroundColor:p.hex_color,name:p.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])])]),_:2},1024),t(h,null,{default:e(()=>[$("div",null,a(p.name),1)]),_:2},1024),t(h,null,{default:e(()=>[t(V,null,{default:e(()=>[$("span",he,a(p.pivot.role),1)]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[p.pivot.can_approve?(v(),y(V,{key:1,variant:"info"},{default:e(()=>[o(a(s.$t("general.yes")),1)]),_:1})):(v(),y(V,{key:0},{default:e(()=>[o(a(s.$t("general.no")),1)]),_:1})),t(V)]),_:2},1024),t(h,null,{default:e(()=>[o(a(p.pivot.joined_at),1)]),_:2},1024),t(h,{align:"right"},{default:e(()=>[$("div",ve,[re((v(),y(de,{href:s.route(`${l(n)}.workspaces.view`,{workspace:p.uuid}),class:"mr-xs"},{default:e(()=>[t(ce)]),_:2},1032,["href"])),[[L,s.$t("general.view")]]),t(Z,{placement:"bottom-end"},{trigger:e(()=>[t(te)]),content:e(()=>[t(U,{onClick:F=>g(p),as:"button"},{default:e(()=>[t(O,{class:"mr-xs"}),o(" "+a(s.$t("team.edit_role")),1)]),_:2},1032,["onClick"]),t(U,{onClick:F=>m(p),as:"button"},{default:e(()=>[t(B,{class:"text-red-500 mr-xs"}),o(" "+a(s.$t("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(v(),y(ee,{key:1}))]),_:1}),t(N,{show:_.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:u},{header:e(()=>[$("div",null,[o(a(s.$t("team.edit_role_on"))+" ",1),$("strong",null,a(_.value.name),1),o(" "+a(s.$t("workspace.workspaces")),1)])]),body:e(()=>[t(E,{modelValue:l(i).role,"onUpdate:modelValue":k[0]||(k[0]=p=>l(i).role=p),class:"mt-xs"},null,8,["modelValue"]),t(D,{class:"mt-lg"},{default:e(()=>[t(R,{modelValue:l(i).can_approve,"onUpdate:modelValue":k[1]||(k[1]=p=>l(i).can_approve=p)},null,8,["modelValue"])]),_:1})]),footer:e(()=>[t(j,{onClick:u,class:"mr-xs"},{default:e(()=>[o(a(s.$t("general.cancel")),1)]),_:1}),t(P,{onClick:d,disabled:l(i).processing,isLoading:l(i).processing},{default:e(()=>[o(a(s.$t("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},ke={class:"w-full mx-auto row-py"},ge={class:"flex items-center"},ye={class:"row-px"},be={class:"md:max-w-2xl"},we={class:"mt-lg"},Ve=ne({layout:X}),kt=Object.assign(Ve,{__name:"View",props:{user:{type:Object}},setup(r){const{t:n}=I(),f=b("routePrefix"),c=b("confirmation"),_=r,i=n("user.view_user"),{notify:g}=Q(),{user:u}=H(),m=()=>{c().title(n("user.delete_users")).description(n("user.confirm_delete_user")).destructive().onConfirm(d=>{d.isLoading(!0),T.delete(route(`${f}.users.delete`,{user:_.user.id}),{onSuccess(s){s.props.flash.error||g("success",n("user.user_deleted"))},onFinish(){d.isLoading(!1)}})}).show()};return(d,s)=>(v(),w(S,null,[t(l(q),{title:l(i)},null,8,["title"]),$("div",ke,[t(Y,{title:l(i)},{description:e(()=>[o(a(r.user.name),1)]),default:e(()=>[$("div",ge,[t(l(M),{href:d.route(`${l(f)}.users.edit`,{user:r.user.id}),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[t(P,{size:"sm"},{icon:e(()=>[t(O)]),default:e(()=>[o(" "+a(l(n)("general.edit")),1)]),_:1})]),_:1},8,["href"]),l(u).id!==r.user.id?(v(),y(K,{key:0,onClick:m,size:"sm"},{icon:e(()=>[t(B)]),_:1})):ie("",!0)])]),_:1},8,["title"]),$("div",ye,[t(z,null,{title:e(()=>[o(a(l(n)("user.user_details")),1)]),default:e(()=>[$("div",be,[t(C,null,{title:e(()=>[o(a(l(n)("general.name")),1)]),default:e(()=>[o(" "+a(r.user.name),1)]),_:1}),t(C,{class:"mt-md"},{title:e(()=>[o(a(l(n)("general.email")),1)]),default:e(()=>[o(" "+a(r.user.email),1)]),_:1}),t(C,{class:"mt-md"},{title:e(()=>[o(a(l(n)("general.created_at")),1)]),default:e(()=>[o(" "+a(r.user.created_at),1)]),_:1}),t(C,{class:"mt-md"},{title:e(()=>[o(a(l(n)("user.system_admin")),1)]),default:e(()=>[o(" "+a(r.user.is_admin?l(n)("general.yes"):l(n)("general.no")),1)]),_:1})])]),_:1}),$("div",we,[t($e,{user:r.user},null,8,["user"])])])])],64))}});export{kt as default};
