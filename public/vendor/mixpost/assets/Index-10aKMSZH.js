import{u as L}from"./vue-i18n-CbxO4HOa.js";import{O,Z as U,i as z}from"./@inertiajs-D-tiTHlX.js";import{o as R,a as M,P as W}from"./app-TmpkEByR.js";import{l as h}from"./lodash-1tNnn4nO.js";import{u as q}from"./useRouter-BwU7OWYS.js";import{u as G}from"./useSelectable-B_73QrI2.js";import{_ as J}from"./PageHeader-5KlQKxZu.js";import{_ as Z}from"./Panel-C3_mBW3b.js";import{_ as P}from"./Checkbox-CdCvF_Az.js";import{T as H,a as K,_ as c}from"./TableCell-CdlC4-rl.js";import{_ as Q}from"./PureDangerButton-BpJxGdZl.js";import{_ as X}from"./SelectableBar-D8x0PjSm.js";import{_ as Y}from"./Pagination-BTQBy8Tc.js";import{_ as ee}from"./NoResult-BSD8OTcv.js";import{T as oe}from"./Trash-CGBHVq5p.js";import{_ as te}from"./WebhookItem-DSjocyDx.js";import{aJ as _,r as re,f as se,b1 as ae,w as S,b8 as ie,l as w,E as e,u as o,x as B,z as t,C as E,F as T,k as n,ak as d,A as p,G as le,y as b,aO as I,q as ce}from"./@vue-DxEuNGre.js";import"./@intlify-AYDeHhOU.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./Flex-55yEXw9x.js";import"./ChevronLeft-Cx_QtWsr.js";import"./PureButtonLink-Cm9jQ4_3.js";import"./DropdownButton-Ckgue0Zq.js";import"./EllipsisVertical-DX5Zf3Qx.js";import"./QueueList-DTZpFIOW.js";const ne={class:"w-full mx-auto row-py"},me={class:"w-full row-px mt-lg"},de={key:0,class:"mt-lg"},lo={__name:"Index",props:{filter:{type:Object,default:{}},records:{type:Object}},setup(a){const{t:s}=L(),u=a,v=_("routePrefix"),f=_("workspaceCtx"),N=_("confirmation"),{selectedRecords:m,putPageRecords:x,toggleSelectRecordsOnPage:k,deselectRecord:g,deselectAllRecords:y}=G(),{onError:V}=q(),$=re({keyword:u.filter.keyword}),C=()=>u.records.data.map(r=>r.id),j=()=>{N().title(s("webhook.delete_webhooks")).description(s("webhook.delete_webhooks_confirm")).destructive().onConfirm(r=>{D(r)}).show()},D=r=>{r.isLoading(!0),O.delete(route(`${v}.webhooks.deleteMultiple`,{workspace:f.id}),{data:{webhooks:m.value},preserveScroll:!0,onSuccess(){r.reset(),y()},onError(i){V(i,()=>{D(r)})},onFinish(){r.isLoading(!1)}})};return se(()=>{x(C()),R.on("webhookDeleted",r=>{g(r)})}),ae(()=>{R.off("webhookDeleted")}),S(()=>h.cloneDeep($.value),h.throttle(()=>{O.get(route("mixpost.webhooks.index",{workspace:f.id}),h.pickBy($.value),{preserveState:!0,only:["records","filter"]})},300)),S(()=>u.records.data,()=>{x(C())}),(r,i)=>{const A=ie("tooltip");return n(),w(T,null,[e(o(U),{title:o(s)("webhook.webhooks")},null,8,["title"]),B("div",ne,[e(J,{title:o(s)("webhook.webhooks")},{description:t(()=>[d(p(o(s)("webhook.webhooks_desc")),1)]),_:1},8,["title"]),B("div",me,[e(o(z),{href:r.route(`${o(v)}.webhooks.create`,{workspace:o(f).id})},{default:t(()=>[e(M,{size:"sm"},{icon:t(()=>[e(W)]),default:t(()=>[d(" "+p(o(s)("webhook.create_webhook")),1)]),_:1})]),_:1},8,["href"]),e(X,{count:o(m).length,onClose:o(y)},{default:t(()=>[le((n(),b(Q,{onClick:j},{default:t(()=>[e(oe)]),_:1})),[[A,o(s)("general.delete")]])]),_:1},8,["count","onClose"]),e(Z,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(H,null,{head:t(()=>[e(K,null,{default:t(()=>[e(c,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(P,{checked:o(k),"onUpdate:checked":i[0]||(i[0]=l=>I(k)?k.value=l:null),disabled:!a.records.meta.total},null,8,["checked","disabled"])]),_:1}),e(c,{component:"th",scope:"col",class:"w-10"}),e(c,{component:"th",scope:"col"},{default:t(()=>[d(p(o(s)("general.name")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[d(p(o(s)("webhook.callback_url")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[d(p(o(s)("post.status")),1)]),_:1}),e(c,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(n(!0),w(T,null,ce(a.records.data,l=>(n(),b(te,{key:l.id,item:l,onOnDelete:()=>{o(g)(l.id)}},{checkbox:t(()=>[e(P,{checked:o(m),"onUpdate:checked":i[1]||(i[1]=F=>I(m)?m.value=F:null),value:l.id},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),a.records.meta.total?E("",!0):(n(),b(ee,{key:0,class:"py-md px-md"}))]),_:1}),a.records.meta.links.length>3?(n(),w("div",de,[e(Y,{meta:a.records.meta,links:a.records.links},null,8,["meta","links"])])):E("",!0)])])],64)}}};export{lo as default};
