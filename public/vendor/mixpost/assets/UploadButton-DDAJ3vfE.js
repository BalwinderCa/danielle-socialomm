import{N as r}from"./nprogress-34pYfWsY.js";import{q as v,u as k}from"./app-DrYJbhZh.js";import{aJ as B,r as i,k as l,l as x,x as c,J as w,y as N,C as P}from"./@vue-DxEuNGre.js";const j=["accept"],D={__name:"UploadButton",props:{withPreloader:{type:Boolean,default:!0}},emits:["upload"],setup(u,{emit:f}){const p=f,m=B("routePrefix"),{notify:d}=k(),o=i(null),a=i(!1),s=["image/jpg","image/jpeg","image/gif","image/png"],g=t=>Array.from(t).filter(e=>s.includes(e.type)),y=()=>{o.value.click()},_=t=>{const e=new FormData;e.append("file",t),r.start(),a.value=!0,axios.post(route(`${m}.files.upload`),e).then(function(n){p("upload",n.data)}).catch(function(n){d("error",n)}).finally(()=>{r.done(),a.value=!1})},h=t=>{const e=g(t.target.files);e.length&&(o.value.value=null,_(e[0]))};return(t,e)=>(l(),x("div",null,[c("div",{onClick:y,role:"button",class:"inline-flex relative"},[w(t.$slots,"default"),u.withPreloader&&a.value?(l(),N(v,{key:0,opacity:75})):P("",!0)]),c("input",{ref_key:"input",ref:o,type:"file",accept:s.join(","),class:"hidden",onChange:h},null,40,j)]))}};export{D as _};
