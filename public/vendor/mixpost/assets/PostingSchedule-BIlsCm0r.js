import{i as N,T as j,Z as q}from"./@inertiajs-D-tiTHlX.js";import{u as S}from"./vue-i18n-CbxO4HOa.js";import{_ as A}from"./PageHeader-5KlQKxZu.js";import{a6 as B,a as D,X as U,O as W,J as z,c as b,d as J,u as Z}from"./app-CbUEMLPN.js";import{_ as E}from"./Panel-C3_mBW3b.js";import{W as F}from"./constants-BK-AY4Ot.js";import{u as I}from"./useSettings-zxwQ4_xc.js";import{l as P}from"./lodash-1tNnn4nO.js";import{_ as G}from"./Select-BOKsQWfr.js";import{E as H}from"./ExclamationCircle-Co8IAwQh.js";import{F as K}from"./vue-flatpickr-component-B17rGV5K.js";import"./flatpickr-BZlGG09B.js";import{_ as L}from"./Switch-DhFwAO3J.js";import{r as C,b8 as O,k as d,l as p,x as r,E as n,z as a,A as o,F as k,q as T,u as s,t as X,ak as f,G as Y,y as M,C as w,aJ as Q}from"./@vue-DxEuNGre.js";import{_ as R}from"./PureDangerButton-BpJxGdZl.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";import"./@intlify-AYDeHhOU.js";import"./Flex-55yEXw9x.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./vue-CveCyDR3.js";function ee(g,l){const _=g.querySelector(".flatpickr-hour").value,v=g.querySelector(".flatpickr-minute").value;if(l===24)return`${_}:${v}`;if(l===12){const x=g.querySelector(".flatpickr-am-pm").innerText;return B(`${_}:${v} ${x}`)}}const te={class:"flex flex-col sm:flex-row gap-sm sm:gap-0"},se={value:"everyday"},oe=["value"],ie={class:"mr-xs rtl:mr-0 rtl:ml-lg text-gray-400"},le={class:"text-sm flex items-center mt-md"},ae={class:"mr-xs rtl:mr-0 rtl:ml-xs"},re={__name:"AddPostingTime",props:["modelValue"],emits:["update:modelValue"],setup(g,{emit:l}){const _=g,v=l,{timeZone:x,timeFormat:c}=I(),m=C({day:"everyday",time:"06:30"}),y=C(),$={inline:!0,timeFormat:"H:i",noCalendar:!0,enableTime:!0,time_24hr:c===24},u=()=>{const t=P.cloneDeep(_.modelValue),e=m.value.day==="everyday";m.value.value=ee(y.value,c);const h=i=>{i.times.some(V=>V.value===m.value.time)||i.times.push({value:m.value.time})};if(e)t.forEach(h);else{const i=t.findIndex(V=>parseInt(V.id)===parseInt(m.value.day));i!==-1&&h(t[i])}v("update:modelValue",t)};return(t,e)=>{const h=O("tooltip");return d(),p(k,null,[r("div",te,[r("div",null,[n(G,{modelValue:m.value.day,"onUpdate:modelValue":e[0]||(e[0]=i=>m.value.day=i)},{default:a(()=>[r("option",se,o(t.$t("posting_schedule.everyday")),1),(d(!0),p(k,null,T(s(F),i=>(d(),p("option",{key:i.id,value:i.id},o(t.$t(`calendar.weekdays.${i.key}.full`)),9,oe))),128))]),_:1},8,["modelValue"])]),r("div",{class:X([{"sm:w-40":s(c)===12,"sm:w-56":s(c)===24},"pickTime flex items-center sm:justify-center sm:mr-lg sm:-mt-1"])},[r("div",ie,o(t.$t("general.time")),1),r("div",{class:"w-auto",ref_key:"timePicker",ref:y},[n(s(K),{modelValue:m.value.time,"onUpdate:modelValue":e[1]||(e[1]=i=>m.value.time=i),config:$},null,8,["modelValue"])],512)],2),r("div",null,[n(D,{onClick:u},{default:a(()=>[f(o(t.$t("posting_schedule.add_post_time")),1)]),_:1})])]),r("div",le,[r("div",ae,o(s(x)),1),Y((d(),M(s(N),{href:t.route("mixpost.profile.index")},{default:a(()=>[n(H,{class:"!w-4 !h-4"})]),_:1},8,["href"])),[[h,t.$t("posting_schedule.posting_times_determined")]])])],64)}}},ne={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-xs"},me={class:"font-medium text-center"},ue={class:"flex justify-center mt-xs"},ce={class:"mr-xs"},de={key:0},pe={key:1},_e={class:"flex flex-col justify-center mt-xs mx-auto"},fe={key:0,class:"text-gray-500 text-sm text-center"},ge={class:"flex absolute right-0 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-200"},ve={__name:"PostingTimes",props:{times:{type:Array,default:[]}},emits:["update"],setup(g,{emit:l}){const{t:_}=S(),v=g,{timeFormat:x}=I(),c=u=>{const t=F.find(e=>e.id===u);return t?_(`calendar.weekdays.${t.key}.full`):null},m=u=>P.sortBy(u.times,[e=>e.value]).map(e=>({originalValue:e.value,formatValue:y(e.value)})),y=u=>x===12?W(u,"hh:mm aaa"):u,$=(u,t)=>{const e=v.times[u].times.findIndex(h=>h.value===t);v.times[u].times.splice(e,1)};return(u,t)=>(d(),p("div",ne,[(d(!0),p(k,null,T(g.times,(e,h)=>(d(),p("div",{key:e.id,class:"flex flex-col border border-gray-300 rounded-lg p-xs"},[r("div",me,o(c(e.id)),1),r("div",ue,[n(L,{modelValue:e.status,"onUpdate:modelValue":i=>e.status=i},{default:a(()=>[r("span",ce,[e.status?(d(),p("span",de,o(s(_)("general.on")),1)):w("",!0),e.status?w("",!0):(d(),p("span",pe,o(s(_)("general.off")),1))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),r("div",_e,[e.times.length?w("",!0):(d(),p("span",fe,o(s(_)("general.empty")),1)),e.times.length?(d(!0),p(k,{key:1},T(m(e),i=>(d(),p("div",{key:i.value,class:"relative flex items-center justify-between px-lg py-xs group text-gray-500 text-sm"},[r("span",null,o(i.formatValue.split(":")[0]),1),t[0]||(t[0]=r("span",null,":",-1)),r("span",null,o(i.formatValue.split(":")[1]),1),r("span",ge,[n(R,{onClick:V=>$(h,i.originalValue)},{default:a(()=>[n(U,{class:"!w-5 !-5"})]),_:2},1032,["onClick"])])]))),128)):w("",!0)])]))),128))]))}},he={class:"w-full mx-auto row-py"},xe={class:"w-full row-px"},mt={__name:"PostingSchedule",props:{times:{required:!0,type:Array}},setup(g){const{t:l}=S(),_=Q("workspaceCtx"),v=g,{notify:x}=Z(),c=j({times:v.times}),m=C(!1),y=()=>{c.times.forEach(u=>{u.times=[]}),m.value=!1},$=()=>{c.put(route("mixpost.postingSchedule.update",{workspace:_.id}),{preserveScroll:!0,onSuccess(){x("success",l("posting_schedule.posting_times_updated"))}})};return(u,t)=>(d(),p(k,null,[n(s(q),{title:s(l)("posting_schedule.posting_schedule")},null,8,["title"]),r("div",he,[n(A,{title:s(l)("posting_schedule.posting_schedule")},{description:a(()=>[f(o(s(l)("posting_schedule.send_posting_schedule")),1)]),_:1},8,["title"]),r("div",xe,[n(E,null,{title:a(()=>[f(o(s(l)("posting_schedule.add_new_posting_time")),1)]),default:a(()=>[n(re,{modelValue:s(c).times,"onUpdate:modelValue":t[0]||(t[0]=e=>s(c).times=e)},null,8,["modelValue"])]),_:1}),n(E,{class:"mt-lg"},{title:a(()=>[f(o(s(l)("posting_schedule.posting_times")),1)]),description:a(()=>[f(o(s(l)("posting_schedule.send_posting_schedule")),1)]),action:a(()=>[n(b,{onClick:t[1]||(t[1]=e=>m.value=!0)},{default:a(()=>[f(o(s(l)("posting_schedule.clear_all_posting_times")),1)]),_:1})]),default:a(()=>[n(ve,{times:s(c).times},null,8,["times"])]),_:1}),n(D,{onClick:$,disabled:s(c).processing,class:"mt-md"},{default:a(()=>[f(o(s(l)("posting_schedule.update_posting_times")),1)]),_:1},8,["disabled"])])]),n(z,{show:m.value,variant:"danger",onClose:t[3]||(t[3]=e=>m.value=!1)},{header:a(()=>[f(o(s(l)("posting_schedule.clear_all_posting_times")),1)]),body:a(()=>[f(o(s(l)("posting_schedule.confirmation_posting_times")),1)]),footer:a(()=>[n(b,{onClick:t[2]||(t[2]=e=>m.value=!1),class:"mr-xs"},{default:a(()=>[f(o(s(l)("general.cancel")),1)]),_:1}),n(J,{onClick:y},{default:a(()=>[f(o(s(l)("general.delete")),1)]),_:1})]),_:1},8,["show"])],64))}};export{mt as default};
