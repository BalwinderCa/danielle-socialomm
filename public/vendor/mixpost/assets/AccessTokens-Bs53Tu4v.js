import{u as N}from"./vue-i18n-CbxO4HOa.js";import{O as S,Z as W}from"./@inertiajs-D-tiTHlX.js";import{o as P,A as X,a as A,e as L,h as O,c as Y,i as R}from"./app-D31ITXvg.js";import{u as ee}from"./useSelectable-B_73QrI2.js";import{_ as te}from"./Minimal-BvRcEkdf.js";import{_ as oe}from"./PageHeader-5KlQKxZu.js";import{_ as M}from"./Flex-55yEXw9x.js";import{T as q}from"./Trash-CGBHVq5p.js";import{_ as J}from"./PureDangerButton-BpJxGdZl.js";import{_ as se}from"./SelectableBar-DKxoDYKy.js";import{_ as ae}from"./Panel-C3_mBW3b.js";import{_ as f,a as z,T as ne}from"./TableCell-CdlC4-rl.js";import{_ as F}from"./Checkbox-CdCvF_Az.js";import{_ as re}from"./NoResult-yipdih8U.js";import{u as G}from"./useRouter-B_wMJENS.js";import{aJ as V,b8 as H,k as p,y as w,z as e,E as t,J as le,ak as r,A as s,u as o,G as Z,r as U,l as T,x as $,C as D,F as E,f as ie,w as ce,d as me,aO as I,q as de}from"./@vue-DxEuNGre.js";import{u as ue}from"./useAPIForm-Cr7Lz7eJ.js";import{_ as j}from"./VerticalGroup-0ogbRp0b.js";import{_ as B}from"./LabelSuffix-Di2RYCr8.js";import{_ as fe}from"./Alert-lYxJ5q5b.js";import{_ as pe}from"./Select-BOKsQWfr.js";import{_ as _e}from"./ClipboardCard-C1vw5u4q.js";import{_ as ke}from"./SuccessButton-BZloKVV-.js";import{_ as $e}from"./Pagination-BTQBy8Tc.js";import{_ as ve}from"./BackToDashboardButton-BkGlplja.js";import"./@intlify-AYDeHhOU.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./lodash-1tNnn4nO.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./ClipboardButton-DJRPtjz7.js";import"./Clipboard-szG3aGAU.js";import"./ChevronLeft-Cx_QtWsr.js";import"./ArrowLeft-BKyFr17y.js";const he={__name:"TokenItem",props:{item:{type:Object,required:!0}},setup(c){const{t:l}=N(),g=V("routePrefix"),C=V("confirmation"),v=c,{onError:m}=G(),a=()=>{C().title(l("access_token.delete")).description(l("access_token.delete_confirm")).destructive().onConfirm(d=>{h(d)}).show()},h=d=>{d.isLoading(!0),S.delete(route(`${g}.profile.accessTokens.delete`,{token:v.item.id}),{onSuccess(){d.reset(),P.emit("tokenDelete",v.item.id)},onError(y){m(y,()=>{h(d)})},onFinish(){d.isLoading(!1)}})};return(d,y)=>{const x=H("tooltip");return p(),w(z,{hoverable:!0},{default:e(()=>[t(f,{class:"w-10"},{default:e(()=>[le(d.$slots,"checkbox")]),_:3}),t(f,null,{default:e(()=>[r(s(c.item.name),1)]),_:1}),t(f,null,{default:e(()=>[r(s(c.item.last_used_at?c.item.last_used_at:o(l)("access_token.never_used")),1)]),_:1}),t(f,null,{default:e(()=>[r(s(c.item.expires_at),1)]),_:1}),t(f,null,{default:e(()=>[r(s(c.item.created_at),1)]),_:1}),t(f,null,{default:e(()=>[Z((p(),w(J,{onClick:a},{default:e(()=>[t(q,{class:"!w-5 !h-5"})]),_:1})),[[x,o(l)("general.delete")]])]),_:1})]),_:3})}}},ge={for:"token_name"},ye={for:"expiration"},xe={value:"days-7"},be={value:"days-30"},Ce={value:"days-60"},we={value:"days-90"},Te={value:"never-expires"},Ve={value:"custom"},Se={__name:"CreateUserToken",emits:["added"],setup(c,{emit:l}){const g=V("routePrefix"),C=l,v=U(!1),m=U(""),a=ue({name:"",expiration:"days-7",expires_at:""}),h=()=>{v.value=!0},d=()=>{v.value=!1,a.reset(),a.clearErrors()},{onCatch:y}=X(),x=()=>{a.post(route(`${g}.profile.accessTokens.store`),{onSuccess(n){d(),a.reset(),m.value=n.plain_text_token,C("added")},onError(n){y(n,x)}})};return(n,i)=>(p(),T(E,null,[t(A,{onClick:h},{default:e(()=>[r(s(n.$t("access_token.create")),1)]),_:1}),t(R,{show:v.value,"max-width":"md",closeable:!0,"scrollable-body":!0,onClose:d},{header:e(()=>[r(s(n.$t("access_token.create")),1)]),body:e(()=>[t(j,null,{title:e(()=>[$("label",ge,[r(s(n.$t("general.name"))+" ",1),t(B,{danger:!0},{default:e(()=>i[5]||(i[5]=[r("*")])),_:1})])]),footer:e(()=>[t(L,{message:o(a).errors.name},null,8,["message"])]),default:e(()=>[t(O,{type:"text",modelValue:o(a).name,"onUpdate:modelValue":i[0]||(i[0]=_=>o(a).name=_),error:o(a).errors.name!==void 0,id:"token_name",placeholder:n.$t("access_token.name_placeholder")},null,8,["modelValue","error","placeholder"])]),_:1}),t(j,{class:"mt-lg"},{title:e(()=>[$("label",ye,[r(s(n.$t("access_token.expiration"))+" ",1),t(B,{danger:!0},{default:e(()=>i[6]||(i[6]=[r("*")])),_:1})])]),footer:e(()=>[t(L,{message:o(a).errors.expiration},null,8,["message"]),t(L,{message:o(a).errors.expires_at},null,8,["message"])]),default:e(()=>[t(M,{class:"w-full"},{default:e(()=>[t(pe,{modelValue:o(a).expiration,"onUpdate:modelValue":i[1]||(i[1]=_=>o(a).expiration=_),error:o(a).errors.expiration!==void 0,id:"expiration"},{default:e(()=>[$("option",xe,s(n.$t("calendar.days",{count:7})),1),$("option",be,s(n.$t("calendar.days",{count:30})),1),$("option",Ce,s(n.$t("calendar.days",{count:60})),1),$("option",we,s(n.$t("calendar.days",{count:90})),1),$("option",Te,s(n.$t("access_token.never_expires")),1),$("option",Ve,s(n.$t("general.custom")),1)]),_:1},8,["modelValue","error"]),o(a).expiration==="custom"?(p(),w(O,{key:0,type:"date",modelValue:o(a).expires_at,"onUpdate:modelValue":i[2]||(i[2]=_=>o(a).expires_at=_),error:o(a).errors.expires_at,id:"expiration"},null,8,["modelValue","error"])):D("",!0)]),_:1})]),_:1})]),footer:e(()=>[t(Y,{onClick:d,class:"mr-xs"},{default:e(()=>[r(s(n.$t("general.cancel")),1)]),_:1}),t(A,{onClick:x,disabled:o(a).processing,isLoading:o(a).processing},{default:e(()=>[r(s(n.$t("general.create")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"]),t(R,{show:m.value!=="","max-width":"xl",closeable:!0,"scrollable-body":!0,onClose:i[4]||(i[4]=_=>m.value="")},{header:e(()=>[r(s(n.$t("access_token.create")),1)]),body:e(()=>[m.value?(p(),T(E,{key:0},[t(fe,{variant:"warning",closeable:!1},{default:e(()=>[r(s(n.$t("access_token.copy_token")),1)]),_:1}),t(_e,{class:"mt-lg"},{default:e(()=>[r(s(m.value),1)]),_:1})],64)):D("",!0)]),footer:e(()=>[t(ke,{onClick:i[3]||(i[3]=_=>m.value="")},{default:e(()=>[r(s(n.$t("system.stored_safely")),1)]),_:1})]),_:1},8,["show"])],64))}},De={class:"row-py w-full mx-auto !pt-0"},Ee={key:0,class:"mt-lg"},Le=me({layout:te}),Ot=Object.assign(Le,{__name:"AccessTokens",props:["tokens"],setup(c){const{t:l}=N(),g=c,C=V("routePrefix"),v=V("confirmation"),{selectedRecords:m,putPageRecords:a,toggleSelectRecordsOnPage:h,deselectRecord:d,deselectAllRecords:y}=ee(),x=()=>g.tokens.data.map(u=>u.id);ie(()=>{a(x()),P.on("tokenDelete",u=>{d(u)})}),ce(()=>g.tokens.data,()=>{a(x())});const{onError:n}=G(),i=()=>{v().title(l("access_token.delete_items")).description(l("access_token.delete_items_confirm")).destructive().onConfirm(u=>{u.isLoading(!0),S.delete(route(`${C}.profile.accessTokens.deleteMultiple`),{data:{tokens:m.value},preserveScroll:!0,onSuccess(){u.reset(),y()},onError(k){n(k,()=>{_(u)})},onFinish(){u.isLoading(!1)}})}).show()},_=u=>{u.isLoading(!0),S.delete(route(`${C}.profile.accessTokens.deleteMultiple`),{data:{tokens:m.value},preserveScroll:!0,onSuccess(){u.reset(),P.emit("tokenDelete",g.item.id)},onError(k){n(k,()=>{_(u)})},onFinish(){u.isLoading(!1)}})};return(u,k)=>{const K=H("tooltip");return p(),T(E,null,[t(o(W),{title:o(l)("access_token.access_tokens")},null,8,["title"]),t(oe,{title:o(l)("access_token.access_tokens"),class:"!px-0"},{description:e(()=>[r(s(o(l)("access_token.desc")),1)]),default:e(()=>[t(ve)]),_:1},8,["title"]),$("div",De,[t(se,{count:o(m).length,onClose:o(y)},{default:e(()=>[Z((p(),w(J,{onClick:i},{default:e(()=>[t(q)]),_:1})),[[K,o(l)("general.delete")]])]),_:1},8,["count","onClose"]),t(M,null,{default:e(()=>[t(Se,{onAdded:k[0]||(k[0]=b=>o(S).get(u.route("mixpost.profile.accessTokens.index"),{},{only:["tokens"],preserveState:!0,preserveScroll:!0}))})]),_:1}),t(ae,{"with-padding":!1,class:"mt-lg"},{default:e(()=>[t(ne,null,{head:e(()=>[t(z,null,{default:e(()=>[t(f,{component:"th",scope:"col",class:"w-10"},{default:e(()=>[t(F,{checked:o(h),"onUpdate:checked":k[1]||(k[1]=b=>I(h)?h.value=b:null),disabled:!c.tokens.data.length},null,8,["checked","disabled"])]),_:1}),t(f,{component:"th",scope:"col"},{default:e(()=>[r(s(o(l)("general.name")),1)]),_:1}),t(f,{component:"th",scope:"col"},{default:e(()=>[r(s(o(l)("access_token.last_usage")),1)]),_:1}),t(f,{component:"th",scope:"col"},{default:e(()=>[r(s(o(l)("access_token.expires_at")),1)]),_:1}),t(f,{component:"th",scope:"col"},{default:e(()=>[r(s(o(l)("general.created_at")),1)]),_:1}),t(f,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(p(!0),T(E,null,de(c.tokens.data,b=>(p(),w(he,{key:b.id,item:b,onOnDelete:()=>{o(d)(b.id)}},{checkbox:e(()=>[t(F,{checked:o(m),"onUpdate:checked":k[2]||(k[2]=Q=>I(m)?m.value=Q:null),value:b.id},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),c.tokens.data.length?D("",!0):(p(),w(re,{key:0,class:"p-md"},{default:e(()=>[r(s(o(l)("access_token.no_result")),1)]),_:1}))]),_:1}),c.tokens.meta.links.length>3?(p(),T("div",Ee,[t($e,{meta:c.tokens.meta,links:c.tokens.links},null,8,["meta","links"])])):D("",!0)])],64)}}});export{Ot as default};
