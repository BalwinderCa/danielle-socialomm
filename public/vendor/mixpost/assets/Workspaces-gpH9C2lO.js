import{O as S,Z as X,i as Y}from"./@inertiajs-D-tiTHlX.js";import{u as L}from"./vue-i18n-CbxO4HOa.js";import{l as V}from"./lodash-1tNnn4nO.js";import{p as ee,j as W,m as te,k as oe,o as E,u as M,r as q,b as se,a as re}from"./app-CbUEMLPN.js";import{u as ae}from"./useSelectable-B_73QrI2.js";import{_ as le}from"./Admin-Yg1XezNh.js";import{_ as ne}from"./PageHeader-5KlQKxZu.js";import{_ as ie}from"./PureDangerButton-BpJxGdZl.js";import{_ as ce}from"./Panel-C3_mBW3b.js";import{_ as A}from"./Checkbox-CdCvF_Az.js";import{_ as c,a as z,T as me}from"./TableCell-CdlC4-rl.js";import{_ as ue}from"./SelectableBar-B5YIaSuG.js";import{_ as pe}from"./NoResult-CBoUxwWZ.js";import{T as J}from"./Trash-CGBHVq5p.js";import{_ as de}from"./Pagination-BTQBy8Tc.js";import{_ as B}from"./PureButtonLink-Cm9jQ4_3.js";import{E as fe}from"./Eye-Bm2KpbsG.js";import{_ as _e}from"./DropdownButton-BbrhX0gq.js";import{A as ke}from"./ArrowTopRightOnSquare-BBcEejN-.js";import{aJ as j,r as G,b8 as T,k as a,l as g,x as y,G as D,u as o,y as h,z as t,E as e,ak as p,A as d,b as P,J as we,F as R,q as Z,t as he,C as x,f as ge,b1 as $e,w as F,d as ve,aO as N}from"./@vue-DxEuNGre.js";import{_ as be}from"./SearchInput-Dj1Ll7ir.js";import{_ as ye}from"./Alert-Bclh1Zq3.js";import{_ as xe}from"./Flex-55yEXw9x.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";import"./@intlify-AYDeHhOU.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./QueueList-DTZpFIOW.js";import"./ChevronLeft-Cx_QtWsr.js";import"./EllipsisVertical-DX5Zf3Qx.js";const Ce={class:"flex flex-row items-center justify-end gap-xs"},Ie={__name:"WorkspaceItemAction",props:{itemId:{type:String,required:!0}},emits:["onDelete"],setup(s,{emit:r}){const{t:l}=L(),i=j("routePrefix"),_=j("confirmation"),$=s,v=r,{notify:k}=M();ee();const f=G(!1),C=()=>{_().title(l("workspace.delete_workspace")).description(l("workspace.confirm_delete_workspace")).destructive().onConfirm(m=>{m.isLoading(!0),S.delete(route(`${i}.workspaces.delete`,{workspace:$.itemId}),{onSuccess(){f.value=!1,k("success",l("workspace.workspace_deleted")),v("onDelete"),E.emit("workspaceDelete",$.itemId),m.reset()},onFinish(){m.isLoading(!1)}})}).show()};return(m,O)=>{const b=T("tooltip");return a(),g("div",null,[y("div",Ce,[D((a(),h(B,{href:m.route("mixpost.switchWorkspace",{workspace:s.itemId,redirect:!0}),method:"post",as:"button",type:"button"},{default:t(()=>[e(ke)]),_:1},8,["href"])),[[b,o(l)("general.open")]]),D((a(),h(B,{href:m.route(`${o(i)}.workspaces.view`,{workspace:s.itemId})},{default:t(()=>[e(fe)]),_:1},8,["href"])),[[b,o(l)("general.view")]]),e(oe,{placement:"bottom-end"},{trigger:t(()=>[e(_e)]),content:t(()=>[e(W,{href:m.route(`${o(i)}.workspaces.edit`,{workspace:s.itemId})},{icon:t(()=>[e(te)]),default:t(()=>[p(" "+d(o(l)("general.edit")),1)]),_:1},8,["href"]),e(W,{onClick:C,as:"button"},{icon:t(()=>[e(J,{class:"text-red-500"})]),default:t(()=>[p(" "+d(o(l)("general.delete")),1)]),_:1})]),_:1})])])}}},Ve={key:0,class:"flex justify-start"},je={key:0,class:"mt-xs"},De={__name:"WorkspaceItem",props:{item:{type:Object,required:!0}},setup(s){const r=s,l=P(()=>V.sortBy(r.item.users.slice(0,3),"pivot.joined_at")),i=P(()=>r.item.users.slice(3).length);return(_,$)=>{const v=T("tooltip");return a(),h(z,{hoverable:!0},{default:t(()=>[e(c,{class:"w-10"},{default:t(()=>[we(_.$slots,"checkbox")]),_:3}),e(c,null,{default:t(()=>[e(q,{backgroundColor:s.item.hex_color,name:s.item.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])]),_:1}),e(c,null,{default:t(()=>[y("div",null,d(s.item.name),1)]),_:1}),e(c,null,{default:t(()=>[p(d(s.item.created_at),1)]),_:1}),e(c,null,{default:t(()=>[s.item.users.length?(a(),g("div",Ve,[(a(!0),g(R,null,Z(l.value,(k,f)=>D((a(),h(q,{key:k.id,name:k.name,class:he([{"-ml-6":f>0},"cursor-default mr-xs last:mr-xs"])},null,8,["name","class"])),[[v,k.name]])),128)),i.value?(a(),g("div",je," +"+d(i.value),1)):x("",!0)])):x("",!0)]),_:1}),e(c,null,{default:t(()=>[e(Ie,{itemId:s.item.uuid},null,8,["itemId"])]),_:1})]),_:3})}}},Oe={class:"flex items-center"},Se={__name:"Filters",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(s,{emit:r}){return P(()=>0),(l,i)=>(a(),g("div",Oe,[e(be,{modelValue:s.modelValue.keyword,"onUpdate:modelValue":i[0]||(i[0]=_=>s.modelValue.keyword=_),placeholder:l.$t("general.search")},null,8,["modelValue","placeholder"])]))}},Ee={class:"w-full mx-auto row-py"},Pe={class:"mt-lg row-px w-full"},Re=["href"],Te={key:1,class:"mt-lg"},Ue=ve({layout:le}),Tt=Object.assign(Ue,{__name:"Workspaces",props:{workspaces:{type:Object},filter:{type:Object,default:{}}},setup(s){const{t:r}=L(),l=j("routePrefix"),i=s,_=r("workspace.workspaces"),$=j("confirmation"),{notify:v}=M(),{enterpriseConsole:k}=se(),{selectedRecords:f,putPageRecords:C,toggleSelectRecordsOnPage:m,deselectRecord:O,deselectAllRecords:b}=ae(),U=()=>i.workspaces.data.map(n=>n.uuid),I=G({keyword:i.filter.keyword});ge(()=>{C(U()),E.on("workspaceDelete",n=>{O(n)})}),$e(()=>{E.off("workspaceDelete")}),F(()=>i.workspaces.data,()=>{C(U())}),F(()=>V.cloneDeep(I.value),V.throttle(()=>{S.get(route(`${l}.workspaces.index`),V.pickBy(I.value),{preserveState:!0,only:["workspaces","filter"]})},300));const H=()=>{$().title(r("workspace.delete_workspaces")).description(r("workspace.confirm_delete_workspaces")).destructive().onConfirm(n=>{n.isLoading(!0),S.delete(route(`${l}.workspaces.deleteMultiple`),{data:{workspaces:f.value},preserveScroll:!0,onSuccess(){b(),v("success",r("workspace.workspaces_deleted"))},onFinish(){n.reset()}})}).show()};return(n,u)=>{const K=T("tooltip");return a(),g(R,null,[e(o(X),{title:o(_)},null,8,["title"]),y("div",Ee,[e(ne,{title:o(_)},{description:t(()=>[p(d(o(r)("workspace.manage_brands_businesses")),1)]),_:1},8,["title"]),y("div",Pe,[e(ue,{count:o(f).length,onClose:o(b)},{default:t(()=>[D((a(),h(ie,{onClick:H},{default:t(()=>[e(J)]),_:1})),[[K,o(r)("general.delete")]])]),_:1},8,["count","onClose"]),o(k).url?(a(),h(ye,{key:0,variant:"warning",closeable:!1,class:"mb-lg"},{default:t(()=>[u[3]||(u[3]=p(" Manage Workspaces from the ")),y("a",{href:`${o(k).url}/workspaces`,class:"link"},"Enterprise Console",8,Re),u[4]||(u[4]=p(" for more business actions. "))]),_:1})):x("",!0),e(xe,{class:"justify-between"},{default:t(()=>[e(o(Y),{href:n.route(`${o(l)}.workspaces.create`),class:"mb-xs sm:mb-0"},{default:t(()=>[e(re,null,{default:t(()=>[p(d(o(r)("workspace.create_workspace")),1)]),_:1})]),_:1},8,["href"]),e(Se,{modelValue:I.value,"onUpdate:modelValue":u[0]||(u[0]=w=>I.value=w)},null,8,["modelValue"])]),_:1}),e(ce,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(me,null,{head:t(()=>[e(z,null,{default:t(()=>[e(c,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(A,{checked:o(m),"onUpdate:checked":u[1]||(u[1]=w=>N(m)?m.value=w:null),disabled:!n.$page.props.workspaces.meta.total},null,8,["checked","disabled"])]),_:1}),e(c,{component:"th",scope:"col"}),e(c,{component:"th",scope:"col"},{default:t(()=>[p(d(o(r)("general.name")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[p(d(o(r)("general.created_at")),1)]),_:1}),e(c,{component:"th",scope:"col"},{default:t(()=>[p(d(o(r)("user.users")),1)]),_:1}),e(c,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(a(!0),g(R,null,Z(n.$page.props.workspaces.data,w=>(a(),h(De,{key:w.uuid,item:w,onOnDelete:()=>{o(O)(w.uuid)}},{checkbox:t(()=>[e(A,{checked:o(f),"onUpdate:checked":u[2]||(u[2]=Q=>N(f)?f.value=Q:null),value:w.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),n.$page.props.workspaces.meta.total?x("",!0):(a(),h(pe,{key:0,table:""}))]),_:1}),n.$page.props.workspaces.meta.links.length>3?(a(),g("div",Te,[e(de,{meta:n.$page.props.workspaces.meta,links:n.$page.props.workspaces.links},null,8,["meta","links"])])):x("",!0)])])],64)}}});export{Tt as default};
