import{u as P}from"./vue-i18n-CbxO4HOa.js";import{O as w}from"./@inertiajs-D-tiTHlX.js";import{N as d}from"./nprogress-34pYfWsY.js";import{_ as y,e as k,g as B,a as N,u as V}from"./app-CbUEMLPN.js";import{_ as h}from"./Panel-C3_mBW3b.js";import{_ as S}from"./ReadDocHelp-CaBa2-a6.js";import{_ as C}from"./InputHidden-BIq9Czpm.js";import{_ as K}from"./Checkbox-CdCvF_Az.js";import{_ as O}from"./Flex-55yEXw9x.js";import{_ as j}from"./Label-DG40Yk9a.js";import{_ as E}from"./LabelSuffix-Di2RYCr8.js";import{_ as G}from"./ProviderIcon-2Uv5mSMq.js";import{aJ as g,r as L,k as U,y as q,z as t,x as l,E as r,ak as s,A as c,u as f}from"./@vue-DxEuNGre.js";import"./@intlify-AYDeHhOU.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./lodash-1tNnn4nO.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./Admin-Yg1XezNh.js";import"./QueueList-DTZpFIOW.js";import"./Eye-Bm2KpbsG.js";const z={class:"flex items-center"},A={class:"mr-xs"},D={for:"private_key"},Ce={__name:"BlueskyServiceForm",props:{form:{required:!0,type:Object}},setup(i){const{t:a}=P(),u=g("routePrefix"),$=g("confirmation"),p=i,{notify:_}=V(),n=L({}),x=async()=>{if(!p.form.configuration.private_key){await v();return}$().title("Generate new private key").description(a("page.are_you_sure")).onConfirm(async o=>{o.isLoading(!0),v().then(()=>{o.isLoading(!1),o.close()})}).show()},v=()=>new Promise((o,e)=>{d.start(),axios.post(route(`${u}.services.generateBlueskyPrivateKey`)).then(m=>{p.form.configuration.private_key=m.data.private_key,_("success","New private key generated.<br/> Please save the form to apply the changes."),o()}).catch(e).finally(()=>d.done())}),b=()=>{n.value={},w.put(route(`${u}.services.update`,{service:"bluesky"}),p.form,{preserveScroll:!0,onSuccess(){_("success",a("service.service_saved",{service:"Bluesky"}))},onError:o=>{n.value=o}})};return(o,e)=>(U(),q(h,{class:"mt-lg"},{title:t(()=>[l("div",z,[l("span",A,[r(G,{provider:"bluesky"})]),e[2]||(e[2]=l("span",null,"Bluesky",-1))])]),description:t(()=>[r(S,{href:`${o.$page.props.mixpost.docs_link}/services/social/bluesky/`},null,8,["href"])]),default:t(()=>[r(y,{class:"mt-lg"},{title:t(()=>[l("label",D,[e[4]||(e[4]=s("Private Key ")),r(E,{danger:""},{default:t(()=>e[3]||(e[3]=[s("*")])),_:1})])]),footer:t(()=>[r(k,{message:n.value["configuration.private_key"]},null,8,["message"])]),default:t(()=>[l("div",null,[r(C,{modelValue:i.form.configuration.private_key,"onUpdate:modelValue":e[0]||(e[0]=m=>i.form.configuration.private_key=m),error:n.value["configuration.private_key"]!==void 0,disabled:!0,id:"private_key",class:"mb-xs",autocomplete:"off"},null,8,["modelValue","error"]),r(B,{onClick:x,linkStyle:!0},{default:t(()=>e[5]||(e[5]=[s("Generate new private key")])),_:1})])]),_:1}),r(y,{class:"mt-lg"},{title:t(()=>[s(c(f(a)("general.status")),1)]),footer:t(()=>[r(k,{message:n.value.active},null,8,["message"])]),default:t(()=>[r(O,{responsive:!1,class:"items-center"},{default:t(()=>[r(K,{checked:i.form.active,"onUpdate:checked":e[1]||(e[1]=m=>i.form.active=m),id:"active"},null,8,["checked"]),r(j,{for:"active",class:"!mb-0"},{default:t(()=>[s(c(f(a)("general.active")),1)]),_:1})]),_:1})]),_:1}),r(N,{onClick:b,class:"mt-lg"},{default:t(()=>[s(c(f(a)("general.save")),1)]),_:1})]),_:1}))}};export{Ce as default};
