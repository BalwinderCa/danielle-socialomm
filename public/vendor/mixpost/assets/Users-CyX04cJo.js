import{O as C,Z as H,i as K}from"./@inertiajs-D-tiTHlX.js";import{u as B}from"./vue-i18n-CbxO4HOa.js";import{l as j}from"./lodash-1tNnn4nO.js";import{_ as Q}from"./Admin-o6pkSENG.js";import{p as E,j as P,m as W,k as X,o as U,r as Y,n as ee,a as te,u as se}from"./app-D31ITXvg.js";import{u as re}from"./useSelectable-B_73QrI2.js";import{_ as oe}from"./PageHeader-5KlQKxZu.js";import{_ as ae}from"./PureDangerButton-BpJxGdZl.js";import{_ as le}from"./Panel-C3_mBW3b.js";import{_ as N}from"./Checkbox-CdCvF_Az.js";import{_ as l,a as F,T as ie}from"./TableCell-CdlC4-rl.js";import{_ as ne}from"./PureButtonLink-Cm9jQ4_3.js";import{E as me}from"./Eye-Bm2KpbsG.js";import{T as A}from"./Trash-CGBHVq5p.js";import{_ as ue}from"./DropdownButton-D5nu-jVK.js";import{aJ as x,r as L,b8 as J,k as i,l as k,x as I,G as M,u as s,y as p,z as t,E as e,ak as d,A as n,C as V,J as ce,b as de,f as fe,b1 as _e,w as R,F as T,d as pe,aO as q,q as he}from"./@vue-DxEuNGre.js";import{_ as $e}from"./SelectableBar-DKxoDYKy.js";import{_ as ke}from"./NoResult-yipdih8U.js";import{_ as ve}from"./Pagination-BTQBy8Tc.js";import{_ as be}from"./SearchInput-C6so_1kI.js";import{_ as ge}from"./Flex-55yEXw9x.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";import"./@intlify-AYDeHhOU.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./QueueList-DTZpFIOW.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./EllipsisVertical-DX5Zf3Qx.js";import"./ChevronLeft-Cx_QtWsr.js";const ye={class:"flex flex-row items-center justify-end gap-xs"},we={__name:"UserItemAction",props:{itemId:{type:Number,required:!0}},emits:["onDelete"],setup(r,{emit:o}){const{t:a}=B(),m=x("routePrefix"),h=x("confirmation"),v=r,D=o,{user:b}=E(),_=L(!1),g=()=>{h().title(a("user.delete_user")).description(a("user.confirm_delete_user")).destructive().onConfirm(u=>{u.isLoading(!0),C.delete(route(`${m}.users.delete`,{user:v.itemId}),{onSuccess(){_.value=!1,D("onDelete"),U.emit("userDelete",v.itemId),u.reset()},onFinish(){u.close()}})}).show()};return(u,O)=>{const y=J("tooltip");return i(),k("div",null,[I("div",ye,[M((i(),p(ne,{href:u.route(`${s(m)}.users.view`,{user:r.itemId})},{default:t(()=>[e(me)]),_:1},8,["href"])),[[y,s(a)("general.view")]]),e(X,{placement:"bottom-end"},{trigger:t(()=>[e(ue)]),content:t(()=>[e(P,{href:u.route(`${s(m)}.users.edit`,{user:r.itemId})},{icon:t(()=>[e(W)]),default:t(()=>[d(" "+n(s(a)("general.edit")),1)]),_:1},8,["href"]),s(b).id!==r.itemId?(i(),p(P,{key:0,onClick:g,as:"button"},{icon:t(()=>[e(A,{class:"text-red-500"})]),default:t(()=>[d(" "+n(s(a)("general.delete")),1)]),_:1})):V("",!0)]),_:1})])])}}},xe={__name:"UserItem",props:{item:{type:Object,required:!0}},setup(r){return(o,a)=>(i(),p(F,{hoverable:!0},{default:t(()=>[e(l,{class:"w-10"},{default:t(()=>[ce(o.$slots,"checkbox")]),_:3}),e(l,null,{default:t(()=>[e(Y,{name:r.item.name},null,8,["name"])]),_:1}),e(l,null,{default:t(()=>[I("div",null,n(r.item.name),1),r.item.is_admin?(i(),p(ee,{key:0,class:"mt-xs"},{default:t(()=>[d(n(o.$t("user.system_admin")),1)]),_:1})):V("",!0)]),_:1}),e(l,null,{default:t(()=>[d(n(r.item.email),1)]),_:1}),e(l,null,{default:t(()=>[d(n(r.item.created_at),1)]),_:1}),e(l,null,{default:t(()=>[e(we,{itemId:r.item.id},null,8,["itemId"])]),_:1})]),_:3}))}},Ie={class:"flex items-center"},Ve={__name:"Filters",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(r,{emit:o}){return de(()=>0),(a,m)=>(i(),k("div",Ie,[e(be,{modelValue:r.modelValue.keyword,"onUpdate:modelValue":m[0]||(m[0]=h=>r.modelValue.keyword=h),placeholder:a.$t("general.search")},null,8,["modelValue","placeholder"])]))}},De={class:"w-full mx-auto row-py"},Oe={class:"mt-lg row-px w-full"},je={key:0,class:"mt-lg"},Ce=pe({layout:Q}),Dt=Object.assign(Ce,{__name:"Users",props:{users:{type:Object},filter:{type:Object,default:{}}},setup(r){const{t:o}=B(),a=x("routePrefix"),m=r,h=o("user.users"),{notify:v}=se(),D=x("confirmation"),{user:b}=E(),{selectedRecords:_,putPageRecords:g,toggleSelectRecordsOnPage:u,deselectRecord:O,deselectAllRecords:y}=re(),S=()=>m.users.data.filter(c=>c.id!==b.value.id).map(c=>c.id),w=L({keyword:m.filter.keyword});fe(()=>{g(S()),U.on("userDelete",c=>{O(c)})}),_e(()=>{U.off("userDelete")}),R(()=>m.users.data,()=>{g(S())}),R(()=>j.cloneDeep(w.value),j.throttle(()=>{C.get(route(`${a}.users.index`),j.pickBy(w.value),{preserveState:!0,only:["users","filter"]})},300));const z=()=>{D().title(o("user.delete_users")).description(o("user.confirm_delete_users")).destructive().onConfirm(c=>{c.isLoading(!0),C.delete(route(`${a}.users.deleteMultiple`),{data:{users:_.value},preserveScroll:!0,onSuccess(){y(),v("success",o("user.selected_users_deleted"))},onFinish(){c.reset()}})}).show()};return(c,$)=>{const G=J("tooltip");return i(),k(T,null,[e(s(H),{title:s(h)},null,8,["title"]),I("div",De,[e(oe,{title:s(h)},{description:t(()=>[d(n(s(o)("user.manage_users")),1)]),_:1},8,["title"]),I("div",Oe,[e($e,{count:s(_).length,onClose:s(y)},{default:t(()=>[M((i(),p(ae,{onClick:z},{default:t(()=>[e(A)]),_:1})),[[G,s(o)("general.delete")]])]),_:1},8,["count","onClose"]),e(ge,{class:"justify-between"},{default:t(()=>[e(s(K),{href:c.route(`${s(a)}.users.create`),class:"mb-xs sm:mb-0"},{default:t(()=>[e(te,null,{default:t(()=>[d(n(s(o)("user.create_user")),1)]),_:1})]),_:1},8,["href"]),e(Ve,{modelValue:w.value,"onUpdate:modelValue":$[0]||($[0]=f=>w.value=f)},null,8,["modelValue"])]),_:1}),e(le,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(ie,null,{head:t(()=>[e(F,null,{default:t(()=>[e(l,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(N,{checked:s(u),"onUpdate:checked":$[1]||($[1]=f=>q(u)?u.value=f:null),disabled:!r.users.meta.total},null,8,["checked","disabled"])]),_:1}),e(l,{component:"th",scope:"col"}),e(l,{component:"th",scope:"col"},{default:t(()=>[d(n(s(o)("general.name")),1)]),_:1}),e(l,{component:"th",scope:"col"},{default:t(()=>[d(n(s(o)("general.email")),1)]),_:1}),e(l,{component:"th",scope:"col"},{default:t(()=>[d(n(s(o)("general.created_at")),1)]),_:1}),e(l,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(i(!0),k(T,null,he(r.users.data,f=>(i(),p(xe,{key:f.id,item:f,onOnDelete:()=>{s(O)(f.id)}},{checkbox:t(()=>[e(N,{checked:s(_),"onUpdate:checked":$[2]||($[2]=Z=>q(_)?_.value=Z:null),value:f.id,disabled:f.id===s(b).id,number:""},null,8,["checked","value","disabled"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),r.users.meta.total?V("",!0):(i(),p(ke,{key:0,table:""}))]),_:1}),r.users.meta.links.length>3?(i(),k("div",je,[e(ve,{meta:r.users.meta,links:r.users.links},null,8,["meta","links"])])):V("",!0)])])],64)}}});export{Dt as default};
