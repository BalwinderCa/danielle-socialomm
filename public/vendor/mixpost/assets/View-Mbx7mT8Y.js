import{T as B,O as D,Z as H,i as z}from"./@inertiajs-D-tiTHlX.js";import{u as O}from"./vue-i18n-CbxO4HOa.js";import{P as K,c as C,a as P,i as E,u as L,r as Q,n as j,k as X,j as T,m as q,d as Y,_ as N}from"./app-Bood2A1f.js";import{_ as ee}from"./Admin-DhOeHsLa.js";import{_ as te}from"./PageHeader-5KlQKxZu.js";import{_ as A}from"./Panel-C3_mBW3b.js";import{l as F}from"./lodash-1tNnn4nO.js";import{T as I}from"./Trash-CGBHVq5p.js";import{_ as oe}from"./NoResult-4Hlh7_BA.js";import{_ as ae}from"./DropdownButton-Dsw7Fhie.js";import{a as R,_ as m,T as se}from"./TableCell-CdlC4-rl.js";import{_ as W,a as M}from"./CanApprove-Cizct0GW.js";import{E as le}from"./Eye-Bm2KpbsG.js";import{_ as re}from"./PureButtonLink-Cm9jQ4_3.js";import{aJ as b,r as U,D as ne,k as f,l as V,E as t,z as e,ak as r,A as s,u as o,F as S,b8 as ce,y as x,q as ie,x as k,G as ue,C as me,d as de,v as pe}from"./@vue-DxEuNGre.js";import{_ as G}from"./VerticalGroup-0ogbRp0b.js";import{A as fe}from"./ArrowTopRightOnSquare-BBcEejN-.js";import{_ as _e}from"./ClipboardCard-BZu93TLn.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";import"./@intlify-AYDeHhOU.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./QueueList-DTZpFIOW.js";import"./Flex-55yEXw9x.js";import"./EllipsisVertical-DX5Zf3Qx.js";import"./Radio-DGi8giFl.js";import"./Checkbox-CdCvF_Az.js";import"./ClipboardButton-BcSMGRuj.js";import"./Clipboard-szG3aGAU.js";const ke={class:"relative"},we={__name:"SelectUser",props:{modelValue:{default:null},users:{type:Array,default:[]},exclude:{type:Array,default:[]},filter:{type:Object,default:{}}},emits:["update:modelValue"],setup(n,{emit:a}){const w=n,y=b("routePrefix"),d=U(w.users),c=(l,p)=>{l&&(p(!0),h(p,l))},h=F.throttle((l,p)=>{axios.get(route(`${y}.users.resources.items`),{params:Object.assign({keyword:p,exclude:w.exclude},w.filter)}).then(_=>{l(!1),d.value=_.data.data.map(v=>({key:v.id,label:v.name}))})},350);return(l,p)=>{const _=ne("v-select");return f(),V("div",ke,[t(_,{modelValue:n.modelValue,"onUpdate:modelValue":p[0]||(p[0]=v=>l.$emit("update:modelValue",v)),options:d.value,filterable:!1,"close-on-select":!0,placeholder:l.$t("user.type_search_user"),onSearch:c},{"no-options":e(({search:v,searching:g,loading:i})=>[r(s(l.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])])}}},he={__name:"AttachUser",props:{workspace:{type:Object},attachedUsers:{type:Array,default:[]}},setup(n){const{t:a}=O(),{notify:w}=L(),y=n,d=U(null),c=B({user_id:null,role:"admin",can_approve:!1}),h=()=>{c.transform(v=>({...v,user_id:d.value.key})).post(route("mixpost.workspaces.users.store",{workspace:y.workspace.uuid}),{preserveScroll:!0,onSuccess(){_(),c.reset(),w("success",a("team.user_attached"))}})},l=U(!1),p=()=>{l.value=!0},_=()=>{l.value=!1,d.value=null};return(v,g)=>(f(),V(S,null,[t(C,{onClick:p,size:"sm"},{icon:e(()=>[t(K)]),default:e(()=>[r(" "+s(o(a)("team.attach")),1)]),_:1}),t(E,{show:l.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:_},{header:e(()=>[r(s(o(a)("team.attach_user")),1)]),body:e(()=>[t(we,{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=i=>d.value=i),exclude:n.attachedUsers},null,8,["modelValue","exclude"]),t(W,{modelValue:o(c).role,"onUpdate:modelValue":g[1]||(g[1]=i=>o(c).role=i),class:"mt-lg"},null,8,["modelValue"]),t(G,{class:"mt-lg"},{default:e(()=>[t(M,{modelValue:o(c).can_approve,"onUpdate:modelValue":g[2]||(g[2]=i=>o(c).can_approve=i)},null,8,["modelValue"])]),_:1})]),footer:e(()=>[t(C,{onClick:_,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[r(s(o(a)("general.cancel")),1)]),_:1}),t(P,{onClick:h,disabled:!d.value||o(c).processing,isLoading:o(c).processing},{default:e(()=>[r(s(o(a)("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},ve={class:"flex justify-start"},ge={class:"capitalize"},$e={class:"flex justify-end"},ye={class:"font-medium"},xe={__name:"WorkspaceUsers",props:{workspace:{type:Object}},setup(n){const{t:a}=O(),w=b("routePrefix"),y=b("confirmation"),{notify:d}=L(),c=n,h=U(null),l=B({user_id:null,role:"admin",can_approve:!1}),p=i=>{l.user_id=i.id,l.role=i.pivot.role,l.can_approve=i.pivot.can_approve,h.value=i},_=()=>{h.value=null,l.reset()},v=i=>{y().title("Detach user").description(`Are you sure you want to detach <strong>${i.name}</strong> from <strong>${c.workspace.name}</strong>?`).destructive().btnConfirmName(a("general.detach")).onConfirm($=>{$.isLoading(!0),D.delete(route("mixpost.workspaces.users.delete",{workspace:c.workspace.uuid}),{data:{user_id:i.id},preserveScroll:!0,onSuccess(){$.reset(),d("success",a("team.user_detached"))},onFinish(){$.isLoading(!1)}})}).show()},g=()=>{l.put(route("mixpost.workspaces.users.update",{workspace:c.workspace.uuid}),{preserveScroll:!0,onSuccess(){l.reset(),_(),d("success",a("team.role_updated"))}})};return(i,$)=>{const J=ce("tooltip");return f(),V(S,null,[t(A,null,{title:e(()=>[r(s(o(a)("user.users")),1)]),action:e(()=>[t(he,{workspace:n.workspace,attachedUsers:n.workspace.users.map(u=>u.id)},null,8,["workspace","attachedUsers"])]),default:e(()=>[n.workspace.users.length?(f(),x(se,{key:0},{head:e(()=>[t(R,null,{default:e(()=>[t(m,{component:"th",scope:"col"}),t(m,{component:"th",scope:"col"},{default:e(()=>[r(s(o(a)("general.name")),1)]),_:1}),t(m,{component:"th",scope:"col"},{default:e(()=>[r(s(o(a)("general.email")),1)]),_:1}),t(m,{component:"th",scope:"col"},{default:e(()=>[r(s(o(a)("team.role")),1)]),_:1}),t(m,{component:"th",scope:"col"},{default:e(()=>[r(s(o(a)("team.can_approve")),1)]),_:1}),t(m,{component:"th",scope:"col"},{default:e(()=>[r(s(o(a)("team.attached_at")),1)]),_:1}),t(m,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(f(!0),V(S,null,ie(o(F.sortBy)(n.workspace.users,"pivot.joined_at"),u=>(f(),x(R,{key:n.workspace.id,hoverable:!0},{default:e(()=>[t(m,{align:"left"},{default:e(()=>[k("div",ve,[t(Q,{name:u.name},null,8,["name"])])]),_:2},1024),t(m,null,{default:e(()=>[r(s(u.name),1)]),_:2},1024),t(m,null,{default:e(()=>[r(s(u.email),1)]),_:2},1024),t(m,null,{default:e(()=>[t(j,null,{default:e(()=>[k("span",ge,s(o(a)(`team.${u.pivot.role}`)),1)]),_:2},1024)]),_:2},1024),t(m,null,{default:e(()=>[u.pivot.can_approve?(f(),x(j,{key:1,variant:"info"},{default:e(()=>[r(s(o(a)("general.yes")),1)]),_:1})):(f(),x(j,{key:0},{default:e(()=>[r(s(o(a)("general.no")),1)]),_:1}))]),_:2},1024),t(m,null,{default:e(()=>[r(s(u.pivot.joined_at),1)]),_:2},1024),t(m,{align:"right"},{default:e(()=>[k("div",$e,[ue((f(),x(re,{href:i.route(`${o(w)}.users.view`,{user:u.id}),class:"mr-xs"},{default:e(()=>[t(le)]),_:2},1032,["href"])),[[J,o(a)("general.view")]]),t(X,{placement:"bottom-end"},{trigger:e(()=>[t(ae)]),content:e(()=>[t(T,{onClick:Z=>p(u),as:"button"},{icon:e(()=>[t(q)]),default:e(()=>[r(" "+s(o(a)("team.edit_role")),1)]),_:2},1032,["onClick"]),t(T,{onClick:Z=>v(u),as:"button"},{icon:e(()=>[t(I,{class:"text-red-500"})]),default:e(()=>[r(" "+s(o(a)("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(f(),x(oe,{key:1}))]),_:1}),t(E,{show:h.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:_},{header:e(()=>[k("span",null,[r(s(o(a)("team.edit_role_for"))+" ",1),k("span",ye,s(h.value.name),1)])]),body:e(()=>[t(W,{modelValue:o(l).role,"onUpdate:modelValue":$[0]||($[0]=u=>o(l).role=u),class:"mt-xs"},null,8,["modelValue"]),t(G,{class:"mt-lg"},{default:e(()=>[t(M,{modelValue:o(l).can_approve,"onUpdate:modelValue":$[1]||($[1]=u=>o(l).can_approve=u)},null,8,["modelValue"])]),_:1})]),footer:e(()=>[t(C,{onClick:_,class:"mr-xs"},{default:e(()=>[r(s(o(a)("general.cancel")),1)]),_:1}),t(P,{onClick:g,disabled:o(l).processing,isLoading:o(l).processing},{default:e(()=>[r(s(o(a)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},be={class:"w-full mx-auto row-py"},Ve={class:"flex items-center"},Ce={class:"row-px"},Ue={class:"mt-lg"},Se=de({layout:ee}),Ct=Object.assign(Se,{__name:"View",props:{workspace:{type:Object}},setup(n){const{t:a}=O(),w=b("routePrefix"),y=b("confirmation"),d=n,{notify:c}=L(),h=()=>{y().title(a("workspace.delete_workspace")).description(a("workspace.confirm_delete_workspace")).destructive().onConfirm(l=>{l.isLoading(!0),D.delete(route(`${w}.workspaces.delete`,{workspace:d.workspace.uuid}),{onSuccess(){c("success",a("workspace.workspace_deleted"))}})}).show()};return(l,p)=>(f(),V(S,null,[t(o(H),{title:o(a)("workspace.view_workspace")},null,8,["title"]),k("div",be,[t(te,{title:o(a)("workspace.view_workspace")},{description:e(()=>[r(s(n.workspace.name),1)]),default:e(()=>[k("div",Ve,[t(o(z),{href:l.route("mixpost.switchWorkspace",{workspace:n.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[t(C,{size:"sm"},{icon:e(()=>[t(fe)]),default:e(()=>[r(" "+s(o(a)("general.open")),1)]),_:1})]),_:1},8,["href"]),t(o(z),{href:l.route(`${o(w)}.workspaces.edit`,{workspace:n.workspace.uuid}),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:e(()=>[t(P,{size:"sm"},{icon:e(()=>[t(q)]),default:e(()=>[r(" "+s(o(a)("general.edit")),1)]),_:1})]),_:1},8,["href"]),t(Y,{onClick:h,size:"sm"},{icon:e(()=>[t(I)]),_:1})])]),_:1},8,["title"]),k("div",Ce,[t(A,null,{title:e(()=>[r(s(o(a)("general.details")),1)]),default:e(()=>[t(N,null,{title:e(()=>[r(s(o(a)("general.name")),1)]),default:e(()=>[k("div",null,s(n.workspace.name),1)]),_:1}),t(N,{class:"mt-lg"},{title:e(()=>[r(s(o(a)("general.color")),1)]),default:e(()=>[k("div",{style:pe({background:n.workspace.hex_color}),class:"w-xl h-xl rounded-md"},null,4)]),_:1})]),_:1}),k("div",Ue,[t(xe,{workspace:n.workspace},null,8,["workspace"])]),l.$page.props.mixpost.features.api_access_tokens?(f(),x(A,{key:0,class:"mt-lg"},{title:e(()=>[r(s(o(a)("system.usage_api")),1)]),default:e(()=>[t(_e,null,{default:e(()=>[r(s(n.workspace.uuid),1)]),_:1})]),_:1})):me("",!0)])])],64))}});export{Ct as default};
