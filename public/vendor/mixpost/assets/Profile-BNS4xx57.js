import{T as M,K as le,O as ue,Z as de}from"./@inertiajs-D-tiTHlX.js";import{_ as ce}from"./Minimal-D_DYcLgW.js";import{u as I}from"./vue-i18n-CbxO4HOa.js";import{e as F,_ as k,a as V,T as me,u as H,p as fe,h as O,c as re,i as _e,n as oe,d as ae}from"./app-TmpkEByR.js";import{_ as N}from"./Radio-DGi8giFl.js";import{_ as se}from"./Select-BOKsQWfr.js";import{k as i,l as p,F as b,q as P,y as x,E as t,z as e,ak as n,A as s,u as o,x as a,C as y,bN as ne,aJ as Q,r as h,b as pe,J as G,d as ve}from"./@vue-DxEuNGre.js";import{_ as D}from"./Flex-55yEXw9x.js";import{_ as K}from"./InputHidden-BtjUkmPo.js";import{_ as ge}from"./Panel-C3_mBW3b.js";import{_ as E}from"./SectionBorder-_k-DEA9C.js";import{_ as we}from"./PageHeader-5KlQKxZu.js";import{u as $e}from"./useRouter-BwU7OWYS.js";import{_ as he}from"./BackToDashboardButton-Baqit-3-.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./@babel-DR_DpGdq.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";import"./@intlify-AYDeHhOU.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./lodash-1tNnn4nO.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./Eye-Bm2KpbsG.js";import"./ArrowLeft-BKyFr17y.js";const ye=["value"],be={key:0,class:"text-xs text-gray-500 mt-xs block"},ke={class:"font-medium"},xe=["label"],Ce=["value"],Ve={class:"flex items-center space-x-xs rtl:space-x-reverse"},Le={class:"flex items-center space-x-xs rtl:space-x-reverse"},Pe={__name:"Preferences",props:{form:{type:Object,require:!0},locales:{type:Array,required:!0},timezone_list:{type:Object,required:!0}},setup(u){const l=I(),{t:c}=l,r=u,v=$=>r.locales.find(f=>f.long===$).direction||"ltr",g=$=>!["en-GB","fr-CA","ar-SA","de-DE","es-MX"].includes($),{notify:m}=H(),d=()=>{r.form.put(route("mixpost.profile.updatePreferences"),{preserveScroll:!0,onSuccess(){me.changeLocale(l,r.form.locale,v(r.form.locale)),m("success",c("profile.preferences_updated"))}})};return($,f)=>(i(),p("div",null,[(i(!0),p(b,null,P(u.form.errors,_=>(i(),x(F,{message:_,class:"mb-xs"},null,8,["message"]))),256)),t(k,null,{title:e(()=>[n(s(o(c)("general.language")),1)]),default:e(()=>[a("div",null,[t(se,{modelValue:u.form.locale,"onUpdate:modelValue":f[0]||(f[0]=_=>u.form.locale=_)},{default:e(()=>[(i(!0),p(b,null,P(u.locales,_=>(i(),p("option",{value:_.long},s(_.english)+" - "+s(_.native)+" - ("+s(_.long)+") "+s(g(_.long)?"[Beta]":""),9,ye))),256))]),_:1},8,["modelValue"]),g(u.form.locale)?(i(),p("span",be,[f[6]||(f[6]=n(" ðŸš§ Language ")),a("span",ke,s(u.form.locale),1),f[7]||(f[7]=n(" is in beta and may not be fully translated or can contain errors. "))])):y("",!0)])]),_:1}),t(k,{class:"mt-lg"},{title:e(()=>[n(s(o(c)("general.timezone")),1)]),default:e(()=>[a("div",null,[t(se,{modelValue:u.form.timezone,"onUpdate:modelValue":f[1]||(f[1]=_=>u.form.timezone=_)},{default:e(()=>[(i(!0),p(b,null,P(u.timezone_list,(_,L)=>(i(),p("optgroup",{label:L},[(i(!0),p(b,null,P(_,(S,U)=>(i(),p("option",{value:U},s(S),9,Ce))),256))],8,xe))),256))]),_:1},8,["modelValue"])])]),_:1}),t(k,{class:"mt-lg"},{title:e(()=>[n(s(o(c)("profile.time_format")),1)]),default:e(()=>[a("div",Ve,[a("label",null,[t(N,{checked:u.form.time_format,"onUpdate:checked":f[2]||(f[2]=_=>u.form.time_format=_),value:12},null,8,["checked"]),n(" 12 "+s(o(c)("profile.hour")),1)]),a("label",null,[t(N,{checked:u.form.time_format,"onUpdate:checked":f[3]||(f[3]=_=>u.form.time_format=_),value:24},null,8,["checked"]),n(" 24 "+s(o(c)("profile.hour")),1)])])]),_:1}),t(k,{class:"mt-lg"},{title:e(()=>[n(s(o(c)("profile.first_day_week")),1)]),default:e(()=>[a("div",Le,[a("label",null,[t(N,{checked:u.form.week_starts_on,"onUpdate:checked":f[4]||(f[4]=_=>u.form.week_starts_on=_),value:0},null,8,["checked"]),n(" "+s(o(c)("profile.sunday")),1)]),a("label",null,[t(N,{checked:u.form.week_starts_on,"onUpdate:checked":f[5]||(f[5]=_=>u.form.week_starts_on=_),value:1},null,8,["checked"]),n(" "+s(o(c)("profile.monday")),1)])])]),_:1}),t(V,{onClick:d,class:"mt-lg"},{default:e(()=>[n(s(o(c)("general.save")),1)]),_:1})]))}},Se={for:"name"},Ue={for:"email"},Ae={__name:"UserAccount",setup(u){const{t:l}=I(),{user:c}=fe(),{notify:r}=H(),v=M({name:c.value.name,email:c.value.email}),g=()=>{v.put(route("mixpost.profile.updateUser"),{preserveScroll:!0,onSuccess(){r("success",l("account.account_updated"))}})};return(m,d)=>(i(),p("form",{onSubmit:ne(g,["prevent"])},[(i(!0),p(b,null,P(o(v).errors,$=>(i(),x(F,{message:$,class:"mb-xs"},null,8,["message"]))),256)),t(k,null,{title:e(()=>[a("label",Se,s(o(l)("general.name")),1)]),default:e(()=>[t(O,{type:"text",modelValue:o(v).name,"onUpdate:modelValue":d[0]||(d[0]=$=>o(v).name=$),error:o(v).errors.name,id:"name"},null,8,["modelValue","error"])]),_:1}),t(k,{class:"mt-lg"},{title:e(()=>[a("label",Ue,s(o(l)("general.email")),1)]),default:e(()=>[t(O,{type:"email",modelValue:o(v).email,"onUpdate:modelValue":d[1]||(d[1]=$=>o(v).email=$),error:o(v).errors.email,id:"email"},null,8,["modelValue","error"])]),_:1}),t(V,{type:"submit",class:"mt-lg"},{default:e(()=>[n(s(o(l)("general.save")),1)]),_:1})],32))}},ze={for:"password"},Ie={__name:"ConfirmPassword",props:{show:{type:Boolean,default:!0}},emits:["close","confirm"],setup(u,{emit:l}){const c=Q("routePrefix"),r=l,v=()=>{r("close")},g=M({password:""}),m=()=>{g.post(route(`${c}.profile.confirmPassword`),{preserveScroll:!0,onSuccess(){r("confirm"),g.reset(),v()}})};return(d,$)=>(i(),x(_e,{show:u.show,"max-width":"lg",closeable:!0,"scrollable-body":!0,zIndexClass:"z-30",onClose:v},{header:e(()=>[n(s(d.$t("auth.confirm_password")),1)]),body:e(()=>[u.show?(i(),p(b,{key:0},[a("div",null,s(d.$t("profile.security_confirm_password")),1),t(k,{class:"mt-lg"},{title:e(()=>[a("label",ze,s(d.$t("auth.password")),1)]),footer:e(()=>[t(F,{message:o(g).errors.password},null,8,["message"])]),default:e(()=>[t(O,{modelValue:o(g).password,"onUpdate:modelValue":$[0]||($[0]=f=>o(g).password=f),error:o(g).errors.password,type:"password",id:"password",class:"w-full",autocomplete:"password"},null,8,["modelValue","error"])]),_:1})],64)):y("",!0)]),footer:e(()=>[t(re,{onClick:v,class:"mr-xs"},{default:e(()=>[n(s(d.$t("general.cancel")),1)]),_:1}),t(V,{onClick:m,disabled:o(g).processing,isLoading:o(g).processing,class:"mr-xs"},{default:e(()=>[n(s(d.$t("general.confirm")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"]))}},qe={class:"mt-lg"},Be={key:0,class:"mt-lg"},Re=["innerHTML"],Te={class:"uppercase font-medium text-center"},je={class:"text-gray-500"},Ne={class:"mt-md"},De={for:"code"},Ee={key:1},Oe={key:0,class:"mt-lg"},Me={class:"mt-xs bg-primary-50 rounded-lg p-md"},Fe={class:"mb-xs"},He={class:"font-medium"},Je={__name:"TwoFactorAuth",setup(u){const{t:l}=I(),c=h({svg:"",secret_key:""}),r=h(!1),v=h(!1),g=h(""),m=h(!1),d=h(!1),$=h([]),f=h(!1),_=h(null),L=Q("routePrefix"),{notify:S}=H(),U=pe(()=>v.value?!1:le().props.user_has_two_factor_auth_enabled||r.value===!0),ie=()=>{f.value=!0},X=()=>{f.value=!1},q=h(!1),Z=()=>{q.value=!0,axios.post(route(`${L}.profile.two-factor-auth.enable`)).then(w=>{m.value=!0,c.value=w.data}).catch(w=>A(w,Z)).finally(()=>q.value=!1)},B=h(!1),W=()=>{B.value=!0,axios.post(route(`${L}.profile.two-factor-auth.confirm`),{code:g.value}).then(w=>{r.value=!0,v.value=!1,m.value=!1,$.value=w.data.recovery_codes,d.value=!0,g.value="",S("success",l("profile.two_factor_enabled"))}).catch(w=>A(w,W)).finally(()=>B.value=!1)},R=h(!1),Y=()=>{R.value=!0,axios.get(route(`${L}.profile.two-factor-auth.showRecoveryCodes`)).then(w=>{$.value=w.data.recovery_codes,d.value=!0}).catch(w=>A(w,Y)).finally(()=>R.value=!1)},T=h(!1),ee=()=>{T.value=!0,axios.post(route(`${L}.profile.two-factor-auth.regenerateRecoveryCodes`)).then(w=>{$.value=w.data.recovery_codes,d.value=!0}).catch(w=>A(w,ee)).finally(()=>T.value=!1)},j=h(!1),te=()=>{j.value=!0,axios.delete(route(`${L}.profile.two-factor-auth.disable`)).then(()=>{v.value=!0,S("success",l("profile.two_factor_disabled"))}).catch(w=>A(w,te)).finally(()=>j.value=!1)},A=(w,C)=>{if(w.response.status===422){w.response.data.errors.confirm_password&&(_.value=C,ie()),w.response.data.errors.code&&S("error",w.response.data.errors.code[0]);return}S("error",l("error.something_wrong"))};return(w,C)=>(i(),p(b,null,[a("div",null,[a("div",null,s(o(l)("profile.install_totp")),1),a("div",qe,[U.value?(i(),x(oe,{key:0,variant:"success"},{default:e(()=>[n(s(o(l)("general.enabled")),1)]),_:1})):y("",!0),U.value?y("",!0):(i(),x(oe,{key:1,variant:"error"},{default:e(()=>[n(s(o(l)("general.disabled")),1)]),_:1}))]),m.value?(i(),p("div",Be,[t(D,{class:"w-full relative rounded-lg border border-gray-200 p-xs"},{default:e(()=>[a("div",{innerHTML:c.value.svg},null,8,Re),t(D,{class:"justify-center items-center w-full"},{default:e(()=>[a("div",Te,[a("div",je,s(o(l)("profile.secret_key")),1),a("div",null,s(c.value.secret_key),1)])]),_:1})]),_:1}),a("div",Ne,s(o(l)("profile.scan_qr_code")),1),t(k,{class:"mt-lg"},{title:e(()=>[a("label",De,s(o(l)("profile.code")),1)]),default:e(()=>[t(O,{modelValue:g.value,"onUpdate:modelValue":C[0]||(C[0]=J=>g.value=J),type:"text",id:"code",class:"w-full",autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(D,null,{default:e(()=>[t(V,{onClick:W,disabled:B.value,isLoading:B.value,class:"mt-lg"},{default:e(()=>[n(s(o(l)("general.confirm")),1)]),_:1},8,["disabled","isLoading"]),t(re,{onClick:C[1]||(C[1]=()=>{m.value=!1,g.value=""}),class:"mt-lg"},{default:e(()=>[n(s(o(l)("general.cancel")),1)]),_:1})]),_:1})])):y("",!0),U.value?(i(),p("div",Ee,[d.value?(i(),p("div",Oe,[a("div",null,s(o(l)("profile.store_recovery_codes")),1),a("div",Me,[(i(!0),p(b,null,P($.value,J=>(i(),p("div",Fe,[a("div",He,s(J),1)]))),256))])])):y("",!0),t(D,{class:"mt-lg"},{default:e(()=>[d.value?(i(),x(V,{key:0,onClick:ee,disabled:T.value,isLoading:T.value},{default:e(()=>[n(s(o(l)("profile.regenerate_recovery_codes")),1)]),_:1},8,["disabled","isLoading"])):y("",!0),d.value?y("",!0):(i(),x(V,{key:1,onClick:Y,disabled:R.value,isLoading:R.value},{default:e(()=>[n(s(o(l)("profile.show_recovery_codes")),1)]),_:1},8,["disabled","isLoading"])),t(ae,{onClick:te,disabled:j.value,isLoading:j.value},{default:e(()=>[n(s(o(l)("general.disable")),1)]),_:1},8,["disabled","isLoading"])]),_:1})])):y("",!0),!U.value&&!m.value?(i(),x(V,{key:2,onClick:Z,disabled:q.value,isLoading:q.value,class:"mt-lg"},{default:e(()=>[n(s(o(l)("general.enable")),1)]),_:1},8,["disabled","isLoading"])):y("",!0)]),t(Ie,{show:f.value,onConfirm:C[2]||(C[2]=()=>{X(),_.value&&_.value()}),onClose:X},null,8,["show"])],64))}},Ge={for:"current_password"},Ke={for:"password"},Qe={for:"password_confirmation"},Xe={__name:"Password",setup(u){const{t:l}=I(),{notify:c}=H(),r=M({current_password:"",password:"",password_confirmation:""}),v=()=>{r.put(route("mixpost.profile.updatePassword"),{preserveScroll:!0,onSuccess(){r.reset(),c("success",l("profile.password_changed"))}})};return(g,m)=>(i(),p("form",{onSubmit:ne(v,["prevent"])},[(i(!0),p(b,null,P(o(r).errors,d=>(i(),x(F,{message:d,class:"mb-xs"},null,8,["message"]))),256)),t(k,{class:"mt-lg"},{title:e(()=>[a("label",Ge,s(o(l)("profile.current_password")),1)]),default:e(()=>[t(K,{modelValue:o(r).current_password,"onUpdate:modelValue":m[0]||(m[0]=d=>o(r).current_password=d),error:o(r).errors.current_password,id:"current_password",required:""},null,8,["modelValue","error"])]),_:1}),t(k,{class:"mt-md"},{title:e(()=>[a("label",Ke,s(o(l)("profile.new_password")),1)]),default:e(()=>[t(K,{modelValue:o(r).password,"onUpdate:modelValue":m[1]||(m[1]=d=>o(r).password=d),error:o(r).errors.password,id:"password",autocomplete:"new-password",required:""},null,8,["modelValue","error"])]),_:1}),t(k,{class:"mt-md"},{title:e(()=>[a("label",Qe,s(o(l)("profile.confirm_new_password")),1)]),default:e(()=>[t(K,{modelValue:o(r).password_confirmation,"onUpdate:modelValue":m[2]||(m[2]=d=>o(r).password_confirmation=d),error:o(r).password_confirmationpassword,id:"password_confirmation",autocomplete:"new-password",required:""},null,8,["modelValue","error"])]),_:1}),t(V,{type:"submit",class:"mt-lg"},{default:e(()=>[n(s(o(l)("general.save")),1)]),_:1})],32))}},Ze={class:"md:grid md:grid-cols-3 md:gap-lg"},We={class:"md:col-span-1 flex justify-between"},Ye={class:"text-lg font-medium text-gray-900"},et={class:"mt-xs text-gray-500"},tt={class:"mt-lg md:mt-0 md:col-span-2"},z={__name:"ActionSection",setup(u){return(l,c)=>(i(),p("div",Ze,[a("div",We,[a("div",null,[a("h3",Ye,[G(l.$slots,"title")]),a("p",et,[G(l.$slots,"description")])])]),a("div",tt,[t(ge,null,{default:e(()=>[G(l.$slots,"default")]),_:3})])]))}},ot={__name:"DeleteAccount",setup(u){const{t:l}=I(),c=Q("confirmation"),{onError:r}=$e(),v=()=>{c().title(l("profile.delete_account")).description(l("profile.delete_account_desc")).destructive().btnConfirmName(l("profile.delete_account")).onConfirm(m=>{m.isLoading(!0),g(m)}).show()},g=m=>{ue.delete(le().props.delete_account_url,{onSuccess(){m.reset()},onError(d){m.isLoading(!1),r(d,()=>{m.isLoading(!0),g(m)})}})};return(m,d)=>(i(),x(ae,{onClick:v},{default:e(()=>[n(s(o(l)("profile.delete_account")),1)]),_:1}))}},st={class:"row-py w-full mx-auto !pt-0"},lt={class:"w-full mb-lg"},rt={class:"mt-2xl sm:mt-0"},at={class:"mt-2xl sm:mt-0"},nt={class:"mt-2xl sm:mt-0"},it={class:"mt-2xl sm:mt-0"},ut={class:"mt-2xl sm:mt-0"},dt=ve({layout:ce}),eo=Object.assign(dt,{__name:"Profile",props:["settings","locales","timezone_list","user_has_two_factor_auth_enabled","is_delete_account_enabled"],setup(u){const c=M(u.settings);return(r,v)=>(i(),p(b,null,[t(o(de),{title:r.$t("profile.edit_profile")},null,8,["title"]),t(we,{title:r.$t("profile.edit_profile"),class:"!px-0"},{default:e(()=>[t(he)]),_:1},8,["title"]),a("div",st,[a("div",lt,[a("div",rt,[t(z,null,{title:e(()=>[n(s(r.$t("profile.profile_information")),1)]),description:e(()=>[n(s(r.$t("profile.update_your_account")),1)]),default:e(()=>[t(Ae)]),_:1})]),t(E,{contrasted:!0}),a("div",at,[t(z,null,{title:e(()=>[n(s(r.$t("profile.preferences")),1)]),description:e(()=>[n(s(r.$t("profile.update_preferences")),1)]),default:e(()=>[t(Pe,{form:o(c),timezone_list:u.timezone_list,locales:u.locales},null,8,["form","timezone_list","locales"])]),_:1})]),r.$page.props.is_two_factor_auth_enabled?(i(),p(b,{key:0},[t(E,{contrasted:!0}),a("div",nt,[t(z,null,{title:e(()=>[n(s(r.$t("auth.two_factor_authentication")),1)]),description:e(()=>[n(s(r.$t("auth.security_using_two_factor")),1)]),default:e(()=>[t(Je)]),_:1})])],64)):y("",!0),t(E,{contrasted:!0}),a("div",it,[t(z,null,{title:e(()=>[n(s(r.$t("auth.update_password")),1)]),description:e(()=>[n(s(r.$t("auth.confirm_secure_password")),1)]),default:e(()=>[t(Xe)]),_:1})]),u.is_delete_account_enabled?(i(),p(b,{key:1},[t(E,{contrasted:!0}),a("div",ut,[t(z,null,{title:e(()=>[n(s(r.$t("profile.delete_account")),1)]),description:e(()=>[n(s(r.$t("profile.delete_account_desc")),1)]),default:e(()=>[t(ot)]),_:1})])],64)):y("",!0)])])],64))}});export{eo as default};
