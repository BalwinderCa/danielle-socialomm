import{aJ as y,b as M,r as b,f as P,l as V,E as t,u as e,x as p,z as o,bN as j,F as q,d as F,k as w,ak as l,A as i,C as g,v as R,y as S}from"./@vue-DxEuNGre.js";import{u as U}from"./vue-i18n-CbxO4HOa.js";import{l as W}from"./lodash-1tNnn4nO.js";import{T as D,Z as H,i as E,O as J}from"./@inertiajs-D-tiTHlX.js";import{_ as Z}from"./Admin-71bSIYYn.js";import{u as G}from"./usePageMode-BKxn7TaF.js";import{i as K,c as v,d as Q,_ as T,h as X,e as Y,a as O,C as ee,u as oe}from"./app-CkYytB6Y.js";import{_ as te}from"./PageHeader-5KlQKxZu.js";import{_ as se}from"./Panel-C3_mBW3b.js";import{_ as re}from"./ColorPicker-LY-fRv-4.js";import{E as ae}from"./Eye-Bm2KpbsG.js";import{T as le}from"./Trash-CGBHVq5p.js";import{A as ie}from"./ArrowTopRightOnSquare-BBcEejN-.js";import{_ as ne}from"./Flex-55yEXw9x.js";import"./@intlify-AYDeHhOU.js";import"./@babel-DR_DpGdq.js";import"./axios-CCb-kr4I.js";import"./deepmerge-CaivEIYs.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./nprogress-34pYfWsY.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./QueueList-DTZpFIOW.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./@jaames-DqG6q-J1.js";const me={class:"row-py w-full mx-auto"},ce={key:0,class:"flex"},ue={class:"row-px"},pe={for:"name"},de={class:"w-full"},fe=F({layout:Z}),so=Object.assign(fe,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},workspace:{type:Object}},setup(x){const{t:s}=U(),d=x,{notify:h}=oe(),k=y("routePrefix"),L=y("confirmation"),C=M(()=>c.value?s("workspace.create_workspace"):s("workspace.edit_workspace")),{isCreate:c,isEdit:f}=G(),u=b(!1),_=b(""),n=D({name:f.value?d.workspace.name:"",hex_color:f.value?d.workspace.hex_color:""}),N=()=>{n.hex_color=_.value,u.value=!1},z=()=>{const a=ee();return a[W.random(0,a.length-1)]};P(()=>{if(c.value){const a=z();n.hex_color=a,_.value=a}f.value&&(_.value=d.workspace.hex_color)});const $=(a=!1)=>{n.transform(r=>({...r,login:a})).post(route(`${k}.workspaces.store`))},A=()=>{n.put(route(`${k}.workspaces.update`,{workspace:d.workspace.uuid}),{onSuccess:()=>{h("success",s("workspace.workspace_updated"))}})},B=()=>{L().title(s("workspace.delete_workspace")).description(s("workspace.confirm_delete_workspace")).destructive().onConfirm(a=>{a.isLoading(!0),J.delete(route(`${k}.workspaces.delete`,{workspace:d.workspace.uuid}),{preserveScroll:!0,onSuccess(){h("success",s("workspace.workspace_deleted"))},onFinish(){a.reset()}})}).show()},I=()=>{c.value&&$(),f.value&&A()};return(a,r)=>(w(),V(q,null,[t(e(H),{title:C.value},null,8,["title"]),p("div",me,[t(te,{title:C.value},{default:o(()=>[e(f)?(w(),V("div",ce,[t(e(E),{href:a.route("mixpost.switchWorkspace",{workspace:x.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs"},{default:o(()=>[t(v,{size:"sm"},{icon:o(()=>[t(ie)]),default:o(()=>[l(" "+i(e(s)("general.open")),1)]),_:1})]),_:1},8,["href"]),t(e(E),{href:a.route(`${e(k)}.workspaces.view`,{workspace:x.workspace.uuid}),class:"mr-xs"},{default:o(()=>[t(v,{size:"sm"},{icon:o(()=>[t(ae)]),default:o(()=>[l(" "+i(e(s)("general.view")),1)]),_:1})]),_:1},8,["href"]),t(Q,{onClick:B,size:"sm"},{icon:o(()=>[t(le)]),_:1})])):g("",!0)]),_:1},8,["title"]),p("div",ue,[p("form",{method:"post",onSubmit:j(I,["prevent"])},[t(se,null,{title:o(()=>[l(i(e(s)("general.details")),1)]),default:o(()=>[t(T,null,{title:o(()=>[p("label",pe,i(e(s)("general.name")),1)]),default:o(()=>[p("div",de,[t(X,{modelValue:e(n).name,"onUpdate:modelValue":r[0]||(r[0]=m=>e(n).name=m),type:"text",id:"name",placeholder:e(s)("workspace.workspace_name"),class:"w-full",autocomplete:"off",autofocus:e(c),required:""},null,8,["modelValue","placeholder","autofocus"]),t(Y,{message:e(n).errors.name,class:"mt-1"},null,8,["message"])])]),_:1}),t(T,{class:"mt-lg"},{title:o(()=>r[6]||(r[6]=[l(" Color ")])),default:o(()=>[p("div",{onClick:r[1]||(r[1]=m=>u.value=!0),style:R({background:e(n).hex_color}),role:"button",type:"button",class:"w-xl h-xl rounded-md"},null,4)]),_:1}),t(ne,{class:"mt-lg"},{default:o(()=>[t(O,{type:"submit"},{default:o(()=>[l(i(e(c)?e(s)("general.create"):e(s)("general.update")),1)]),_:1}),e(c)?(w(),S(v,{key:0,onClick:r[2]||(r[2]=m=>$(!0)),type:"button",class:"ml-xs"},{default:o(()=>[l(i(e(s)("workspace.create_and_login")),1)]),_:1})):g("",!0)]),_:1})]),_:1})],32)])]),t(K,{show:u.value,"max-width":"md",onClose:r[5]||(r[5]=m=>u.value=!1)},{header:o(()=>[l(i(e(s)("workspace.change_workspace_color")),1)]),body:o(()=>[u.value?(w(),S(re,{key:0,modelValue:_.value,"onUpdate:modelValue":r[3]||(r[3]=m=>_.value=m)},null,8,["modelValue"])):g("",!0)]),footer:o(()=>[t(v,{onClick:r[4]||(r[4]=m=>u.value=!1),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:o(()=>[l(i(e(s)("general.cancel")),1)]),_:1}),t(O,{onClick:N},{default:o(()=>[l(i(e(s)("general.done")),1)]),_:1})]),_:1},8,["show"])],64))}});export{so as default};
