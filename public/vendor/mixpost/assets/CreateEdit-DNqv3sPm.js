const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AIAssist-CyIVQAe8.js","assets/VariableManager-B-uEazou.js","assets/@tiptap-DlxRGiDd.js","assets/@vue-DxEuNGre.js","assets/prosemirror-state-Dfkm3xtq.js","assets/prosemirror-model-C-VrLeHJ.js","assets/orderedmap-C4TimWWB.js","assets/prosemirror-transform-CNTRfHZy.js","assets/prosemirror-dropcursor-CRVdsyHs.js","assets/prosemirror-gapcursor-CIClWOe5.js","assets/prosemirror-keymap-BrtsOOc5.js","assets/w3c-keyname-DEtA-KhA.js","assets/prosemirror-view-CARpBv5D.js","assets/prosemirror-history-C8_5KGmB.js","assets/rope-sequence-Cxv9J64N.js","assets/linkifyjs-CkylhtGF.js","assets/prosemirror-commands-B8A7CEu7.js","assets/prosemirror-schema-list-B_jBki9Q.js","assets/vue-i18n-CbxO4HOa.js","assets/@intlify-AYDeHhOU.js","assets/Variable-DSa_eOhS.js","assets/app-DrYJbhZh.js","assets/axios-CCb-kr4I.js","assets/floating-vue-BgCeCz-J.js","assets/@floating-ui-Dq8c3VDt.js","assets/floating-vue-DF4AVo2i.css","assets/vue-select-CUmyCPba.js","assets/vue-select-DARUaxu_.css","assets/@inertiajs-D-tiTHlX.js","assets/deepmerge-CaivEIYs.js","assets/@babel-DR_DpGdq.js","assets/qs-rEl07COy.js","assets/side-channel-BRnl5gSA.js","assets/get-intrinsic-Cc4ufvoy.js","assets/has-symbols-eVqrYdw7.js","assets/function-bind-CTBxUF5L.js","assets/has-0xLfSV6H.js","assets/call-bind-BYlQD6Li.js","assets/object-inspect-DHD9wu3Y.js","assets/nprogress-34pYfWsY.js","assets/lodash.clonedeep-DcFMYim1.js","assets/lodash.isequal-K_gfpr-R.js","assets/laravel-vite-plugin-DEL3ZhID.js","assets/emoji-mart-vue-fast-DVezNdb5.js","assets/emoji-mart-vue-fast-CIKiYTla.css","assets/lodash-1tNnn4nO.js","assets/mitt-DJ65BbbF.js","assets/date-fns-tz-NX4xHF3p.js","assets/date-fns-Uop7x9nl.js","assets/pusher-js-CH5STpCs.js","assets/laravel-echo-C9ppFO4I.js","assets/app-Ba-KQXuu.css","assets/app-Cv6p9Oh4.css","assets/MediaGifs-DVe-MrnX.js","assets/nanoid-DP16PUbO.js","assets/Masonry-BfXpEWkh.js","assets/MediaFile-CRJPtfzT.js","assets/ExclamationCircle-Co8IAwQh.js","assets/SectionTitle-DlhdjqIe.js","assets/SearchInput-2hkqUhZw.js","assets/NoResult-DQ-W_W23.js","assets/Alert-zz7KsfSK.js","assets/Tab-gMbHW_qz.js","assets/vuedraggable-OGJnKJQC.js","assets/vue-CveCyDR3.js","assets/sortablejs-DNSymPwa.js","assets/EllipsisVertical-DX5Zf3Qx.js","assets/Trash-CGBHVq5p.js","assets/ListItem-CZIJw31K.js","assets/Textarea-XqA1xqrh.js","assets/VerticalGroup-0ogbRp0b.js","assets/Flex-55yEXw9x.js","assets/useAPIForm-Cr7Lz7eJ.js","assets/Select-BOKsQWfr.js","assets/Refresh-BG68H2OY.js","assets/ClipboardButton-D7tgJgIf.js","assets/Clipboard-szG3aGAU.js"])))=>i.map(i=>d[i]);
import{a as E,c as J,d as M,h as Z,f as G,u as H}from"./app-DrYJbhZh.js";import{p as K,aJ as Q,r as W,b as X,l as N,E as o,u as t,x as f,z as a,bN as Y,F as T,k as p,y as _,ak as l,A as c,C as y,q as h,al as tt}from"./@vue-DxEuNGre.js";import{l as et}from"./lodash-1tNnn4nO.js";import{T as ot,Z as rt,i as at,O as A}from"./@inertiajs-D-tiTHlX.js";import{N as w}from"./nprogress-34pYfWsY.js";import{u as st}from"./vue-i18n-CbxO4HOa.js";import{u as it}from"./usePostVersions-THbIEc6s.js";import{u as mt}from"./Variable-DSa_eOhS.js";import{u as pt}from"./useTemplate-DyJKZVuO.js";import{_ as lt}from"./PageHeader-5KlQKxZu.js";import{_ as nt}from"./Panel-C3_mBW3b.js";import{_ as dt}from"./LabelSuffix-Di2RYCr8.js";import{_ as ut}from"./VerticalGroup-0ogbRp0b.js";import{a as ft,b as _t,c as ct,d as xt,e as vt,_ as yt}from"./VariableManager-B-uEazou.js";import{T as bt}from"./Trash-CGBHVq5p.js";import{_ as g}from"./Flex-55yEXw9x.js";import"./axios-CCb-kr4I.js";/* empty css            */import"./floating-vue-BgCeCz-J.js";import"./@floating-ui-Dq8c3VDt.js";import"./vue-select-CUmyCPba.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./emoji-mart-vue-fast-DVezNdb5.js";import"./mitt-DJ65BbbF.js";import"./date-fns-tz-NX4xHF3p.js";import"./date-fns-Uop7x9nl.js";import"./@babel-DR_DpGdq.js";import"./pusher-js-CH5STpCs.js";import"./laravel-echo-C9ppFO4I.js";import"./deepmerge-CaivEIYs.js";import"./qs-rEl07COy.js";import"./side-channel-BRnl5gSA.js";import"./get-intrinsic-Cc4ufvoy.js";import"./has-symbols-eVqrYdw7.js";import"./function-bind-CTBxUF5L.js";import"./has-0xLfSV6H.js";import"./call-bind-BYlQD6Li.js";import"./object-inspect-DHD9wu3Y.js";import"./lodash.clonedeep-DcFMYim1.js";import"./lodash.isequal-K_gfpr-R.js";import"./@intlify-AYDeHhOU.js";import"./@tiptap-DlxRGiDd.js";import"./prosemirror-state-Dfkm3xtq.js";import"./prosemirror-model-C-VrLeHJ.js";import"./orderedmap-C4TimWWB.js";import"./prosemirror-transform-CNTRfHZy.js";import"./prosemirror-dropcursor-CRVdsyHs.js";import"./prosemirror-gapcursor-CIClWOe5.js";import"./prosemirror-keymap-BrtsOOc5.js";import"./w3c-keyname-DEtA-KhA.js";import"./prosemirror-view-CARpBv5D.js";import"./prosemirror-history-C8_5KGmB.js";import"./rope-sequence-Cxv9J64N.js";import"./linkifyjs-CkylhtGF.js";import"./prosemirror-commands-B8A7CEu7.js";import"./prosemirror-schema-list-B_jBki9Q.js";import"./MediaGifs-DVe-MrnX.js";import"./nanoid-DP16PUbO.js";import"./Masonry-BfXpEWkh.js";import"./MediaFile-CRJPtfzT.js";import"./ExclamationCircle-Co8IAwQh.js";import"./SectionTitle-DlhdjqIe.js";import"./SearchInput-2hkqUhZw.js";import"./NoResult-DQ-W_W23.js";import"./Alert-zz7KsfSK.js";import"./Tab-gMbHW_qz.js";import"./vuedraggable-OGJnKJQC.js";import"./vue-CveCyDR3.js";import"./sortablejs-DNSymPwa.js";import"./EllipsisVertical-DX5Zf3Qx.js";import"./ListItem-CZIJw31K.js";import"./Textarea-XqA1xqrh.js";const kt={class:"w-full mx-auto row-py"},wt={class:"flex"},Ct={class:"mt-lg row-px w-full"},Et={for:"template_name"},gt={class:"form-field"},Me={__name:"CreateEdit",props:["template"],setup(j){const P=tt(()=>G(()=>import("./AIAssist-CyIVQAe8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76]))),{t:i}=st(),n=j,m=n.template?et.cloneDeep(n.template):null;K("postCtx",{});const x=Q("workspaceCtx"),{notify:C}=H(),{versionContentObject:U}=it(),{insertEmoji:B,insertContent:b,replaceContent:D,updateContent:It,focusEditor:O}=mt(),{createPost:S,formatTemplateContent:F,deleteTemplate:L}=pt(),d=W(!1),v=ot({name:m?m.name:"",content:m?m.content:[U()]}),I=X(()=>n.template?i("template.edit_template"):i("template.create_new_template")),k=()=>({name:v.name,content:F(v.content)}),q=()=>{n.template||$(k()),n.template&&z(k())},$=(u,e=!1)=>{w.start(),d.value=!0,axios.post(route("mixpost.templates.api.store",{workspace:x.id}),u).then(s=>{if(C("success",i("template.template_created")),!e){A.get(route("mixpost.templates.edit",{workspace:x.id,template:s.data.id}),{},{preserveScroll:!0});return}A.get(route("mixpost.templates.create",{workspace:x.id}))}).finally(()=>{w.done(),d.value=!1})},z=u=>{w.start(),d.value=!0,axios.put(route("mixpost.templates.api.update",{workspace:x.id,template:n.template.id}),u).then(()=>{C("success",i("template.template_updated"))}).catch(e=>{C("error",e)}).finally(()=>{w.done(),d.value=!1})};return(u,e)=>(p(),N(T,null,[o(t(rt),{title:I.value},null,8,["title"]),f("div",kt,[o(lt,{title:I.value},{default:a(()=>[f("div",wt,[t(m)?(p(),_(E,{key:0,onClick:e[0]||(e[0]=()=>{t(S)(k().content)}),class:"mr-xs"},{default:a(()=>[l(c(t(i)("template.use_template")),1)]),_:1})):y("",!0),t(m)?(p(),_(t(at),{key:1,href:u.route("mixpost.templates.create",{workspace:t(x).id})},{default:a(()=>[o(J,{class:"mr-xs"},{default:a(()=>[l(c(t(i)("template.create_new")),1)]),_:1})]),_:1},8,["href"])):y("",!0),t(m)?(p(),_(M,{key:2,onClick:e[1]||(e[1]=()=>{t(L)(t(m))}),size:"sm"},{default:a(()=>[o(bt)]),_:1})):y("",!0)])]),_:1},8,["title"]),f("div",Ct,[f("form",{onSubmit:Y(q,["prevent"])},[o(nt,null,{title:a(()=>[l(c(t(i)("general.details")),1)]),default:a(()=>[o(ut,{class:"mb-lg !max-w-full"},{title:a(()=>[f("label",Et,[l(c(t(i)("template.template_name"))+" ",1),o(dt,{danger:!0},{default:a(()=>e[10]||(e[10]=[l("*")])),_:1})])]),default:a(()=>[o(Z,{type:"text",modelValue:t(v).name,"onUpdate:modelValue":e[2]||(e[2]=s=>t(v).name=s),id:"template_name",required:""},null,8,["modelValue"])]),_:1}),f("div",gt,[(p(!0),N(T,null,h(t(v).content,(s,R)=>(p(),_(yt,{key:R,id:"templateEditor",value:s.body,editable:!0,onUpdate:V=>s.body=V},{default:a(V=>[o(ft,{media:s.media,onUpdated:r=>s.media=r},null,8,["media","onUpdated"]),o(g,{responsive:!1,class:"relative justify-between border-t border-gray-200 pt-md mt-md"},{default:a(()=>[o(g,{responsive:!1},{default:a(()=>[o(_t,{onSelected:e[3]||(e[3]=r=>t(B)({editorId:"templateEditor",emoji:r})),onClose:e[4]||(e[4]=r=>t(O)({editorId:"templateEditor"}))}),o(ct,{onInsert:r=>{s.media=[...s.media,...r.items],r.crediting&&t(b)({editorId:"templateEditor",text:r.crediting})}},null,8,["onInsert"]),o(xt,{editAllowed:!0,onInsert:e[5]||(e[5]=r=>t(b)({editorId:"templateEditor",text:r}))}),o(vt,{editAllowed:!0,onInsert:e[6]||(e[6]=r=>t(b)({editorId:"templateEditor",text:r}))}),u.$page.props.ai_is_ready_to_use?(p(),_(t(P),{key:0,onInsert:e[7]||(e[7]=r=>t(b)({editorId:"templateEditor",text:r})),onReplace:e[8]||(e[8]=r=>t(D)({editorId:"templateEditor",text:r})),text:s.body},null,8,["text"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value","onUpdate"]))),128))]),o(g,{responsive:!1,class:"items-center mt-lg"},{default:a(()=>[o(E,{disabled:d.value,type:"submit",class:"mr-xs"},{default:a(()=>[l(c(t(i)("template.save_template")),1)]),_:1},8,["disabled"]),t(m)?y("",!0):(p(),_(E,{key:0,onClick:e[9]||(e[9]=()=>{$(k(),!0)}),disabled:d.value,type:"button"},{default:a(()=>[l(c(t(i)("template.save_create_new")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1})],32)])])],64))}};export{Me as default};
